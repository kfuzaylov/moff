{"version":3,"sources":["moff.min.js","packages/core.e6.js","packages/module.e6.js","packages/detect.e6.js","packages/event.e6.js"],"names":["$$core$e6$$Core","handleEvents","_win","addEventListener","windowLoadHandler","_matchMediaSupport","_matchMedia","_mqLarge","addListener","resizeHandler","_mqMedium","_mqSmall","_moff","hashchange","includeByHash","handlePopstate","handleDataEvents","_windowIsLoaded","includeRegister","each","_deferredObjects","i","obj","include","id","callback","mql","matches","viewModeIsChanged","setViewMode","runCallbacks","_changeViewCallbacks","getMode","checkDataScreen","element","screen","getAttribute","split","indexOf","extendSettings","settings","property","hasOwnProperty","_settings","setBreakpoints","breakpoints","replace","sm","md","lg","_lastViewMode","hash","getHash","_registeredFiles","includeByScreenSize","screenMode","loadOnScreen","load","url","ajax","type","success","data","handleLink","title","href","target","push","handleUrlTemplate","removeAttribute","_beforeLoad","history","undefined","Date","now","pushState","elemId","_historyData","loadContent","_afterLoad","arguments","applyContent","html","_doc","querySelector","innerHTML","removeHash","_cache","event","state","index","substr","hashPoint","location","nodeList","node","Object","prototype","toString","call","test","length","nodeType","this","window","document","matchMedia","bootstrap","loadOnHover","cacheLiveTime","_dataEvent","querySelectorAll","handled","toLowerCase","detect","isMobile","setTimeout","preventDefault","init","supportCSS3","ucProp","charAt","toUpperCase","slice","props","join","createElement","style","options","key","params","encodeURIComponent","xhr","XMLHttpRequest","open","setRequestHeader","contentType","onload","status","response","error","send","collection","context","args","Array","isArray","apply","onViewChange","beforeLoad","afterLoad","viewMode","register","loaded","depend","js","css","files","beforeInclude","afterInclude","onWindowLoad","loadFiles","loadAssets","execCallback","depends","runCallback","isCSS","isJS","src","loadJS","loadCSS","console","warn","script","hasCallback","appendChild","link","setAttribute","onreadystatechange","readyState","extend","name","Constructor","constructor","reopen","methods","value","extendClass","child","Parent","F","parentClass","object","version","$$module$e6$$Module","registerModuleEvents","events","_module","add","_moduleObjectStorage","_moduleClassStorage","scopeSelector","scope","beforeInit","afterInit","initClass","ClassName","initialize","classObject","moduleObject","storedObject","moduleName","setScope","get","getAll","remove","removeObject","splice","find","selector","$$detect$e6$$Detect","html5Support","_detect","touch","DocumentTouch","applicationCache","canvas","getContext","canvasText","fillText","dragAndDrop","div","hashChange","documentMode","postMessage","webSockets","webWorkers","Worker","audio","bool","canPlayType","ogg","mp3","wav","m4a","video","h264","webm","indexedDB","item","bind","localStorage","setItem","mode","removeItem","sessionStorage","detectBrowser","match","exec","_ua","browser","chrome","webkit","detectOS","OS","iOS","macOS","windows","android","windowsPhone","detectMobileDevice","navigator","userAgent","$$event$e6$$Event","_eventStore","on","trigger","$$core$e6$$default","$$module$e6$$default","$$detect$e6$$default","$$event$e6$$default","packages$loader$e6$$Moff","Moff"],"mappings":"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","file":"moff.min.js","sourcesContent":[null,"/**\n * Moff class\n * @constructor\n */\nfunction Core() {\n\t/**\n\t * @property {Core} _moff - Link to Core object\n\t * @private\n\t */\n\tvar _moff = this;\n\n\t/**\n\t * @property {window} _win - Link to window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {HTMLDocument} _doc - Local link to document object.\n\t * @private\n\t */\n\tvar _doc = _win.document;\n\n\t/**\n\t * @property {{}} _registeredFiles - Object to register files to be loaded.\n\t * @private\n\t */\n\tvar _registeredFiles = {};\n\n\t/**\n\t * @property {Array} _deferredObjects - Deferred files.\n\t * @private\n\t */\n\tvar _deferredObjects = [];\n\n\t/**\n\t * @property {boolean} _matchMediaSupport - Match media support and link.\n\t * @private\n\t */\n\tvar _matchMediaSupport = !!(_win.matchMedia && _win.matchMedia('screen').addListener);\n\n\t/**\n\t * @property {boolean|Window.matchMedia|*} _matchMedia - Short link to matchMedia.\n\t * @private\n\t */\n\tvar _matchMedia = _matchMediaSupport && _win.matchMedia;\n\n\t/**\n\t * @property {string} _mqSmall - Media query breakpoint conditions.\n\t * @private\n\t */\n\tvar _mqSmall = '(min-width: %dpx)';\n\n\t/**\n\t * @type {string} _mqMedium - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqMedium = _mqSmall;\n\n\t/**\n\t * @type {string} _mqLarge - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqLarge = _mqSmall;\n\n\t/**\n\t * @property {string} _lastViewMode - List name of device screen mode\n\t * @private\n\t */\n\tvar _lastViewMode;\n\n\t/**\n\t * @property {Array} _changeViewCallbacks - Array of callbacks to trigger on view change.\n\t * @private\n\t */\n\tvar _changeViewCallbacks = [];\n\n\t/**\n\t * @property {boolean} _windowIsLoaded - Flag to determine whether the window is loaded.\n\t * @private\n\t */\n\tvar _windowIsLoaded = false;\n\n\t/**\n\t * @property {Array} _beforeLoad - Run these callbacks before content loading.\n\t * @private\n\t */\n\tvar _beforeLoad = [];\n\n\t/**\n\t * @property {Array} _afterLoad - Run these callbacks after content is loaded.\n\t * @private\n\t */\n\tvar _afterLoad = [];\n\n\t/**\n\t * @property {{}} _cache - Preloaded data cache\n\t * @private\n\t */\n\tvar _cache = {};\n\n\t/**\n\t * @property {object} _settings - Local default settings.\n\t * @private\n\t */\n\tvar _settings = {\n\t\tbreakpoints: {\n\t\t\tsm: 768,\n\t\t\tmd: 992,\n\t\t\tlg: 1200\n\t\t},\n\n\t\tbootstrap: false,\n\t\tloadOnHover: true,\n\t\tcacheLiveTime: 2000\n\t};\n\n\t/**\n\t * @property {string} _dataEvent - Data load event selector.\n\t * @private\n\t */\n\tvar _dataEvent = '[data-load-target]';\n\n\t/**\n\t * @property {{}} _historyData - History data store.\n\t * @private\n\t */\n\tvar _historyData = {};\n\n\t/**\n\t * Handle elements event.\n\t * @function handleEvents\n\t */\n\tfunction handleEvents() {\n\t\t_win.addEventListener('load', windowLoadHandler, false);\n\n\t\t// Check for addListener method\n\t\t// because respond.js emulates matchMedia method\n\t\tif (_matchMediaSupport) {\n\t\t\t_matchMedia(_mqLarge).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqMedium).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqSmall).addListener(resizeHandler);\n\t\t} else {\n\t\t\t// If matchMedia is not supported use resize fallback\n\t\t\t_win.addEventListener('resize', resizeHandler, false);\n\t\t}\n\n\t\tif (_moff.hashchange) {\n\t\t\t_win.addEventListener('hashchange', includeByHash, false);\n\t\t}\n\n\t\t_win.addEventListener('popstate', handlePopstate, false);\n\t\t_moff.handleDataEvents();\n\t}\n\n\t/**\n\t * Window load event handler.\n\t * @function windowLoadHandler\n\t */\n\tfunction windowLoadHandler() {\n\t\t_windowIsLoaded = true;\n\n\t\t// Run includeRegister function to include files\n\t\t// registered as after window load and tagged in url hash tag or by screen size\n\t\tincludeRegister();\n\n\t\t// Load deferred files.\n\t\t// These files included with MoFF.include method before window load event.\n\t\t_moff.each(_deferredObjects, function(i, obj) {\n\t\t\t_moff.include(obj.id, obj.callback);\n\t\t});\n\t}\n\n\t/**\n\t * Window resize or matchMedia event listener handler.\n\t * @function resizeHandler\n\t * @param {object} mql - MediaQueryList object\n\t */\n\tfunction resizeHandler(mql) {\n\t\tif ((_matchMediaSupport && mql.matches) || _moff.viewModeIsChanged()) {\n\t\t\tsetViewMode();\n\n\t\t\t_moff.runCallbacks(_changeViewCallbacks, _moff, [_moff.getMode()]);\n\t\t\t_moff.handleDataEvents();\n\t\t}\n\t}\n\n\t/**\n\t * Handle load events.\n\t * @method handleDataEvents\n\t */\n\tthis.handleDataEvents = function() {\n\t\tvar element, event, url;\n\n\t\t_moff.each(_doc.querySelectorAll(_dataEvent), function() {\n\t\t\telement = this;\n\t\t\tif (element.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent = (element.getAttribute('data-load-event') || 'click').toLowerCase();\n\n\t\t\tif (event === 'dom') {\n\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\thandleLink(element);\n\t\t\t\t} else {\n\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\telement.addEventListener('click', function() {\n\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (event === 'click' && _settings.loadOnHover && !_moff.detect.isMobile) {\n\t\t\t\t\telement.addEventListener('mouseenter', function() {\n\t\t\t\t\t\telement = this;\n\t\t\t\t\t\turl = element.href || element.getAttribute('data-load-url');\n\t\t\t\t\t\turl = removeHash(url);\n\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\turl = handleUrlTemplate(element, url);\n\n\t\t\t\t\t\t\tload(url, function(data) {\n\t\t\t\t\t\t\t\t_cache[url] = data;\n\n\t\t\t\t\t\t\t\t// Clear cache each n seconds to prevent memory leak.\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tdelete _cache[url];\n\t\t\t\t\t\t\t\t}, _settings.cacheLiveTime);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\n\t\t\t\telement.addEventListener(event, function(event) {\n\t\t\t\t\thandleLink(this);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}, false);\n\t\t\t}\n\n\t\t\tthis.handled = true;\n\t\t});\n\t};\n\n\t/**\n\t * Check element for data load screen.\n\t * @function checkDataScreen\n\t * @param {object} element - jQuery object\n\t * @returns {boolean} Return true if no data load screen\n\t */\n\tfunction checkDataScreen(element) {\n\t\tvar screen = element.getAttribute('data-load-screen');\n\t\treturn screen ? screen.split(' ').indexOf(_moff.getMode()) !== -1 : true;\n\t}\n\n\t/**\n\t * Extend Core settings\n\t * @param {object} settings - Core settings\n\t */\n\tfunction extendSettings(settings) {\n\t\tvar property;\n\t\tif (typeof settings === 'object') {\n\t\t\tfor (property in settings) {\n\t\t\t\tif (settings.hasOwnProperty(property)) {\n\t\t\t\t\t_settings[property] = settings[property];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Setup breakpoints for Media Queries.\n\t * @function setBreakpoints\n\t */\n\tfunction setBreakpoints() {\n\t\tvar breakpoints;\n\n\t\tif (_settings.breakpoints && _matchMediaSupport) {\n\t\t\tbreakpoints = _settings.breakpoints;\n\t\t\t_mqSmall = _mqSmall.replace('%d', breakpoints.sm);\n\t\t\t_mqMedium = _mqMedium.replace('%d', breakpoints.md);\n\t\t\t_mqLarge = _mqLarge.replace('%d', breakpoints.lg);\n\t\t}\n\t}\n\n\t/**\n\t * Change last view mode.\n\t * @function setViewMode\n\t */\n\tfunction setViewMode() {\n\t\t_lastViewMode = _moff.getMode();\n\t}\n\n\t/**\n\t * Handler to load registered files by hash tag.\n\t * @function includeByHash\n\t */\n\tfunction includeByHash() {\n\t\tvar hash = getHash();\n\n\t\tif (_registeredFiles.hasOwnProperty(hash)) {\n\t\t\t_moff.include(hash);\n\t\t}\n\t}\n\n\t/**\n\t * Handler to load registered files by screen size.\n\t * @function includeByScreenSize\n\t */\n\tfunction includeByScreenSize() {\n\t\tvar screenMode = _moff.getMode();\n\n\t\t_moff.each(_registeredFiles, function(id, obj) {\n\t\t\tif (obj.loadOnScreen.indexOf(screenMode) !== -1) {\n\t\t\t\t_moff.include(id);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Load data.\n\t * @param {string} url - Load url\n\t * @param {function} callback - Callback on success\n\t */\n\tfunction load(url, callback) {\n\t\t_moff.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'GET',\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\tcallback(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Links click event handler.\n\t * @function handleLink\n\t * @param {object} element - DOM element\n\t * @returns {boolean} false\n\t */\n\tfunction handleLink(element) {\n\t\tvar title = element.title || '';\n\t\tvar url = element.href || element.getAttribute('data-load-url');\n\t\tvar target = element.getAttribute('data-load-target');\n\t\tvar push = element.getAttribute('data-push-url');\n\t\tvar id;\n\n\t\tif (url) {\n\t\t\turl = handleUrlTemplate(element, url);\n\t\t\t// Remove data attributes not to handle twice\n\t\t\telement.removeAttribute('data-load-event');\n\t\t\t_moff.runCallbacks(_beforeLoad, element);\n\n\t\t\tif (_moff.history && push !== undefined) {\n\t\t\t\tid = Date.now();\n\t\t\t\t_win.history.pushState({elemId: id, url: url}, title, url);\n\t\t\t\t_historyData[id] = element;\n\t\t\t}\n\n\t\t\tloadContent(element, url, target, function() {\n\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle url for templates.\n\t * @function handleUrlTemplate\n\t * @param {object} element - DOM element\n\t * @param {string} url - Handled url\n\t * @returns {string} handled url\n\t */\n\tfunction handleUrlTemplate(element, url) {\n\t\treturn url.replace(/\\{\\{(.*?)\\}\\}/g, function() {\n\t\t\treturn element[arguments[1]]();\n\t\t});\n\t}\n\n\t/**\n\t * Load content and append into target.\n\t * @function loadContent\n\t * @param {object} element - DOM element\n\t * @param {string} url - Content URL\n\t * @param {string} target - Target element selector\n\t * @param {function} callback\n\t */\n\tfunction loadContent(element, url, target, callback) {\n\t\tvar title;\n\n\t\turl = removeHash(url);\n\n\t\tfunction applyContent(html) {\n\t\t\ttitle = element.getAttribute('data-page-title');\n\t\t\t_doc.querySelector(target).innerHTML = html;\n\n\t\t\tif (title) {\n\t\t\t\t_doc.title = title;\n\t\t\t}\n\n\t\t\t// Handle events of new added elements\n\t\t\t_moff.handleDataEvents();\n\t\t\tcallback();\n\t\t}\n\n\t\t// If data is cached load it from cache\n\t\tif (_cache[url]) {\n\t\t\tapplyContent(_cache[url]);\n\t\t} else {\n\t\t\tload(url, applyContent);\n\t\t}\n\t}\n\n\t/**\n\t * Window popstate event handler.\n\t * @function handlePopstate\n\t * @param {object} event - Event object\n\t */\n\tfunction handlePopstate(event) {\n\t\tvar state = event.state;\n\t\tvar element;\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\telement = _historyData[state.elemId];\n\t\tif (!checkDataScreen(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar url = state.url;\n\t\tvar target = element.getAttribute('data-load-target');\n\n\t\t_moff.runCallbacks(_beforeLoad, element);\n\t\tloadContent(element, url, target, function() {\n\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t});\n\t}\n\n\t/**\n\t * Remove hash tag from URL.\n\t * @function removeHash\n\t * @param {string} url\n\t * @returns {string} URL w/o hash tag\n\t */\n\tfunction removeHash(url) {\n\t\tvar index = url.indexOf('#');\n\t\treturn index === -1 ? url : url.substr(0, index);\n\t}\n\n\t/**\n\t * Get hash tag form URL.\n\t * @function getHash\n\t * @param {string} [url]\n\t * @returns {sting} Hash tag\n\t */\n\tfunction getHash(url) {\n\t\tif (url) {\n\t\t\tvar hashPoint = url.indexOf('#');\n\t\t\treturn hashPoint !== -1 ? url.substr(hashPoint + 1) : '';\n\t\t}\n\n\t\treturn _win.location.hash.substr(1);\n\t}\n\n\t/**\n\t * Check url hash tag to load registered files.\n\t * @function includeRegister\n\t */\n\tfunction includeRegister() {\n\t\tincludeByHash();\n\t\tincludeByScreenSize();\n\t}\n\n\tfunction nodeList(node) {\n\t\tvar type = Object.prototype.toString.call(node);\n\n\t\treturn typeof /^\\[object (HTMLCollection|NodeList)\\]$/.test(type)\n\t\t\t&& node.hasOwnProperty('length')\n\t\t\t&& (node.length === 0 || (typeof node[0] === 'object' && node[0].nodeType > 0));\n\t}\n\n\t/**\n\t * Run initialisation of base handlers\n\t * @method init\n\t * @param {object} [settings] - Core settings\n\t */\n\tthis.init = function(settings) {\n\t\t// Normalize settings\n\t\tif (!settings) {\n\t\t\tsettings = {};\n\t\t}\n\n\t\t_doc.addEventListener('DOMContentLoaded', function() {\n\t\t\textendSettings(settings);\n\t\t\tsetBreakpoints();\n\t\t\tsetViewMode();\n\t\t\thandleEvents();\n\t\t\tincludeRegister();\n\t\t}, false);\n\t};\n\n\t/**\n\t * Check for CSS3 property support.\n\t * @method supportCSS3\n\t * @param {string} property - CSS3 property\n\t * @returns {boolean}\n\t */\n\tthis.supportCSS3 = function(property) {\n\t\tvar ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tvar props = (property + ' ' + 'Webkit Moz O ms'.split(' ').join(ucProp + ' ') + ucProp).split(' ');\n\t\tvar length = props.length;\n\t\tvar i = 0;\n\n\t\tfor (; i < length; i++) {\n\t\t\tproperty = props[i];\n\t\t\tif (property.indexOf('-') === -1 && document.createElement('div').style[property] !== undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tthis.ajax = function(options) {\n\t\tvar params = [];\n\t\tvar key, data;\n\n\t\t// Make type upper case\n\t\toptions.type = options.type.toUpperCase();\n\n\t\t// Set data object to send them as POST or GET params\n\t\tif (typeof options.data === 'object') {\n\t\t\tdata = options.data;\n\n\t\t\tfor (key in data) {\n\t\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\t\tparams.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.data = params.join('&');\n\t\t}\n\n\t\t// Here data has additional GET params\n\t\t// Object could not be send with GET method\n\t\tif (options.type === 'GET' && options.data) {\n\t\t\toptions.url += (options.url.indexOf('?') !== -1 ? '&' : '?') + options.data.replace(/%20/g, '+');\n\t\t\toptions.data = null;\n\t\t}\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open(options.type, options.url, true);\n\n\t\txhr.setRequestHeader('Content-Type', options.contentType || 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n\t\txhr.onload = function() {\n\t\t\tvar status = this.status;\n\t\t\tif (status >= 200 && status < 300 || status === 304) {\n\t\t\t\toptions.success(this.response, this);\n\t\t\t} else {\n\t\t\t\toptions.error(this);\n\t\t\t}\n\t\t};\n\n\t\txhr.send(options.data);\n\t};\n\n\t/**\n\t * Run callbacks in passed collections.\n\t * @method runCallbacks\n\t * @param {object} collection - Callbacks collection\n\t * @param {object} context - Callback context\n\t */\n\tthis.runCallbacks = function(collection, context, args) {\n\t\t// Normalize collection\n\t\tif (!Array.isArray(collection)) {\n\t\t\tcollection = [];\n\t\t}\n\n\t\t// Normalize arguments\n\t\tif (typeof args === 'undefined') {\n\t\t\targs = [];\n\t\t}\n\n\t\t_moff.each(collection, function(i, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback.apply(context, args);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Add callbacks to view change event.\n\t * @method onViewChange\n\t * @param {function} callback - Callback assigned on view change\n\t */\n\tthis.onViewChange = function(callback) {\n\t\tif (typeof callback === 'function') {\n\t\t\t_changeViewCallbacks.push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Add callback before loading content.\n\t * @method beforeLoad\n\t * @param {function} callback\n\t */\n\tthis.beforeLoad = function(callback) {\n\t\t_beforeLoad.push(callback);\n\t};\n\n\t/**\n\t * Add callback after loading content.\n\t * @method afterLoad\n\t * @param {function} callback\n\t */\n\tthis.afterLoad = function(callback) {\n\t\t_afterLoad.push(callback);\n\t};\n\n\t/**\n\t * Get device view mode\n\t * @method getMode\n\t * @returns {string} view mode\n\t */\n\tthis.getMode = function() {\n\t\tvar viewMode = 'xs';\n\n\t\tif (_matchMediaSupport) {\n\t\t\tif (_matchMedia(_mqLarge).matches) {\n\t\t\t\tviewMode = 'lg';\n\t\t\t} else if (_matchMedia(_mqMedium).matches) {\n\t\t\t\tviewMode = 'md';\n\t\t\t} else if (_matchMedia(_mqSmall).matches) {\n\t\t\t\tviewMode = 'sm';\n\t\t\t}\n\t\t}\n\n\t\treturn viewMode;\n\t};\n\n\t/**\n\t * Register files to be loaded files.\n\t * @method register\n\t * @param {object} obj - Registered object\n\t */\n\tthis.register = function(obj) {\n\t\t// Normalize obj properties\n\t\t_registeredFiles[obj.id] = {\n\t\t\tloaded: false,\n\t\t\tdepend: {\n\t\t\t\tjs: obj.depend && obj.depend.js || [],\n\t\t\t\tcss: obj.depend && obj.depend.css || []\n\t\t\t},\n\t\t\tfiles: {\n\t\t\t\tjs: obj.files && obj.files.js || [],\n\t\t\t\tcss: obj.files && obj.files.css || []\n\t\t\t},\n\t\t\tloadOnScreen: obj.loadOnScreen || [],\n\t\t\tbeforeInclude: obj.beforeInclude || undefined,\n\t\t\tafterInclude: obj.afterInclude || undefined,\n\t\t\tonWindowLoad: obj.onWindowLoad || false\n\t\t};\n\t};\n\n\t/**\n\t * Load registered files by identifier.\n\t * @method include\n\t * @param {string} id - Included object id\n\t * @param {function} [callback] - Function callback\n\t */\n\tthis.include = function(id, callback) {\n\t\tvar register = _registeredFiles[id];\n\n\t\t// Make sure files are not loaded\n\t\tif (register.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure to load after window load if onWindowLoad is set\n\t\tif (register.onWindowLoad && !_windowIsLoaded) {\n\t\t\t// Save id to load after window load\n\t\t\t_deferredObjects.push({id: id, callback: callback});\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as loaded\n\t\tregister.loaded = true;\n\n\t\tif (typeof register.beforeInclude === 'function') {\n\t\t\tregister.beforeInclude();\n\t\t}\n\n\t\tfunction loadFiles() {\n\t\t\t_moff.loadAssets(register.files, execCallback);\n\t\t}\n\n\t\tthis.loadAssets(register.depend, loadFiles);\n\n\t\tfunction execCallback() {\n\t\t\tif (typeof register.afterInclude === 'function') {\n\t\t\t\tregister.afterInclude();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load files and run callback.\n\t * @method loadAssets\n\t * @param {object} depends - Object with js and css files to be loaded\n\t * @param {function} callback - Function executed after files be loaded\n\t */\n\tthis.loadAssets = function(depends, callback) {\n\t\tvar loaded = 0;\n\t\tvar length = 0;\n\t\tvar isCSS = Array.isArray(depends.css);\n\t\tvar isJS = Array.isArray(depends.js);\n\n\t\tif (isJS) {\n\t\t\tlength += depends.js.length;\n\t\t}\n\n\t\tif (isCSS) {\n\t\t\tlength += depends.css.length;\n\t\t}\n\n\t\tfunction runCallback() {\n\t\t\tloaded++;\n\t\t\tif (loaded === length) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (isJS && depends.js.length) {\n\t\t\t// Load depend js files\n\t\t\tthis.each(depends.js, function(i, src) {\n\t\t\t\t_moff.loadJS(src, runCallback);\n\t\t\t});\n\t\t}\n\n\t\tif (isCSS && depends.css.length) {\n\t\t\t// Load depend css files\n\t\t\tthis.each(depends.css, function(i, href) {\n\t\t\t\t_moff.loadCSS(href, runCallback);\n\t\t\t});\n\t\t}\n\n\t\tif (!length) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load js file and run callback on load.\n\t * @method loadJS\n\t * @param {string} src - Array or path of loaded files\n\t * @param {function} [callback] - On load event callback\n\t */\n\tthis.loadJS = function(src, callback) {\n\t\tif (typeof src !== 'string') {\n\t\t\twindow.console.warn('Moff.loadJS source is not a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar script;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load script if it is not existing on the page\n\t\tif (!_doc.querySelector('script[src=\"' + src + '\"]')) {\n\t\t\t// If set src attribute before append\n\t\t\t// jQuery will load script with ajax request\n\t\t\tscript = _doc.createElement('script');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tscript.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tscript.src = src;\n\t\t\t_doc.querySelector('body').appendChild(script);\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load css file and run callback on load.\n\t * @method loadCSS\n\t * @param {string} href - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadCSS = function(href, callback) {\n\t\tif (typeof href !== 'string') {\n\t\t\twindow.console.warn('Moff.loadCSS source is a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar link;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load link if it is not existing on the page\n\t\tif (!_doc.querySelector('link[href=\"' + href + '\"]')) {\n\t\t\tlink = _doc.createElement('link');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tlink.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tlink.href = href;\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\t_doc.querySelector('head').appendChild(link);\n\n\t\t\tlink.onreadystatechange = function() {\n\t\t\t\tvar state = link.readyState;\n\t\t\t\tif (state === 'loaded' || state === 'complete') {\n\t\t\t\t\tlink.onreadystatechange = null;\n\n\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Extend Moff object.\n\t * @method extend\n\t * @param {string} name - Module name\n\t * @param {function} Constructor - Module constructor\n\t * @param {boolean} extend [optionally] - Extend from Moff prototype\n\t */\n\tthis.extend = function(name, Constructor, extend) {\n\t\t// Make sure not to override existing properties/methods\n\t\tif (!this.hasOwnProperty(name)) {\n\t\t\tif (extend) {\n\t\t\t\tConstructor.prototype = this;\n\t\t\t\tConstructor.prototype.constructor = Constructor;\n\t\t\t}\n\n\t\t\tthis[name] = new Constructor();\n\n\t\t\tif (typeof this[name].init === 'function') {\n\t\t\t\tthis[name].init();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Overwrites and adds object methods and properties.\n\t * @method reopen\n\t * @param {object} methods - Object of properties or methods\n\t */\n\tthis.reopen = function(methods) {\n\t\tif (typeof methods !== 'object') {\n\t\t\twindow.console.warn('Reopen method argument must be an object');\n\t\t\treturn;\n\t\t}\n\n\t\tvar obj = this;\n\t\tobj.each(methods, function(property, value) {\n\t\t\tobj[property] = value;\n\t\t});\n\t};\n\n\t/**\n\t * Extend classes.\n\t * @method extendClass\n\t * @param {function} child - Child constructor\n\t * @param {function} Parent - Parent constructor\n\t */\n\tthis.extendClass = function(child, Parent) {\n\t\tfunction F() {}\n\n\t\tF.prototype = new Parent();\n\t\tchild.prototype = new F();\n\t\tchild.prototype.constructor = child;\n\t\tchild.parentClass = Parent.prototype;\n\t};\n\n\t/**\n\t * Determine whether view mode is changed\n\t * @method viewModeIsChanged\n\t * @returns {boolean}\n\t */\n\tthis.viewModeIsChanged = function() {\n\t\treturn _lastViewMode !== this.getMode();\n\t};\n\n\t/**\n\t * Set or get Moff settings value.\n\t * @method settings\n\t * @param {string} key - Setting name\n\t * @param {*} value - Setting value\n\t * @returns {*}\n\t */\n\tthis.settings = function(key, value) {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn _settings[key];\n\t\t} else {\n\t\t\t_settings[key] = value;\n\t\t}\n\t};\n\n\tthis.each = function(object, callback) {\n\t\tvar i = 0;\n\t\tvar length = object.length;\n\t\tvar isArray = Array.isArray(object) || nodeList(object);\n\t\tvar value;\n\n\t\tif (isArray) {\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\tif (value === false) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i in object) {\n\t\t\t\tif (object.hasOwnProperty(i)) {\n\t\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Moff version.\n\t * @type {string}\n\t */\n\tthis.version = '{{version}}';\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_deferredObjects: function() {\n\t\t\treturn _deferredObjects;\n\t\t},\n\n\t\t_registeredFiles: function() {\n\t\t\treturn _registeredFiles;\n\t\t},\n\n\t\t_cache: _cache\n\t};\n\t/* End-test-code */\n}\n\nexport default Core;\n","/**\n * Register and control new Moff modules.\n * @module Module.\n */\nfunction Module() {\n\t/**\n\t * @private {Module} _module - Link to object.\n\t */\n\tvar _module = this;\n\n\t/**\n\t * @private {{}} _moduleObjectStorage - Modules storage.\n\t */\n\tvar _moduleObjectStorage = {};\n\n\t/**\n\t * @private {{}} _moduleClassStorage - Classes storage.\n\t */\n\tvar _moduleClassStorage = {};\n\n\t/**\n\t * Register module events\n\t * @param {Array} events - Array of events\n\t */\n\tfunction registerModuleEvents(events) {\n\t\tif (Array.isArray(events)) {\n\t\t\t_module.each(events, function(index, event) {\n\t\t\t\t_module.event.add(event);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @property {null|string} scopeSelector - Module scope selector. jQuery selector.\n\t */\n\tthis.scopeSelector = null;\n\n\t/**\n\t * @property {null|object} scope - Module scope object. jQuery object.\n\t */\n\tthis.scope = null;\n\n\t/**\n\t * @property {Array} events - Array of module events.\n\t */\n\tthis.events = [];\n\n\t/**\n\t * @property {Function} beforeInit - Before initialization callback\n\t */\n\tthis.beforeInit = function() {};\n\n\t/**\n\t * @property {Function} init - Initialization callback\n\t */\n\tthis.init = function() {};\n\n\t/**\n\t * @property {Function} afterInit - After initialization callback\n\t */\n\tthis.afterInit = function() {};\n\n\t/**\n\t * Register new module.\n\t * @method register\n\t * @param {string} name - module name\n\t * @param {object} [depends] - object of js and css files\n\t * @param {function} Constructor - constructor\n\t */\n\tthis.register = function(name, depends, Constructor) {\n\t\t// Normalize arguments\n\t\tif (typeof Constructor === 'undefined') {\n\t\t\tConstructor = depends;\n\t\t\tdepends = undefined;\n\t\t}\n\n\t\t// Register new module in the storage\n\t\tif (!_moduleClassStorage.hasOwnProperty(name)) {\n\t\t\tConstructor.prototype = _module;\n\t\t\tConstructor.prototype.constructor = Constructor;\n\n\t\t\t// Save module in storage\n\t\t\tif (typeof _moduleClassStorage[name] === 'undefined') {\n\t\t\t\t_moduleClassStorage[name] = {\n\t\t\t\t\tconstructor: Constructor,\n\t\t\t\t\tdepends: depends\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\twindow.console.warn(name + ' class has already registered.');\n\t\t}\n\t};\n\n\t/**\n\t * Initialize registered class\n\t * @method initClass\n\t * @param {string} ClassName - Name of registered class\n\t * @param {object} [params] - Object with additional params\n\t */\n\tthis.initClass = function(ClassName, params) {\n\t\tvar moduleObject = _moduleClassStorage[ClassName];\n\n\t\tif (!moduleObject) {\n\t\t\twindow.console.warn(ClassName + ' Class is not registered');\n\t\t\treturn;\n\t\t}\n\n\t\tfunction initialize() {\n\t\t\t// Create new class object\n\t\t\tvar classObject = new moduleObject.constructor();\n\t\t\tvar storedObject = _moduleObjectStorage[ClassName];\n\n\t\t\t// Store objects in array if there are more then one classes\n\t\t\tif (Array.isArray(storedObject)) {\n\t\t\t\tstoredObject.push(classObject);\n\t\t\t} else if (typeof storedObject !== 'undefined') {\n\t\t\t\t_moduleObjectStorage[ClassName] = [storedObject, classObject];\n\t\t\t} else {\n\t\t\t\t_moduleObjectStorage[ClassName] = classObject;\n\t\t\t}\n\n\t\t\tif (typeof classObject.beforeInit === 'function') {\n\t\t\t\tclassObject.beforeInit();\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\t// Apply all passed data\n\t\t\t\t_module.each(params, function(key, value) {\n\t\t\t\t\tclassObject[key] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add module name\n\t\t\tclassObject.moduleName = ClassName;\n\n\t\t\t// Register module events.\n\t\t\tregisterModuleEvents(classObject.events);\n\n\t\t\t// Set module scope\n\t\t\tclassObject.setScope();\n\n\t\t\tif (typeof classObject.init === 'function') {\n\t\t\t\tclassObject.init();\n\t\t\t}\n\n\t\t\tif (typeof classObject.afterInit === 'function') {\n\t\t\t\tclassObject.afterInit();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tif (moduleObject.depends) {\n\t\t\t\tthis.loadAssets(moduleObject.depends, initialize);\n\t\t\t} else {\n\t\t\t\tinitialize();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\twindow.console.error(error);\n\t\t}\n\t};\n\n\t/**\n\t * Get registered module by name.\n\t * @method get\n\t * @param {string} name - module name\n\t * @return {object|Array|undefined} module object or undefined\n\t */\n\tthis.get = function(name) {\n\t\treturn (_moduleObjectStorage.hasOwnProperty(name) && _moduleObjectStorage[name]) || undefined;\n\t};\n\n\t/**\n\t * Returns all modules.\n\t * @method getAll\n\t * @returns {{}}\n\t */\n\tthis.getAll = function() {\n\t\treturn _moduleObjectStorage;\n\t};\n\n\t/**\n\t * Remove registered module by name.\n\t * @method remove\n\t */\n\tthis.remove = function() {\n\t\tvar name = this.moduleName;\n\t\tvar id = this.id;\n\t\tvar i = 0;\n\t\tvar object, length;\n\n\t\tfunction removeObject() {\n\t\t\t_moduleObjectStorage[name].splice(i, 1);\n\t\t\tlength = _moduleObjectStorage[name].length;\n\t\t\t--i;\n\t\t}\n\n\t\t// Be sure to remove existing module\n\t\tif (Array.isArray(_moduleObjectStorage[name])) {\n\t\t\tlength = _moduleObjectStorage[name].length;\n\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tobject = _moduleObjectStorage[name][i];\n\n\t\t\t\tif (object.id) {\n\t\t\t\t\tif (object.id === id) {\n\t\t\t\t\t\tremoveObject();\n\t\t\t\t\t}\n\t\t\t\t} else if (object.moduleName === name) {\n\t\t\t\t\tremoveObject();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_moduleObjectStorage[name].length === 1) {\n\t\t\t\t_moduleObjectStorage[name] = _moduleObjectStorage[name][0];\n\t\t\t} else if (!_moduleObjectStorage[name].length) {\n\t\t\t\tdelete _moduleObjectStorage[name];\n\t\t\t}\n\t\t} else {\n\t\t\tdelete _moduleObjectStorage[name];\n\t\t}\n\t};\n\n\t/**\n\t * Register module scope by scope selector.\n\t * @method setScope\n\t */\n\tthis.setScope = function() {\n\t\tif (this.scopeSelector) {\n\t\t\tthis.scope = document.querySelector(this.scopeSelector);\n\t\t}\n\t};\n\n\t/**\n\t * Find element in module scope.\n\t * @method find\n\t * @param {string} selector - jQuery selector.\n\t * @returns {object} jQuery object.\n\t */\n\tthis.find = function(selector) {\n\t\treturn this.scope.querySelectorAll(selector);\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_moduleClassStorage: _moduleClassStorage,\n\t\t_moduleObjectStorage: _moduleObjectStorage\n\t};\n\t/* End-test-code */\n}\n\nexport default Module;\n","/**\n * Detects OS, browser and another features support.\n * @module Detect\n */\nfunction Detect() {\n\t/**\n\t * @property {Window} _win - Link to Window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {Detect} _detect - Link to this object.\n\t * @private\n\t */\n\tvar _detect = this;\n\n\t/**\n\t * @property {string} _ua - Link to user agent.\n\t * @private\n\t */\n\tvar _ua = window.navigator.userAgent.toLowerCase();\n\n\t/**\n\t * @property {HTMLDocument} _doc - Link to document object.\n\t * @private\n\t */\n\tvar _doc = document;\n\n\t/**\n\t * @property {{}} browser - Object with browser details.\n\t */\n\tthis.browser = {};\n\n\t/**\n\t * @property {{}} OS - Object with OS details.\n\t */\n\tthis.OS = {};\n\n\t/**\n\t * HTML5 support list.\n\t * @function html5Support\n\t */\n\tfunction html5Support() {\n\t\t// Determine whether browser support touch JavaScript API\n\t\t// It does not mean touch device\n\t\t_detect.touch = !!(('ontouchstart' in _win) || _win.DocumentTouch && _doc instanceof _win.DocumentTouch);\n\t\t_detect.applicationCache = !!_win.applicationCache;\n\t\t_detect.canvas = (function() {\n\t\t\tvar canvas = _doc.createElement('canvas');\n\t\t\treturn !!(canvas.getContext && canvas.getContext('2d'));\n\t\t})();\n\n\t\t_detect.canvasText = !!(_detect.canvas && typeof _doc.createElement('canvas').getContext('2d').fillText === 'function');\n\t\t_detect.dragAndDrop = (function() {\n\t\t\tvar div = _doc.createElement('div');\n\t\t\treturn ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n\t\t})();\n\n\t\t_detect.hashChange = !!('onhashchange' in _win && (typeof _doc.documentMode === 'undefined' || _doc.documentMode > 7));\n\t\t_detect.history = !!(_win.history && history.pushState);\n\t\t_detect.postMessage = !!_win.postMessage;\n\t\t_detect.webSockets = !!('WebSocket' in _win || 'MozWebSocket' in _win);\n\t\t_detect.webWorkers = !!_win.Worker;\n\t\t_detect.audio = (function() {\n\t\t\tvar audio = _doc.createElement('audio');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!audio.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '');\n\t\t\t\t\tbool.mp3 = audio.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\t\t\t\t\tbool.wav = audio.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '');\n\t\t\t\t\tbool.m4a = (audio.canPlayType('audio/x-m4a;') || audio.canPlayType('audio/aac;')).replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.video = (function() {\n\t\t\tvar video = _doc.createElement('video');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!video.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = video.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\t\t\t\t\tbool.h264 = video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\t\t\t\t\tbool.webm = video.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.indexedDB = (function() {\n\t\t\tvar props = ['indexedDB', 'webkitIndexedDB', 'mozIndexedDB', 'OIndexedDB', 'msIndexedDB'];\n\n\t\t\tfor (var i in props) {\n\t\t\t\tif (props.hasOwnProperty(i)) {\n\t\t\t\t\tvar item = _win[props[i]];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\tif (item === false) {\n\t\t\t\t\t\t\treturn props[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof item === 'function') {\n\t\t\t\t\t\t\treturn item.bind(_win);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t})();\n\n\t\t_detect.localStorage = (function() {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tlocalStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\n\t\t_detect.sessionStorage = (function() {\n\t\t\ttry {\n\t\t\t\tsessionStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tsessionStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t}\n\n\t/**\n\t * Detect browser\n\t * @function detectBrowser\n\t */\n\tfunction detectBrowser() {\n\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(msie) ([\\w.]+)/.exec(_ua) ||\n\t\t\t_ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(_ua) || [];\n\n\t\tif (match[1]) {\n\t\t\t_detect.browser[match[1]] = true;\n\t\t}\n\n\t\tif (match[2]) {\n\t\t\t_detect.browser.version = match[2];\n\t\t}\n\n\t\tif (_detect.browser.chrome) {\n\t\t\t_detect.browser.webkit = true;\n\t\t}\n\t}\n\n\t/**\n\t * Detect Operating System\n\t * @function detectOS\n\t */\n\tfunction detectOS() {\n\t\tvar OS = _detect.OS;\n\t\tvar iOS = /(ipad|iphone|ipod)/g.test(_ua);\n\t\tvar macOS = _ua.indexOf('mac') > -1;\n\t\tvar windows = _ua.indexOf('win') > -1;\n\t\tvar android = _ua.indexOf('android') > -1;\n\t\tvar windowsPhone = _ua.indexOf('windows phone') > -1;\n\n\t\tif (iOS) {\n\t\t\tOS.iOS = iOS;\n\t\t} else if (macOS) {\n\t\t\tOS.macOS = macOS;\n\t\t} else if (windows) {\n\t\t\tOS.windows = windows;\n\t\t} else if (android) {\n\t\t\tOS.android = android;\n\t\t} else if (windowsPhone) {\n\t\t\tOS.windowsPhone = windowsPhone;\n\t\t}\n\t}\n\n\t/**\n\t * Detects whether the current device is mobile\n\t * @function detectMobileDevice\n\t */\n\tfunction detectMobileDevice() {\n\t\t_detect.isMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_ua);\n\t}\n\n\tthis.init = function() {\n\t\thtml5Support();\n\t\tdetectBrowser();\n\t\tdetectOS();\n\t\tdetectMobileDevice();\n\t};\n}\n\nexport default Detect;\n","/**\n * Moff Event module.\n * @module Event.\n */\nfunction Event() {\n\t/**\n\t * @private {{}} _eventStore - Events storage.\n\t * @private\n\t */\n\tvar _eventStore = {};\n\n\t/**\n\t * Registers new event.\n\t * @method add\n\t * @param {string} name - Event name\n\t */\n\tthis.add = function(name) {\n\t\tif (typeof _eventStore[name] === 'undefined') {\n\t\t\t_eventStore[name] = [];\n\t\t}\n\t};\n\n\t/**\n\t * Assign callback for event.\n\t * @method on\n\t * @param {string} name - Event name\n\t * @param {function} callback - Event callback\n\t */\n\tthis.on = function(name, callback) {\n\t\t// Create event if it does not exist.\n\t\tthis.add(name);\n\n\t\tif (typeof callback === 'function') {\n\t\t\t_eventStore[name].push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Trigger event by name.\n\t * @method trigger\n\t * @param {string} name - Event name\n\t */\n\tthis.trigger = function(name) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof _eventStore[name] !== 'undefined') {\n\t\t\tthis.runCallbacks(_eventStore[name], this, args);\n\t\t}\n\t};\n\n\t/**\n\t * Get event from store.\n\t * @param {string} name - Event name\n\t * @returns {Array|undefined}\n\t */\n\tthis.get = function(name) {\n\t\treturn _eventStore[name];\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_eventStore: _eventStore\n\t};\n\t/* End-test-code */\n}\n\nexport default Event;\n"],"sourceRoot":"/source/"}