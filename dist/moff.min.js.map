{"version":3,"sources":["moff.min.js","packages/core.js","packages/module.js","packages/detect.js"],"names":["$$core$$MoffClass","handleEvents","collectVisibleElements","$","_win","on","_postfix","windowLoadHandler","windowScrollHandler","_matchMediaSupport","_matchMedia","_mqLarge","addListener","resizeHandler","_mqMedium","_mqSmall","_moff","hashchange","includeByHash","handlePopstate","handleLoadEvents","element","each","this","_visibleElements","push","removeAttr","css","handler","appear","_windowIsLoaded","includeRegister","_deferredObjects","i","obj","include","id","callback","length","localVisible","slice","inViewport","splice","mql","matches","viewModeIsChanged","setViewMode","runCallbacks","_changeViewCallbacks","getMode","event","_dataEvent","handled","data","toLowerCase","checkDataScreen","handleLink","screen","inArray","split","extendSettings","settings","extend","_settings","setBreakpoints","breakpoints","replace","sm","md","lg","_lastViewMode","hash","getHash","_registeredFiles","hasOwnProperty","includeByScreenSize","screenMode","loadOnScreen","load","url","ajax","type","success","title","attr","target","handleUrlTemplate","_beforeLoad","history","undefined","Date","pushState","elemId","_historyData","loadContent","_afterLoad","arguments","removeHash","html","_doc","reusableEvents","top","document","getElementById","add","scrollTop","offset","state","originalEvent","index","indexOf","substr","hashPoint","location","bootstrapPatches","msViewportStyle","isAndroid","ua","navigator","userAgent","windows8","match","windowsMobile","append","removeClass","window","matchMedia","mode","init","duration","supportCSS3","-webkit-transition","-moz-transition","-o-transition","transition","opacity","animate","bounds","win","viewport","left","scrollLeft","right","width","bottom","height","outerWidth","outerHeight","property","ucProp","charAt","toUpperCase","props","join","createElement","style","collection","context","args","isArray","apply","onViewChange","beforeLoad","afterLoad","viewMode","register","loaded","depend","js","files","beforeInclude","afterInclude","onWindowLoad","loadFiles","loadDepends","execCallback","isFunction","depends","runCallback","isCSS","isJS","loadJS","loadCSS","includeScript","src","hasCallback","script","appendTo","console","warn","includeStyle","href","link","onreadystatechange","readyState","name","Constructor","prototype","constructor","extendClass","child","Parent","F","parentClass","parent","key","value","version","$$module$$Module","registerModuleEvents","events","_module","registerEvent","_moduleObjectStorage","_moduleClassStorage","_eventStore","scopeSelector","scope","initClass","ClassName","params","initialize","classObject","moduleObject","storedObject","beforeInit","moduleName","setScope","afterInit","error","assignForEvent","triggerEvent","Array","call","get","remove","removeObject","object","find","selector","$$detect$$Detect","html5Support","_detect","touch","DocumentTouch","applicationCache","canvas","getContext","canvasText","fillText","dragAndDrop","div","hashChange","documentMode","postMessage","webSockets","webWorkers","Worker","audio","bool","canPlayType","ogg","mp3","wav","m4a","video","h264","webm","indexedDB","item","bind","localStorage","setItem","removeItem","sessionStorage","detectBrowser","exec","_ua","browser","chrome","webkit","detectOS","OS","iOS","test","macOS","windows","android","windowsPhone","detectMobileDevice","isMobile","$$core$$default","$$module$$default","$$detect$$default","packages$loader$$Moff","Moff"],"mappings":"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","file":"moff.min.js","sourcesContent":[null,"/**\n * Moff class\n * @constructor\n */\nfunction MoffClass() {\n\t/**\n\t * @property {MoffClass} _moff - Link to MoffClass object\n\t * @private\n\t */\n\tvar _moff = this;\n\n\t/**\n\t * @property {window} _win - Link to window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {HTMLDocument} _doc - Local link to document object.\n\t * @private\n\t */\n\tvar _doc = _win.document;\n\n\t/**\n\t * @property {{}} _registeredFiles - Object to register files to be loaded.\n\t * @private\n\t */\n\tvar _registeredFiles = {};\n\n\t/**\n\t * @property {Array} _deferredObjects - Deferred files.\n\t * @private\n\t */\n\tvar _deferredObjects = [];\n\n\t/**\n\t * @property {Array} _visibleElements - Elements to be visible.\n\t * @private\n\t */\n\tvar _visibleElements = [];\n\n\t/**\n\t * @property {boolean} _matchMediaSupport - Match media support and link.\n\t * @private\n\t */\n\tvar _matchMediaSupport = !!(_win.matchMedia && _win.matchMedia('screen').addListener);\n\n\t/**\n\t * @property {boolean|Window.matchMedia|*} _matchMedia - Short link to matchMedia.\n\t * @private\n\t */\n\tvar _matchMedia = _matchMediaSupport && _win.matchMedia;\n\n\t/**\n\t * @property {string} _mqSmall - Media query breakpoint conditions.\n\t * @private\n\t */\n\tvar _mqSmall = '(min-width: %dpx)';\n\n\t/**\n\t * @type {string} _mqMedium - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqMedium = _mqSmall;\n\n\t/**\n\t * @type {string} _mqLarge - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqLarge = _mqSmall;\n\n\t/**\n\t * @property {string} _lastViewMode - List name of device screen mode\n\t * @private\n\t */\n\tvar _lastViewMode;\n\n\t/**\n\t * @property {Array} _changeViewCallbacks - Array of callbacks to trigger on view change.\n\t * @private\n\t */\n\tvar _changeViewCallbacks = [];\n\n\t/**\n\t * @property {boolean} _windowIsLoaded - Flag to determine whether the window is loaded.\n\t * @private\n\t */\n\tvar _windowIsLoaded = false;\n\n\t/**\n\t * @property {Array} _beforeLoad - Run these callbacks before content loading.\n\t * @private\n\t */\n\tvar _beforeLoad = [];\n\n\t/**\n\t * @property {Array} _afterLoad - Run these callbacks after content is loaded.\n\t * @private\n\t */\n\tvar _afterLoad = [];\n\n\t/**\n\t * Local default settings.\n\t * @type {{breakpoints: {sm: number, md: number, lg: number}}}\n\t * @private\n\t */\n\tvar _settings = {\n\t\t/** Media Query break points. */\n\t\tbreakpoints: {\n\t\t\tsm: 768,\n\t\t\tmd: 992,\n\t\t\tlg: 1200\n\t\t}\n\t};\n\n\t/**\n\t * @property {string} _postfix - Events postfix.\n\t * @private\n\t */\n\tvar _postfix = '.moff';\n\n\t/**\n\t * @property {string} _dataEvent - Data load event selector.\n\t * @private\n\t */\n\tvar _dataEvent = '[data-load-target]';\n\n\t/**\n\t * @property {{}} _historyData - History data store.\n\t * @private\n\t */\n\tvar _historyData = {};\n\n\t/**\n\t * Handle elements event.\n\t * @function handleEvents\n\t */\n\tfunction handleEvents() {\n\t\tcollectVisibleElements();\n\n\t\t$(_win)\n\t\t\t.on('load' + _postfix, windowLoadHandler)\n\t\t\t.on('scroll' + _postfix, windowScrollHandler);\n\n\t\t// Check for addListener method\n\t\t// because respond.js emulates matchMedia method\n\t\tif (_matchMediaSupport) {\n\t\t\t_matchMedia(_mqLarge).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqMedium).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqSmall).addListener(resizeHandler);\n\t\t} else {\n\t\t\t// If matchMedia is not supported use resize fallback\n\t\t\t$(_win).on('resize' + _postfix, resizeHandler);\n\t\t}\n\n\t\tif (_moff.hashchange) {\n\t\t\t$(_win).on('hashchange' + _postfix, includeByHash);\n\t\t}\n\n\t\t$(_win).on('popstate' + _postfix, handlePopstate);\n\t\thandleLoadEvents();\n\n\t\t// Call window scroll event handler to load visible elements\n\t\twindowScrollHandler();\n\t}\n\n\t/**\n\t * Gather animated elements to be handled.\n\t * @function collectVisibleElements\n\t */\n\tfunction collectVisibleElements() {\n\t\tvar element;\n\n\t\t$.each($('[data-visible-scroll]'), function() {\n\t\t\telement = $(this);\n\n\t\t\t_visibleElements.push({\n\t\t\t\t// Remove [data-visible-scroll] attribute not to be handled twice\n\t\t\t\telement: element.removeAttr('data-visible-scroll').css('opacity', 0),\n\t\t\t\thandler: function() {\n\t\t\t\t\t_moff.appear(element);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Window load event handler.\n\t * @function windowLoadHandler\n\t */\n\tfunction windowLoadHandler() {\n\t\t_windowIsLoaded = true;\n\n\t\t// Run includeRegister function to include files\n\t\t// registered as after window load and tagged in url hash tag or by screen size\n\t\tincludeRegister();\n\n\t\t// Load deferred files.\n\t\t// These files included with MoFF.include method before window load event.\n\t\t$.each(_deferredObjects, function(i, obj) {\n\t\t\t_moff.include(obj.id, obj.callback);\n\t\t});\n\t}\n\n\t/**\n\t * Window scroll event handler.\n\t * @function windowScrollHandler\n\t */\n\tfunction windowScrollHandler() {\n\t\tif (!_visibleElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar localVisible = _visibleElements.slice(0);\n\t\t$.each(localVisible, function(i, obj) {\n\t\t\tif (_moff.inViewport(obj.element)) {\n\t\t\t\t// Remove element from array not to be handled twice\n\t\t\t\t_visibleElements.splice(i, 1);\n\t\t\t\tobj.handler();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Window resize or matchMedia event listener handler.\n\t * @function resizeHandler\n\t * @param {object} mql - MediaQueryList object\n\t */\n\tfunction resizeHandler(mql) {\n\t\tif ((_matchMediaSupport && mql.matches) || _moff.viewModeIsChanged()) {\n\t\t\tsetViewMode();\n\t\t\t_moff.runCallbacks(_changeViewCallbacks, _moff, [_moff.getMode()]);\n\t\t\thandleLoadEvents();\n\t\t}\n\t}\n\n\t/**\n\t * Handle load events.\n\t * @function handleLoadEvents\n\t */\n\tfunction handleLoadEvents() {\n\t\tvar element, event;\n\n\t\t$.each($(_dataEvent), function() {\n\t\t\tif (this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telement = $(this);\n\t\t\tevent = (element.data('loadEvent') || 'click').toLowerCase();\n\n\t\t\tif (event === 'dom') {\n\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\thandleLink(this);\n\t\t\t\t} else {\n\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\telement.on('click' + _postfix, function() {\n\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (event === 'scroll') {\n\t\t\t\t_visibleElements.push({\n\t\t\t\t\telement: element,\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\t\t\thandleLink(element);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\t\t\telement.on('click' + _postfix, function() {\n\t\t\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\telement.on(event + _postfix, function() {\n\t\t\t\t\treturn handleLink(this);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.handled = true;\n\t\t});\n\t}\n\n\t/**\n\t * Check element for data load screen.\n\t * @function checkDataScreen\n\t * @param {object} element - jQuery object\n\t * @returns {boolean} Return true if no data load screen\n\t */\n\tfunction checkDataScreen(element) {\n\t\tvar screen = element.data('loadScreen');\n\t\treturn screen ? $.inArray(_moff.getMode(), screen.split(' ')) !== -1 : true;\n\t}\n\n\t/**\n\t * Extend MoffClass settings\n\t * @param {object} settings - MoffClass settings\n\t */\n\tfunction extendSettings(settings) {\n\t\t$.extend(_settings, settings);\n\t}\n\n\t/**\n\t * Setup breakpoints.\n\t * @function setBreakpoints\n\t */\n\tfunction setBreakpoints() {\n\t\tvar breakpoints;\n\n\t\tif (_settings.breakpoints && _matchMediaSupport) {\n\t\t\tbreakpoints = _settings.breakpoints;\n\t\t\t_mqSmall = _mqSmall.replace('%d', breakpoints.sm);\n\t\t\t_mqMedium = _mqMedium.replace('%d', breakpoints.md);\n\t\t\t_mqLarge = _mqLarge.replace('%d', breakpoints.lg);\n\t\t}\n\t}\n\n\t/**\n\t * Change last view mode.\n\t * @function setViewMode\n\t */\n\tfunction setViewMode() {\n\t\t_lastViewMode = _moff.getMode();\n\t}\n\n\t/**\n\t * Handler to load registered files by hash tag.\n\t * @function includeByHash\n\t */\n\tfunction includeByHash() {\n\t\tvar hash = getHash();\n\n\t\tif (_registeredFiles.hasOwnProperty(hash)) {\n\t\t\t_moff.include(hash);\n\t\t}\n\t}\n\n\t/**\n\t * Handler to load registered files by screen size.\n\t * @function includeByScreenSize\n\t */\n\tfunction includeByScreenSize() {\n\t\tvar screenMode = _moff.getMode();\n\n\t\t$.each(_registeredFiles, function(id, obj) {\n\t\t\tif ($.inArray(screenMode, obj.loadOnScreen) !== -1) {\n\t\t\t\t_moff.include(id);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Load data.\n\t * @param {string} url - Load url\n\t * @param {function} callback - Callback on success\n\t */\n\tfunction load(url, callback) {\n\t\t$.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'GET',\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\tcallback(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Links click event handler.\n\t * @function handleLink\n\t * @param {object} element - DOM element\n\t * @returns {boolean} false\n\t */\n\tfunction handleLink(element) {\n\t\telement = $(element);\n\n\t\tvar title = element.attr('title') || '';\n\t\tvar url = element.attr('href') || element.data('loadUrl');\n\t\tvar target = element.data('loadTarget');\n\t\tvar push = element.data('pushUrl');\n\n\t\tif (url) {\n\t\t\turl = handleUrlTemplate(element, url);\n\t\t\t// Remove data attributes not to handle twice\n\t\t\telement.removeAttr('data-load-event');\n\t\t\t_moff.runCallbacks(_beforeLoad, element);\n\n\t\t\tif (_moff.history && push !== undefined) {\n\t\t\t\tvar id = +new Date();\n\t\t\t\t_win.history.pushState({elemId: id, url: url}, title, url);\n\t\t\t\t_historyData[id] = element;\n\t\t\t}\n\n\t\t\tloadContent(element, url, target, function() {\n\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Handle url for templates.\n\t * @function handleUrlTemplate\n\t * @param {object} element - DOM element\n\t * @param {string} url - Handled url\n\t * @returns {string} handled url\n\t */\n\tfunction handleUrlTemplate(element, url) {\n\t\treturn url.replace(/\\{\\{(.*?)\\}\\}/g, function() {\n\t\t\treturn element[arguments[1]]();\n\t\t});\n\t}\n\n\t/**\n\t * Load content and append into target.\n\t * @function loadContent\n\t * @param {object} element - DOM element\n\t * @param {string} url - Content URL\n\t * @param {string} target - Target element selector\n\t * @param {function} callback\n\t */\n\tfunction loadContent(element, url, target, callback) {\n\t\tvar hash = getHash(url);\n\t\tvar title;\n\t\turl = removeHash(url);\n\n\t\tload(url, function(html) {\n\t\t\ttitle = element.data('pageTitle');\n\t\t\t$(target).html(html);\n\n\t\t\tif (title) {\n\t\t\t\t_doc.title = title;\n\t\t\t}\n\n\t\t\t// Handle events of new added elements\n\t\t\t_moff.reusableEvents();\n\t\t\tcallback();\n\n\t\t\tif (hash) {\n\t\t\t\t// Use document.getElementById to escape syntax error for jQuery selector\n\t\t\t\tvar top = $(document.getElementById(hash)).add('a[name=\"' + hash + '\"]');\n\t\t\t\tif (top.length) {\n\t\t\t\t\t$(_win).scrollTop(top.offset().top);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Window popstate event handler.\n\t * @function handlePopstate\n\t * @param {object} event - Event object\n\t */\n\tfunction handlePopstate(event) {\n\t\tvar state = event.originalEvent.state;\n\t\tvar element;\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\telement = _historyData[state.elemId];\n\t\tif (!checkDataScreen(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar url = state.url;\n\t\tvar target = element.data('loadTarget');\n\n\t\t_moff.runCallbacks(_beforeLoad, element);\n\t\tloadContent(element, url, target, function() {\n\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t});\n\t}\n\n\t/**\n\t * Remove hash tag from URL.\n\t * @function removeHash\n\t * @param {string} url\n\t * @returns {string} URL w/o hash tag\n\t */\n\tfunction removeHash(url) {\n\t\tvar index = url.indexOf('#');\n\t\treturn index === -1 ? url : url.substr(0, index);\n\t}\n\n\t/**\n\t * Get hash tag form URL.\n\t * @function getHash\n\t * @param {string} [url]\n\t * @returns {sting} Hash tag\n\t */\n\tfunction getHash(url) {\n\t\tif (url) {\n\t\t\tvar hashPoint = url.indexOf('#');\n\t\t\treturn hashPoint !== -1 ? url.substr(hashPoint + 1) : '';\n\t\t}\n\n\t\treturn _win.location.hash.substr(1);\n\t}\n\n\t/**\n\t * Check url hash tag to load registered files.\n\t * @function includeRegister\n\t */\n\tfunction includeRegister() {\n\t\tincludeByHash();\n\t\tincludeByScreenSize();\n\t}\n\n\t/**\n\t * Adds all Twitter Bootstrap patches.\n\t * @function bootstrapPatches\n\t */\n\tfunction bootstrapPatches() {\n\t\tvar ua = navigator.userAgent;\n\t\tvar windows8 = ua.match(/MSIE 10\\.0; Windows NT 6\\.2/);\n\t\tvar windowsMobile = ua.match(/IEMobile\\/10\\.0/);\n\t\tvar msViewportStyle, isAndroid;\n\n\t\tif (windows8 || windowsMobile) {\n\t\t\tmsViewportStyle = '<style>@-webkit-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@-moz-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@-ms-viewport { width: ' + (windowsMobile ? 'auto' : 'device-width') + '; }';\n\t\t\tmsViewportStyle += '@-o-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@viewport { width: device-width; }<\\/style>';\n\t\t\t$('head').append($(msViewportStyle));\n\t\t}\n\n\t\tisAndroid = (ua.indexOf('Mozilla/5.0') > -1 && ua.indexOf('Android ') > -1 && ua.indexOf('AppleWebKit') > -1 && ua.indexOf('Chrome') === -1);\n\t\tif (isAndroid) {\n\t\t\t$('select.form-control').removeClass('form-control').css('width', '100%');\n\t\t}\n\t}\n\n\t/**\n\t * @property {string} mode - Framework mode.\n\t */\n\tthis.mode = 'moff';\n\n\t/**\n\t * Run initialisation of base handlers\n\t * @method init\n\t * @param {object} [settings] - MoffClass settings\n\t */\n\tthis.init = function(settings) {\n\t\t// Normalize settings\n\t\tif (!settings) {\n\t\t\tsettings = {};\n\t\t}\n\n\t\t$(function() {\n\t\t\textendSettings(settings);\n\t\t\tsetBreakpoints();\n\t\t\tsetViewMode();\n\t\t\thandleEvents();\n\t\t\tincludeRegister();\n\t\t\tbootstrapPatches();\n\t\t});\n\t};\n\n\t/**\n\t * Show element with transition effect.\n\t * @method appear\n\t * @param {object} element - DOM element\n\t */\n\tthis.appear = function(element, duration) {\n\t\t// Normalize duration\n\t\tduration = duration || 1;\n\n\t\t// Convert to milliseconds\n\t\tduration = duration * 1000;\n\n\t\tif (_moff.supportCSS3('transition')) {\n\t\t\telement.css({\n\t\t\t\t'-webkit-transition': 'opacity' + duration + 'ms',\n\t\t\t\t'-moz-transition': 'opacity' + duration + 'ms',\n\t\t\t\t'-o-transition': 'opacity' + duration + 'ms',\n\t\t\t\ttransition: 'opacity' + duration + 'ms',\n\t\t\t\topacity: 1\n\t\t\t});\n\t\t} else {\n\t\t\t// Fallback if browser does not support CSS3 transition\n\t\t\telement.animate({opacity: 1}, duration);\n\t\t}\n\t};\n\n\t/**\n\t * Execute all reusable events.\n\t * @method reusableEvents\n\t */\n\tthis.reusableEvents = function() {\n\t\tcollectVisibleElements();\n\t\thandleLoadEvents();\n\t\twindowScrollHandler();\n\t};\n\n\t/**\n\t * Determine whether element in view port.\n\t * @method inViewport\n\t * @param {object} element - DOM element\n\t * @returns {boolean}\n\t */\n\tthis.inViewport = function(element) {\n\t\tvar bounds;\n\t\tvar win = $(_win);\n\t\tvar viewport = {\n\t\t\ttop: win.scrollTop(),\n\t\t\tleft: win.scrollLeft()\n\t\t};\n\n\t\telement = $(element);\n\t\tviewport.right = viewport.left + win.width();\n\t\tviewport.bottom = viewport.top + win.height();\n\n\t\tbounds = element.offset();\n\t\tbounds.right = bounds.left + element.outerWidth();\n\t\tbounds.bottom = bounds.top + element.outerHeight();\n\n\t\treturn !(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom);\n\t};\n\n\t/**\n\t * Check for CSS3 property support.\n\t * @method supportCSS3\n\t * @param {string} property - CSS3 property\n\t * @returns {boolean}\n\t */\n\tthis.supportCSS3 = function(property) {\n\t\tvar ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tvar props = (property + ' ' + 'Webkit Moz O ms'.split(' ').join(ucProp + ' ') + ucProp).split(' ');\n\t\tvar length = props.length;\n\t\tvar i = 0;\n\n\t\tfor (; i < length; i++) {\n\t\t\tproperty = props[i];\n\t\t\tif (property.indexOf('-') === -1 && document.createElement(this.mode).style[property] !== undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Run callbacks in passed collections.\n\t * @method runCallbacks\n\t * @param {object} collection - Callbacks collection\n\t * @param {object} context - Callback context\n\t */\n\tthis.runCallbacks = function(collection, context, args) {\n\t\t// Normalize collection\n\t\tif (!$.isArray(collection)) {\n\t\t\tcollection = [];\n\t\t}\n\n\t\t// Normalize arguments\n\t\tif (typeof args === 'undefined') {\n\t\t\targs = [];\n\t\t}\n\n\t\t$.each(collection, function(i, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback.apply(context, args);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Add callbacks to view change event.\n\t * @method onViewChange\n\t * @param {function} callback - Callback assigned on view change\n\t */\n\tthis.onViewChange = function(callback) {\n\t\tif (typeof callback === 'function') {\n\t\t\t_changeViewCallbacks.push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Add callback before loading content.\n\t * @method beforeLoad\n\t * @param {function} callback\n\t */\n\tthis.beforeLoad = function(callback) {\n\t\t_beforeLoad.push(callback);\n\t};\n\n\t/**\n\t * Add callback after loading content.\n\t * @method afterLoad\n\t * @param {function} callback\n\t */\n\tthis.afterLoad = function(callback) {\n\t\t_afterLoad.push(callback);\n\t};\n\n\t/**\n\t * Get device view mode\n\t * @method getMode\n\t * @returns {string} view mode\n\t */\n\tthis.getMode = function() {\n\t\tvar viewMode = 'xs';\n\n\t\tif (_matchMediaSupport) {\n\t\t\tif (_matchMedia(_mqLarge).matches) {\n\t\t\t\tviewMode = 'lg';\n\t\t\t} else if (_matchMedia(_mqMedium).matches) {\n\t\t\t\tviewMode = 'md';\n\t\t\t} else if (_matchMedia(_mqSmall).matches) {\n\t\t\t\tviewMode = 'sm';\n\t\t\t}\n\t\t}\n\n\t\treturn viewMode;\n\t};\n\n\t/**\n\t * Register files to be loaded files.\n\t * @method register\n\t * @param {object} obj - Registered object\n\t */\n\tthis.register = function(obj) {\n\t\t// Normalize obj properties\n\t\t_registeredFiles[obj.id] = {\n\t\t\tloaded: false,\n\t\t\tdepend: {\n\t\t\t\tjs: obj.depend && obj.depend.js || [],\n\t\t\t\tcss: obj.depend && obj.depend.css || []\n\t\t\t},\n\t\t\tfiles: {\n\t\t\t\tjs: obj.files && obj.files.js || [],\n\t\t\t\tcss: obj.files && obj.files.css || []\n\t\t\t},\n\t\t\tloadOnScreen: obj.loadOnScreen || [],\n\t\t\tbeforeInclude: obj.beforeInclude || undefined,\n\t\t\tafterInclude: obj.afterInclude || undefined,\n\t\t\tonWindowLoad: obj.onWindowLoad || false\n\t\t};\n\t};\n\n\t/**\n\t * Load registered files by identifier.\n\t * @method include\n\t * @param {string} id - Included object id\n\t * @param {function} [callback] - Function callback\n\t */\n\tthis.include = function(id, callback) {\n\t\tvar register = _registeredFiles[id];\n\n\t\t// Make sure files are not loaded\n\t\tif (register.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure to load after window load if onWindowLoad is set\n\t\tif (register.onWindowLoad && !_windowIsLoaded) {\n\t\t\t// Save id to load after window load\n\t\t\t_deferredObjects.push({id: id, callback: callback});\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as loaded\n\t\tregister.loaded = true;\n\n\t\tif ($.isFunction(register.beforeInclude)) {\n\t\t\tregister.beforeInclude();\n\t\t}\n\n\t\tfunction loadFiles() {\n\t\t\t_moff.loadDepends(register.files, execCallback);\n\t\t}\n\n\t\tthis.loadDepends(register.depend, loadFiles);\n\n\t\tfunction execCallback() {\n\t\t\tif ($.isFunction(register.afterInclude)) {\n\t\t\t\tregister.afterInclude();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load files and run callback.\n\t * @method loadDepends\n\t * @param {object} depends - Object with js and css files to be loaded\n\t * @param {function} callback - Function executed after files be loaded\n\t */\n\tthis.loadDepends = function(depends, callback) {\n\t\tvar loaded = 0;\n\t\tvar length = 0;\n\t\tvar isCSS = $.isArray(depends.css);\n\t\tvar isJS = $.isArray(depends.js);\n\n\t\tif (isJS) {\n\t\t\tlength += depends.js.length;\n\t\t}\n\n\t\tif (isCSS) {\n\t\t\tlength += depends.css.length;\n\t\t}\n\n\t\tfunction runCallback() {\n\t\t\tloaded++;\n\t\t\tif (loaded === length) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (isJS && depends.js.length) {\n\t\t\t// Load depend js files\n\t\t\tthis.loadJS(depends.js, runCallback);\n\t\t}\n\n\t\tif (isCSS && depends.css.length) {\n\t\t\t// Load depend css files\n\t\t\tthis.loadCSS(depends.css, runCallback);\n\t\t}\n\n\t\tif (!length) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load js file and run callback on load.\n\t * @method loadJS\n\t * @param {array|string} files - Array or path of loaded files\n\t * @param {function} [callback] - On load event callback\n\t */\n\tthis.loadJS = function(files, callback) {\n\t\tif (!$.isArray(files) && typeof files !== 'string') {\n\t\t\twindow.console.warn('Moff.loadJS source is not an array or a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar script;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\tfunction includeScript(src) {\n\t\t\t// Load script if it is not existing on the page\n\t\t\tif (!$('script[src=\"' + src + '\"]').length) {\n\t\t\t\t// If set src attribute before append\n\t\t\t\t// jQuery will load script with ajax request\n\t\t\t\tscript = $('<script>');\n\n\t\t\t\tif (hasCallback) {\n\t\t\t\t\tscript.on('load', callback);\n\t\t\t\t}\n\n\t\t\t\tscript\n\t\t\t\t\t.appendTo($('body').length && $('body') || $('head'))\n\t\t\t\t\t.attr('src', src);\n\t\t\t} else if (hasCallback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif ($.isArray(files)) {\n\t\t\t$.each(files, function(index, src) {\n\t\t\t\tincludeScript(src);\n\t\t\t});\n\t\t} else {\n\t\t\tincludeScript(files);\n\t\t}\n\t};\n\n\t/**\n\t * Load css file and run callback on load.\n\t * @method loadCSS\n\t * @param {array|string} files - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadCSS = function(files, callback) {\n\t\tif (!$.isArray(files) && typeof files !== 'string') {\n\t\t\twindow.console.warn('Moff.loadCSS source is not array or string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar link;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\tfunction includeStyle(href) {\n\t\t\t// Load link if it is not existing on the page\n\t\t\tif (!$('link[href=\"' + href + '\"]').length) {\n\t\t\t\tlink = $('<link rel=\"stylesheet\">');\n\n\t\t\t\tif (hasCallback) {\n\t\t\t\t\tlink.on('load', callback);\n\t\t\t\t}\n\n\t\t\t\tlink\n\t\t\t\t\t.attr('href', files)\n\t\t\t\t\t.appendTo('head');\n\n\t\t\t\tlink = link[0];\n\t\t\t\tlink.onreadystatechange = function() {\n\t\t\t\t\tvar state = link.readyState;\n\t\t\t\t\tif (state === 'loaded' || state === 'complete') {\n\t\t\t\t\t\tlink.onreadystatechange = null;\n\n\t\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (hasCallback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif ($.isArray(files)) {\n\t\t\t$.each(files, function(index, href) {\n\t\t\t\tincludeStyle(href);\n\t\t\t});\n\t\t} else {\n\t\t\tincludeStyle(files);\n\t\t}\n\t};\n\n\t/**\n\t * Extend Moff object.\n\t * @method extend\n\t * @param {string} name - Module name\n\t * @param {function} Constructor - Module constructor\n\t * @param {boolean} extend [optionally] - Extend from Moff prototype\n\t */\n\tthis.extend = function(name, Constructor, extend) {\n\t\t// Make sure not to override existing properties/methods\n\t\tif (!this.hasOwnProperty(name)) {\n\t\t\tif (extend) {\n\t\t\t\tConstructor.prototype = this;\n\t\t\t\tConstructor.prototype.constructor = Constructor;\n\t\t\t}\n\n\t\t\tthis[name] = new Constructor();\n\n\t\t\tif (typeof this[name].init === 'function') {\n\t\t\t\tthis[name].init();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Extend classes.\n\t * @method extendClass\n\t * @param {function} child - Child constructor\n\t * @param {function} Parent - Parent constructor\n\t */\n\tthis.extendClass = function(child, Parent) {\n\t\tfunction F() {}\n\n\t\tF.prototype = new Parent();\n\t\tchild.prototype = new F();\n\t\tchild.prototype.constructor = child;\n\t\tchild.parentClass = parent.prototype;\n\t};\n\n\t/**\n\t * Determine whether view mode is changed\n\t * @method viewModeIsChanged\n\t * @returns {boolean}\n\t */\n\tthis.viewModeIsChanged = function() {\n\t\treturn _lastViewMode !== this.getMode();\n\t};\n\n\t/**\n\t * Set or get Moff settings value.\n\t * @method settings\n\t * @param {string} key - Setting name\n\t * @param {*} value - Setting value\n\t * @returns {*}\n\t */\n\tthis.settings = function(key, value) {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn _settings[key];\n\t\t} else {\n\t\t\t_settings[key] = value;\n\t\t}\n\t};\n\n\t/**\n\t * Moff version.\n\t * @type {string}\n\t */\n\tthis.version = '{{version}}';\n\n\t/* test-code */\n\tthis._testonly = {\n\t\t_visibleElements: function() {\n\t\t\treturn _visibleElements;\n\t\t},\n\n\t\t_deferredObjects: function() {\n\t\t\treturn _deferredObjects;\n\t\t},\n\n\t\t_registeredFiles: function() {\n\t\t\treturn _registeredFiles;\n\t\t}\n\t};\n\t/* end-test-code */\n}\n\nexport default MoffClass;\n","/**\n * Register and control new Moff modules.\n * @module Module.\n */\nfunction Module() {\n\t'use strict';\n\n\t/**\n\t * @private {Module} _module - Link to object.\n\t * @private\n\t */\n\tvar _module = this;\n\n\t/**\n\t * @private {{}} _moduleObjectStorage - Modules storage.\n\t * @private\n\t */\n\tvar _moduleObjectStorage = {};\n\n\t/**\n\t * @private {{}} _moduleClassStorage - Classes storage.\n\t * @private\n\t */\n\tvar _moduleClassStorage = {};\n\n\t/**\n\t * @private {{}} _eventStore - Events storage.\n\t * @private\n\t */\n\tvar _eventStore = {};\n\n\t/**\n\t * Register module events\n\t * @param {array} events - Array of events\n\t */\n\tfunction registerModuleEvents(events) {\n\t\tif ($.isArray(events)) {\n\t\t\t$.each(events, function() {\n\t\t\t\t_module.registerEvent(this);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @property {null|string} - Module scope selector. jQuery selector.\n\t */\n\tthis.scopeSelector = null;\n\n\t/**\n\t * @property {null|object} - Module scope object. jQuery object.\n\t */\n\tthis.scope = null;\n\n\t/**\n\t * Register new module.\n\t * @method register\n\t * @param {string} name - module name\n\t * @param {object} depends - object of js and css files\n\t * @param {function} Constructor - constructor\n\t */\n\tthis.register = function(name, depends, Constructor) {\n\t\t// Normalize arguments\n\t\tif (typeof Constructor === 'undefined') {\n\t\t\tConstructor = depends;\n\t\t\tdepends = undefined;\n\t\t}\n\n\t\t// Register new module in the storage\n\t\tif (!_moduleClassStorage.hasOwnProperty(name)) {\n\t\t\tConstructor.prototype = _module;\n\t\t\tConstructor.prototype.constructor = Constructor;\n\n\t\t\t// Save module in storage\n\t\t\tif (typeof _moduleClassStorage[name] === 'undefined') {\n\t\t\t\t_moduleClassStorage[name] = {\n\t\t\t\t\tconstructor: Constructor,\n\t\t\t\t\tdepends: depends\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\twindow.console.warn(name + ' class has already registered.');\n\t\t}\n\t};\n\n\t/**\n\t * Initialize registered class\n\t * @method initClass\n\t * @param {string} ClassName - Name of registered class\n\t * @param {object} [params] - Object with additional params\n\t */\n\tthis.initClass = function(ClassName, params) {\n\t\tvar moduleObject = _moduleClassStorage[ClassName];\n\n\t\tfunction initialize() {\n\t\t\t// Create new class object\n\t\t\tvar classObject = new moduleObject.constructor();\n\t\t\tvar storedObject = _moduleObjectStorage[ClassName];\n\n\t\t\t// Store objects in array if there are more then one classes\n\t\t\tif ($.isArray(storedObject)) {\n\t\t\t\tstoredObject.push(classObject);\n\t\t\t} else if (typeof storedObject !== 'undefined') {\n\t\t\t\t_moduleObjectStorage[ClassName] = [storedObject, classObject];\n\t\t\t} else {\n\t\t\t\t_moduleObjectStorage[ClassName] = classObject;\n\t\t\t}\n\n\t\t\tif (typeof classObject.beforeInit === 'function') {\n\t\t\t\tclassObject.beforeInit();\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\t// Apply all passed data\n\t\t\t\t$.each(params, function(key, value) {\n\t\t\t\t\tclassObject[key] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add module name\n\t\t\tclassObject.moduleName = ClassName;\n\n\t\t\t// Register module events.\n\t\t\tregisterModuleEvents(classObject.events);\n\n\t\t\t// Set module scope\n\t\t\tclassObject.setScope();\n\n\t\t\tif (typeof classObject.init === 'function') {\n\t\t\t\tclassObject.init();\n\t\t\t}\n\n\t\t\tif (typeof classObject.afterInit === 'function') {\n\t\t\t\tclassObject.afterInit();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tif (moduleObject.depends) {\n\t\t\t\tthis.loadDepends(moduleObject.depends, initialize);\n\t\t\t} else {\n\t\t\t\tinitialize();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\twindow.console.error(error);\n\t\t}\n\t};\n\n\t/**\n\t * Register new event.\n\t * @method registerEvent\n\t * @param {string} name - Event name\n\t */\n\tthis.registerEvent = function(name) {\n\t\tif (typeof _eventStore[name] === 'undefined') {\n\t\t\t_eventStore[name] = [];\n\t\t}\n\t};\n\n\t/**\n\t * Assign callback for event.\n\t * @method assignForEvent\n\t * @param {string} name - Event name\n\t * @param {function} callback - Event callback\n\t */\n\tthis.assignForEvent = function(name, callback) {\n\t\tif (!_eventStore.hasOwnProperty(name)) {\n\t\t\twindow.console.warn(name + ' event is not registered yet.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof callback === 'function') {\n\t\t\t_eventStore[name].push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Trigger event by name.\n\t * @method triggerEvent\n\t * @param {string} name - Event name\n\t */\n\tthis.triggerEvent = function(name) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof _eventStore[name] !== 'undefined') {\n\t\t\t_module.runCallbacks(_eventStore[name], this, args);\n\t\t}\n\t};\n\n\t/**\n\t * Get registered module by name.\n\t * @method get\n\t * @param {string} name - module name\n\t * @return {object|array|undefined} module object or undefined\n\t */\n\tthis.get = function(name) {\n\t\treturn (_moduleObjectStorage.hasOwnProperty(name) && _moduleObjectStorage[name]) || undefined;\n\t};\n\n\t/**\n\t * Remove registered module by name.\n\t * @method remove\n\t */\n\tthis.remove = function() {\n\t\tvar name = this.moduleName;\n\t\tvar id = this.id;\n\t\tvar i = 0;\n\t\tvar object, length;\n\n\t\tfunction removeObject() {\n\t\t\t_moduleObjectStorage[name].splice(i, 1);\n\t\t\tlength = _moduleObjectStorage[name].length;\n\t\t\t--i;\n\t\t}\n\n\t\t// Be sure to remove existing module\n\t\tif ($.isArray(_moduleObjectStorage[name])) {\n\t\t\tlength = _moduleObjectStorage[name].length;\n\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tobject = _moduleObjectStorage[name][i];\n\n\t\t\t\tif (object.id) {\n\t\t\t\t\tif (object.id === id) {\n\t\t\t\t\t\tremoveObject();\n\t\t\t\t\t}\n\t\t\t\t} else if (object.moduleName === name) {\n\t\t\t\t\tremoveObject();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_moduleObjectStorage[name].length === 1) {\n\t\t\t\t_moduleObjectStorage[name] = _moduleObjectStorage[name][0];\n\t\t\t} else if (!_moduleObjectStorage[name].length) {\n\t\t\t\tdelete _moduleObjectStorage[name];\n\t\t\t}\n\t\t} else {\n\t\t\tdelete _moduleObjectStorage[name];\n\t\t}\n\t};\n\n\t/**\n\t * Register module scope by scope selector.\n\t * @method setScope\n\t */\n\tthis.setScope = function() {\n\t\tif (this.scopeSelector) {\n\t\t\tthis.scope = $(this.scopeSelector);\n\t\t}\n\t};\n\n\t/**\n\t * Find element in module scope.\n\t * @method find\n\t * @param {string} selector - jQuery selector.\n\t * @returns {object} jQuery object.\n\t */\n\tthis.find = function(selector) {\n\t\treturn this.scope.find(selector);\n\t};\n\n\t/* test-code */\n\tthis._testonly = {\n\t\t_moduleClassStorage: _moduleClassStorage,\n\t\t_eventStore: _eventStore,\n\t\t_moduleObjectStorage: _moduleObjectStorage\n\t};\n\t/* end-test-code */\n}\n\nexport default Module;\n","/**\n * Detects OS, browser and another features support.\n * @module Detect\n */\nfunction Detect() {\n\t/**\n\t * @property {Window} _win - Link to Window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {Detect} _detect - Link to this object.\n\t * @private\n\t */\n\tvar _detect = this;\n\n\t/**\n\t * @property {string} _ua - Link to user agent.\n\t * @private\n\t */\n\tvar _ua = window.navigator.userAgent.toLowerCase();\n\n\t/**\n\t * @property {HTMLDocument} _doc - Link to document object.\n\t * @private\n\t */\n\tvar _doc = document;\n\n\t/**\n\t * @property {{}} browser - Object with browser details.\n\t */\n\tthis.browser = {};\n\n\t/**\n\t * @property {{}} OS - Object with OS details.\n\t */\n\tthis.OS = {};\n\n\t/**\n\t * HTML5 support list.\n\t * @function html5Support\n\t */\n\tfunction html5Support() {\n\t\t// Determine whether browser support touch JavaScript API\n\t\t// It does not mean touch device\n\t\t_detect.touch = !!(('ontouchstart' in _win) || _win.DocumentTouch && _doc instanceof _win.DocumentTouch);\n\t\t_detect.applicationCache = !!_win.applicationCache;\n\t\t_detect.canvas = (function() {\n\t\t\tvar canvas = _doc.createElement('canvas');\n\t\t\treturn !!(canvas.getContext && canvas.getContext('2d'));\n\t\t})();\n\n\t\t_detect.canvasText = !!(_detect.canvas && $.isFunction(_doc.createElement('canvas').getContext('2d').fillText));\n\t\t_detect.dragAndDrop = (function() {\n\t\t\tvar div = _doc.createElement('div');\n\t\t\treturn ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n\t\t})();\n\n\t\t_detect.hashChange = !!('onhashchange' in _win && (typeof _doc.documentMode === 'undefined' || _doc.documentMode > 7));\n\t\t_detect.history = !!(_win.history && history.pushState);\n\t\t_detect.postMessage = !!_win.postMessage;\n\t\t_detect.webSockets = !!('WebSocket' in _win || 'MozWebSocket' in _win);\n\t\t_detect.webWorkers = !!_win.Worker;\n\t\t_detect.audio = (function() {\n\t\t\tvar audio = _doc.createElement('audio');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!audio.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '');\n\t\t\t\t\tbool.mp3 = audio.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\t\t\t\t\tbool.wav = audio.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '');\n\t\t\t\t\tbool.m4a = (audio.canPlayType('audio/x-m4a;') || audio.canPlayType('audio/aac;')).replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.video = (function() {\n\t\t\tvar video = _doc.createElement('video');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!video.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = video.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\t\t\t\t\tbool.h264 = video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\t\t\t\t\tbool.webm = video.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.indexedDB = (function() {\n\t\t\tvar props = ['indexedDB', 'webkitIndexedDB', 'mozIndexedDB', 'OIndexedDB', 'msIndexedDB'];\n\n\t\t\tfor (var i in props) {\n\t\t\t\tif (props.hasOwnProperty(i)) {\n\t\t\t\t\tvar item = _win[props[i]];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\tif (item === false) {\n\t\t\t\t\t\t\treturn props[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof item === 'function') {\n\t\t\t\t\t\t\treturn item.bind(_win);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t})();\n\n\t\t_detect.localStorage = (function() {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tlocalStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\n\t\t_detect.sessionStorage = (function() {\n\t\t\ttry {\n\t\t\t\tsessionStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tsessionStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t}\n\n\t/**\n\t * Detect browser\n\t * @function detectBrowser\n\t */\n\tfunction detectBrowser() {\n\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(msie) ([\\w.]+)/.exec(_ua) ||\n\t\t\t_ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(_ua) || [];\n\n\t\tif (match[1]) {\n\t\t\t_detect.browser[match[1]] = true;\n\t\t}\n\n\t\tif (match[2]) {\n\t\t\t_detect.browser.version = match[2];\n\t\t}\n\n\t\tif (_detect.browser.chrome) {\n\t\t\t_detect.browser.webkit = true;\n\t\t}\n\t}\n\n\t/**\n\t * Detect Operating System\n\t * @function detectOS\n\t */\n\tfunction detectOS() {\n\t\tvar OS = _detect.OS;\n\t\tvar iOS = /(ipad|iphone|ipod)/g.test(_ua);\n\t\tvar macOS = _ua.indexOf('mac') > -1;\n\t\tvar windows = _ua.indexOf('win') > -1;\n\t\tvar android = _ua.indexOf('android') > -1;\n\t\tvar windowsPhone = _ua.indexOf('windows phone') > -1;\n\n\t\tif (iOS) {\n\t\t\tOS.iOS = iOS;\n\t\t} else if (macOS) {\n\t\t\tOS.macOS = macOS;\n\t\t} else if (windows) {\n\t\t\tOS.windows = windows;\n\t\t} else if (android) {\n\t\t\tOS.android = android;\n\t\t} else if (windowsPhone) {\n\t\t\tOS.windowsPhone = windowsPhone;\n\t\t}\n\t}\n\n\t/**\n\t * Detects whether the current device is mobile\n\t * @function detectMobileDevice\n\t */\n\tfunction detectMobileDevice() {\n\t\t_detect.isMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_ua);\n\t}\n\n\tthis.init = function() {\n\t\thtml5Support();\n\t\tdetectBrowser();\n\t\tdetectOS();\n\t\tdetectMobileDevice();\n\t};\n}\n\nexport default Detect;\n"],"sourceRoot":"/source/"}