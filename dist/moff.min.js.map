{"version":3,"sources":["moff.min.js","packages/core.e6.js","packages/module.e6.js","packages/detect.e6.js","packages/event.e6.js"],"names":["$$core$e6$$Core","handleEvents","_win","addEventListener","windowLoadHandler","_matchMediaSupport","_matchMedia","_mqLarge","addListener","resizeHandler","_mqMedium","_mqSmall","_moff","hashchange","includeByHash","handlePopstate","handleDataEvents","_windowIsLoaded","includeRegister","each","_deferredObjects","i","obj","include","id","callback","mql","matches","viewModeIsChanged","setViewMode","runCallbacks","_changeViewCallbacks","getMode","checkDataScreen","element","screen","getAttribute","split","indexOf","extendSettings","settings","property","hasOwnProperty","_settings","setBreakpoints","breakpoints","replace","sm","md","lg","_lastViewMode","hash","getHash","_registeredFiles","load","url","ajax","type","success","data","handleLink","title","href","target","push","handleUrlTemplate","removeAttribute","_beforeLoad","history","undefined","Date","now","pushState","elemId","_historyData","loadContent","_afterLoad","arguments","applyContent","html","_doc","querySelector","innerHTML","removeHash","_cache","event","state","index","substr","hashPoint","location","nodeList","node","Object","prototype","toString","call","test","length","nodeType","this","window","document","matchMedia","loadOnHover","cacheLiveTime","_dataEvent","querySelectorAll","handled","toLowerCase","detect","isMobile","setTimeout","preventDefault","init","supportCSS3","ucProp","charAt","toUpperCase","slice","props","join","createElement","style","options","params","key","value","encodeURIComponent","xhr","XMLHttpRequest","open","setRequestHeader","contentType","onload","status","response","error","send","collection","context","args","Array","isArray","apply","onViewChange","beforeLoad","afterLoad","viewMode","register","loaded","depend","js","css","file","loadOnScreen","beforeInclude","afterInclude","onWindowLoad","loadFiles","loadAssets","execCallback","screenMode","runCallback","isCSS","isJS","src","loadJS","loadCSS","console","warn","script","hasCallback","appendChild","link","setAttribute","onreadystatechange","readyState","extend","name","Constructor","constructor","reopen","methods","extendClass","child","Parent","F","parentClass","object","version","$$module$e6$$Module","registerModuleEvents","events","_module","add","_moduleObjectStorage","_moduleClassStorage","scopeSelector","scope","beforeInit","afterInit","initClass","ClassName","initialize","classObject","moduleObject","storedObject","moduleName","setScope","get","getAll","remove","removeObject","splice","find","selector","$$detect$e6$$Detect","html5Support","_detect","touch","DocumentTouch","applicationCache","canvas","getContext","canvasText","fillText","dragAndDrop","div","hashChange","documentMode","postMessage","webSockets","webWorkers","Worker","audio","bool","canPlayType","ogg","mp3","wav","m4a","video","h264","webm","indexedDB","item","bind","localStorage","setItem","mode","removeItem","sessionStorage","detectBrowser","match","exec","_ua","browser","chrome","webkit","detectOS","OS","iOS","macOS","windows","android","windowsPhone","detectMobileDevice","navigator","userAgent","$$event$e6$$Event","_eventStore","on","trigger","$$core$e6$$default","$$module$e6$$default","$$detect$e6$$default","$$event$e6$$default","packages$loader$e6$$Moff","Moff"],"mappings":"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","file":"moff.min.js","sourcesContent":[null,"/**\n * Moff class\n * @constructor\n */\nfunction Core() {\n\t/**\n\t * @property {Core} _moff - Link to Core object\n\t * @private\n\t */\n\tvar _moff = this;\n\n\t/**\n\t * @property {window} _win - Link to window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {HTMLDocument} _doc - Local link to document object.\n\t * @private\n\t */\n\tvar _doc = _win.document;\n\n\t/**\n\t * @property {{}} _registeredFiles - Object to register files to be loaded.\n\t * @private\n\t */\n\tvar _registeredFiles = {};\n\n\t/**\n\t * @property {Array} _deferredObjects - Deferred files.\n\t * @private\n\t */\n\tvar _deferredObjects = [];\n\n\t/**\n\t * @property {boolean} _matchMediaSupport - Match media support and link.\n\t * @private\n\t */\n\tvar _matchMediaSupport = !!(_win.matchMedia && _win.matchMedia('screen').addListener);\n\n\t/**\n\t * @property {boolean|Window.matchMedia|*} _matchMedia - Short link to matchMedia.\n\t * @private\n\t */\n\tvar _matchMedia = _matchMediaSupport && _win.matchMedia;\n\n\t/**\n\t * @property {string} _mqSmall - Media query breakpoint conditions.\n\t * @private\n\t */\n\tvar _mqSmall = '(min-width: %dpx)';\n\n\t/**\n\t * @type {string} _mqMedium - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqMedium = _mqSmall;\n\n\t/**\n\t * @type {string} _mqLarge - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqLarge = _mqSmall;\n\n\t/**\n\t * @property {string} _lastViewMode - List name of device screen mode\n\t * @private\n\t */\n\tvar _lastViewMode;\n\n\t/**\n\t * @property {Array} _changeViewCallbacks - Array of callbacks to trigger on view change.\n\t * @private\n\t */\n\tvar _changeViewCallbacks = [];\n\n\t/**\n\t * @property {boolean} _windowIsLoaded - Flag to determine whether the window is loaded.\n\t * @private\n\t */\n\tvar _windowIsLoaded = false;\n\n\t/**\n\t * @property {Array} _beforeLoad - Run these callbacks before content loading.\n\t * @private\n\t */\n\tvar _beforeLoad = [];\n\n\t/**\n\t * @property {Array} _afterLoad - Run these callbacks after content is loaded.\n\t * @private\n\t */\n\tvar _afterLoad = [];\n\n\t/**\n\t * @property {{}} _cache - Preloaded data cache\n\t * @private\n\t */\n\tvar _cache = {};\n\n\t/**\n\t * @property {object} _settings - Local default settings.\n\t * @private\n\t */\n\tvar _settings = {\n\t\tbreakpoints: {\n\t\t\tsm: 768,\n\t\t\tmd: 992,\n\t\t\tlg: 1200\n\t\t},\n\n\t\tloadOnHover: true,\n\t\tcacheLiveTime: 2000\n\t};\n\n\t/**\n\t * @property {string} _dataEvent - Data load event selector.\n\t * @private\n\t */\n\tvar _dataEvent = '[data-load-target]';\n\n\t/**\n\t * @property {{}} _historyData - History data store.\n\t * @private\n\t */\n\tvar _historyData = {};\n\n\t/**\n\t * Handle elements event.\n\t * @function handleEvents\n\t */\n\tfunction handleEvents() {\n\t\t_win.addEventListener('load', windowLoadHandler, false);\n\n\t\t// Check for addListener method\n\t\t// because respond.js emulates matchMedia method\n\t\tif (_matchMediaSupport) {\n\t\t\t_matchMedia(_mqLarge).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqMedium).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqSmall).addListener(resizeHandler);\n\t\t} else {\n\t\t\t// If matchMedia is not supported use resize fallback\n\t\t\t_win.addEventListener('resize', resizeHandler, false);\n\t\t}\n\n\t\tif (_moff.hashchange) {\n\t\t\t_win.addEventListener('hashchange', includeByHash, false);\n\t\t}\n\n\t\t_win.addEventListener('popstate', handlePopstate, false);\n\t\t_moff.handleDataEvents();\n\t}\n\n\t/**\n\t * Window load event handler.\n\t * @function windowLoadHandler\n\t */\n\tfunction windowLoadHandler() {\n\t\t_windowIsLoaded = true;\n\n\t\t// Run includeRegister function to include files\n\t\t// registered as after window load and tagged in url hash tag or by screen size\n\t\tincludeRegister();\n\n\t\t// Load deferred files.\n\t\t// These files included with MoFF.include method before window load event.\n\t\t_moff.each(_deferredObjects, function(i, obj) {\n\t\t\t_moff.include(obj.id, obj.callback);\n\t\t});\n\t}\n\n\t/**\n\t * Window resize or matchMedia event listener handler.\n\t * @function resizeHandler\n\t * @param {object} mql - MediaQueryList object\n\t */\n\tfunction resizeHandler(mql) {\n\t\tif ((_matchMediaSupport && mql.matches) || viewModeIsChanged()) {\n\t\t\tsetViewMode();\n\n\t\t\t_moff.runCallbacks(_changeViewCallbacks, _moff, [_moff.getMode()]);\n\t\t\t_moff.handleDataEvents();\n\t\t}\n\t}\n\n\t/**\n\t * Handle load events.\n\t * @method handleDataEvents\n\t */\n\tthis.handleDataEvents = function() {\n\t\tvar element, event, url;\n\n\t\t_moff.each(_doc.querySelectorAll(_dataEvent), function() {\n\t\t\telement = this;\n\t\t\tif (element.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent = (element.getAttribute('data-load-event') || 'click').toLowerCase();\n\n\t\t\tif (event === 'dom') {\n\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\thandleLink(element);\n\t\t\t\t} else {\n\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\telement.addEventListener('click', function() {\n\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (event === 'click' && _settings.loadOnHover && !_moff.detect.isMobile) {\n\t\t\t\t\telement.addEventListener('mouseenter', function() {\n\t\t\t\t\t\telement = this;\n\t\t\t\t\t\turl = element.href || element.getAttribute('data-load-url');\n\t\t\t\t\t\turl = removeHash(url);\n\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\turl = handleUrlTemplate(element, url);\n\n\t\t\t\t\t\t\tload(url, function(data) {\n\t\t\t\t\t\t\t\t_cache[url] = data;\n\n\t\t\t\t\t\t\t\t// Clear cache each n seconds to prevent memory leak.\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tdelete _cache[url];\n\t\t\t\t\t\t\t\t}, _settings.cacheLiveTime);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\n\t\t\t\telement.addEventListener(event, function(event) {\n\t\t\t\t\thandleLink(this);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}, false);\n\t\t\t}\n\n\t\t\telement.handled = true;\n\t\t});\n\t};\n\n\t/**\n\t * Check element for data load screen.\n\t * @function checkDataScreen\n\t * @param {object} element - jQuery object\n\t * @returns {boolean} Return true if no data load screen\n\t */\n\tfunction checkDataScreen(element) {\n\t\tvar screen = element.getAttribute('data-load-screen');\n\t\treturn screen ? screen.split(' ').indexOf(_moff.getMode()) !== -1 : true;\n\t}\n\n\t/**\n\t * Extend Core settings\n\t * @param {object} settings - Core settings\n\t */\n\tfunction extendSettings(settings) {\n\t\tvar property;\n\t\tif (typeof settings === 'object') {\n\t\t\tfor (property in settings) {\n\t\t\t\tif (settings.hasOwnProperty(property)) {\n\t\t\t\t\t_settings[property] = settings[property];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Setup breakpoints for Media Queries.\n\t * @function setBreakpoints\n\t */\n\tfunction setBreakpoints() {\n\t\tvar breakpoints;\n\n\t\tif (_settings.breakpoints && _matchMediaSupport) {\n\t\t\tbreakpoints = _settings.breakpoints;\n\t\t\t_mqSmall = _mqSmall.replace('%d', breakpoints.sm);\n\t\t\t_mqMedium = _mqMedium.replace('%d', breakpoints.md);\n\t\t\t_mqLarge = _mqLarge.replace('%d', breakpoints.lg);\n\t\t}\n\t}\n\n\t/**\n\t * Determine whether view mode is changed\n\t * @function viewModeIsChanged\n\t * @returns {boolean}\n\t */\n\tfunction viewModeIsChanged() {\n\t\treturn _lastViewMode !== _moff.getMode();\n\t}\n\n\t/**\n\t * Change last view mode.\n\t * @function setViewMode\n\t */\n\tfunction setViewMode() {\n\t\t_lastViewMode = _moff.getMode();\n\t}\n\n\t/**\n\t * Handler to load registered files by hash tag.\n\t * @function includeByHash\n\t */\n\tfunction includeByHash() {\n\t\tvar hash = getHash();\n\n\t\tif (_registeredFiles.hasOwnProperty(hash)) {\n\t\t\t_moff.include(hash);\n\t\t}\n\t}\n\n\t/**\n\t * Load data.\n\t * @param {string} url - Load url\n\t * @param {function} callback - Callback on success\n\t */\n\tfunction load(url, callback) {\n\t\t_moff.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'GET',\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\tcallback(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Links click event handler.\n\t * @function handleLink\n\t * @param {object} element - DOM element\n\t * @returns {boolean} false\n\t */\n\tfunction handleLink(element) {\n\t\tvar title = element.title || '';\n\t\tvar url = element.href || element.getAttribute('data-load-url');\n\t\tvar target = element.getAttribute('data-load-target');\n\t\tvar push = element.getAttribute('data-push-url');\n\t\tvar id;\n\n\t\tif (url) {\n\t\t\turl = handleUrlTemplate(element, url);\n\t\t\t// Remove data attributes not to handle twice\n\t\t\telement.removeAttribute('data-load-event');\n\t\t\t_moff.runCallbacks(_beforeLoad, element);\n\n\t\t\tif (_moff.history && push !== undefined) {\n\t\t\t\tid = Date.now();\n\t\t\t\t_win.history.pushState({elemId: id, url: url}, title, url);\n\t\t\t\t_historyData[id] = element;\n\t\t\t}\n\n\t\t\tloadContent(element, url, target, function() {\n\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle url for templates.\n\t * @function handleUrlTemplate\n\t * @param {object} element - DOM element\n\t * @param {string} url - Handled url\n\t * @returns {string} handled url\n\t */\n\tfunction handleUrlTemplate(element, url) {\n\t\treturn url.replace(/\\{\\{(.*?)\\}\\}/g, function() {\n\t\t\treturn element.getAttribute(arguments[1]);\n\t\t});\n\t}\n\n\t/**\n\t * Load content and append into target.\n\t * @function loadContent\n\t * @param {object} element - DOM element\n\t * @param {string} url - Content URL\n\t * @param {string} target - Target element selector\n\t * @param {function} callback\n\t */\n\tfunction loadContent(element, url, target, callback) {\n\t\tvar title;\n\n\t\turl = removeHash(url);\n\n\t\tfunction applyContent(html) {\n\t\t\ttitle = element.getAttribute('data-page-title');\n\t\t\t_doc.querySelector(target).innerHTML = html;\n\n\t\t\tif (title) {\n\t\t\t\t_doc.title = title;\n\t\t\t}\n\n\t\t\t// Handle events of new added elements\n\t\t\t_moff.handleDataEvents();\n\t\t\tcallback();\n\t\t}\n\n\t\t// If data is cached load it from cache\n\t\tif (_cache[url]) {\n\t\t\tapplyContent(_cache[url]);\n\t\t} else {\n\t\t\tload(url, applyContent);\n\t\t}\n\t}\n\n\t/**\n\t * Window popstate event handler.\n\t * @function handlePopstate\n\t * @param {object} event - Event object\n\t */\n\tfunction handlePopstate(event) {\n\t\tvar state = event.state;\n\t\tvar element;\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\telement = _historyData[state.elemId];\n\t\tif (!checkDataScreen(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar url = state.url;\n\t\tvar target = element.getAttribute('data-load-target');\n\n\t\t_moff.runCallbacks(_beforeLoad, element);\n\t\tloadContent(element, url, target, function() {\n\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t});\n\t}\n\n\t/**\n\t * Remove hash tag from URL.\n\t * @function removeHash\n\t * @param {string} url\n\t * @returns {string} URL w/o hash tag\n\t */\n\tfunction removeHash(url) {\n\t\tvar index = url.indexOf('#');\n\t\treturn index === -1 ? url : url.substr(0, index);\n\t}\n\n\t/**\n\t * Get hash tag form URL.\n\t * @function getHash\n\t * @param {string} [url]\n\t * @returns {sting} Hash tag\n\t */\n\tfunction getHash(url) {\n\t\tif (url) {\n\t\t\tvar hashPoint = url.indexOf('#');\n\t\t\treturn hashPoint !== -1 ? url.substr(hashPoint + 1) : '';\n\t\t}\n\n\t\treturn _win.location.hash.substr(1);\n\t}\n\n\t/**\n\t * Check url hash tag to load registered files.\n\t * @function includeRegister\n\t */\n\tfunction includeRegister() {\n\t\tincludeByHash();\n\t}\n\n\tfunction nodeList(node) {\n\t\tvar type = Object.prototype.toString.call(node);\n\n\t\treturn typeof /^\\[object (HTMLCollection|NodeList)\\]$/.test(type)\n\t\t\t&& node.hasOwnProperty('length')\n\t\t\t&& (node.length === 0 || (typeof node[0] === 'object' && node[0].nodeType > 0));\n\t}\n\n\t/**\n\t * Run initialisation of base handlers\n\t * @method init\n\t * @param {object} [settings] - Core settings\n\t */\n\tthis.init = function(settings) {\n\t\t// Normalize settings\n\t\tif (!settings) {\n\t\t\tsettings = {};\n\t\t}\n\n\t\t_doc.addEventListener('DOMContentLoaded', function() {\n\t\t\textendSettings(settings);\n\t\t\tsetBreakpoints();\n\t\t\tsetViewMode();\n\t\t\thandleEvents();\n\t\t\tincludeRegister();\n\t\t}, false);\n\t};\n\n\t/**\n\t * Check for CSS3 property support.\n\t * @method supportCSS3\n\t * @param {string} property - CSS3 property\n\t * @returns {boolean}\n\t */\n\tthis.supportCSS3 = function(property) {\n\t\tvar ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tvar props = (property + ' ' + 'Webkit Moz O ms'.split(' ').join(ucProp + ' ') + ucProp).split(' ');\n\t\tvar length = props.length;\n\t\tvar i = 0;\n\n\t\tfor (; i < length; i++) {\n\t\t\tproperty = props[i];\n\t\t\tif (property.indexOf('-') === -1 && document.createElement('div').style[property] !== undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tthis.ajax = function(options) {\n\t\tvar params = [];\n\t\tvar data;\n\n\t\t// Make type upper case\n\t\toptions.type = options.type.toUpperCase();\n\n\t\t// Set data object to send them as POST or GET params\n\t\tif (typeof options.data === 'object') {\n\t\t\tdata = options.data;\n\n\t\t\tthis.each(data, function(key, value) {\n\t\t\t\tparams.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t\t});\n\n\t\t\toptions.data = params.join('&');\n\t\t}\n\n\t\t// Here data has additional GET params\n\t\t// Object could not be send with GET method\n\t\tif (options.type === 'GET' && options.data) {\n\t\t\toptions.url += (options.url.indexOf('?') !== -1 ? '&' : '?') + options.data.replace(/%20/g, '+');\n\t\t\toptions.data = null;\n\t\t}\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open(options.type, options.url, true);\n\n\t\txhr.setRequestHeader('Content-Type', options.contentType || 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n\t\txhr.onload = function() {\n\t\t\tvar status = this.status;\n\t\t\tif (status >= 200 && status < 300 || status === 304) {\n\t\t\t\toptions.success(this.response, this);\n\t\t\t} else {\n\t\t\t\toptions.error(this);\n\t\t\t}\n\t\t};\n\n\t\txhr.send(options.data);\n\t};\n\n\t/**\n\t * Run callbacks in passed collections.\n\t * @method runCallbacks\n\t * @param {object} collection - Callbacks collection\n\t * @param {object} context - Callback context\n\t */\n\tthis.runCallbacks = function(collection, context, args) {\n\t\t// Normalize collection\n\t\tif (!Array.isArray(collection)) {\n\t\t\tcollection = [];\n\t\t}\n\n\t\t// Normalize arguments\n\t\tif (typeof args === 'undefined') {\n\t\t\targs = [];\n\t\t}\n\n\t\t_moff.each(collection, function(i, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback.apply(context, args);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Add callbacks to view change event.\n\t * @method onViewChange\n\t * @param {function} callback - Callback assigned on view change\n\t */\n\tthis.onViewChange = function(callback) {\n\t\tif (typeof callback === 'function') {\n\t\t\t_changeViewCallbacks.push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Add callback before loading content.\n\t * @method beforeLoad\n\t * @param {function} callback\n\t */\n\tthis.beforeLoad = function(callback) {\n\t\t_beforeLoad.push(callback);\n\t};\n\n\t/**\n\t * Add callback after loading content.\n\t * @method afterLoad\n\t * @param {function} callback\n\t */\n\tthis.afterLoad = function(callback) {\n\t\t_afterLoad.push(callback);\n\t};\n\n\t/**\n\t * Get device view mode\n\t * @method getMode\n\t * @returns {string} view mode\n\t */\n\tthis.getMode = function() {\n\t\tvar viewMode = 'xs';\n\n\t\tif (_matchMediaSupport) {\n\t\t\tif (_matchMedia(_mqLarge).matches) {\n\t\t\t\tviewMode = 'lg';\n\t\t\t} else if (_matchMedia(_mqMedium).matches) {\n\t\t\t\tviewMode = 'md';\n\t\t\t} else if (_matchMedia(_mqSmall).matches) {\n\t\t\t\tviewMode = 'sm';\n\t\t\t}\n\t\t}\n\n\t\treturn viewMode;\n\t};\n\n\t/**\n\t * Register files to be loaded files.\n\t * @method register\n\t * @param {object} obj - Registered object\n\t */\n\tthis.register = function(obj) {\n\t\t// Normalize obj properties\n\t\t_registeredFiles[obj.id] = {\n\t\t\tloaded: false,\n\t\t\tdepend: {\n\t\t\t\tjs: obj.depend && obj.depend.js || [],\n\t\t\t\tcss: obj.depend && obj.depend.css || []\n\t\t\t},\n\t\t\tfile: {\n\t\t\t\tjs: obj.file && obj.file.js || [],\n\t\t\t\tcss: obj.file && obj.file.css || []\n\t\t\t},\n\t\t\tloadOnScreen: obj.loadOnScreen || [],\n\t\t\tbeforeInclude: obj.beforeInclude || undefined,\n\t\t\tafterInclude: obj.afterInclude || undefined,\n\t\t\tonWindowLoad: obj.onWindowLoad || false\n\t\t};\n\t};\n\n\t/**\n\t * Load registered files by identifier.\n\t * @method include\n\t * @param {string} id - Included object id\n\t * @param {function} [callback] - Function callback\n\t */\n\tthis.include = function(id, callback) {\n\t\tvar register = _registeredFiles[id];\n\n\t\t// Make sure files are not loaded\n\t\tif (register.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar screenMode = _moff.getMode();\n\n\t\t// Include on registered screen size.\n\t\tif (register.loadOnScreen.length && register.loadOnScreen.indexOf(screenMode) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure to load after window load if onWindowLoad is true\n\t\tif (register.onWindowLoad && !_windowIsLoaded) {\n\t\t\t// Save id to load after window load\n\t\t\t_deferredObjects.push({id: id, callback: callback});\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as loaded\n\t\tregister.loaded = true;\n\n\t\tif (typeof register.beforeInclude === 'function') {\n\t\t\tregister.beforeInclude();\n\t\t}\n\n\t\tfunction loadFiles() {\n\t\t\t_moff.loadAssets(register.file, execCallback);\n\t\t}\n\n\t\tthis.loadAssets(register.depend, loadFiles);\n\n\t\tfunction execCallback() {\n\t\t\tif (typeof register.afterInclude === 'function') {\n\t\t\t\tregister.afterInclude();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load files and run callback.\n\t * @method loadAssets\n\t * @param {object} depend - Object with js and css files to be loaded\n\t * @param {function} callback - Function executed after files be loaded\n\t */\n\tthis.loadAssets = function(depend, callback) {\n\t\tvar loaded = 0;\n\t\tvar length = 0;\n\t\tvar isCSS = Array.isArray(depend.css);\n\t\tvar isJS = Array.isArray(depend.js);\n\n\t\tif (isJS) {\n\t\t\tlength += depend.js.length;\n\t\t}\n\n\t\tif (isCSS) {\n\t\t\tlength += depend.css.length;\n\t\t}\n\n\t\tfunction runCallback() {\n\t\t\tloaded++;\n\t\t\tif (loaded === length) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (isJS && depend.js.length) {\n\t\t\t// Load depend js files\n\t\t\tthis.each(depend.js, function(i, src) {\n\t\t\t\t_moff.loadJS(src, runCallback);\n\t\t\t});\n\t\t}\n\n\t\tif (isCSS && depend.css.length) {\n\t\t\t// Load depend css files\n\t\t\tthis.each(depend.css, function(i, href) {\n\t\t\t\t_moff.loadCSS(href, runCallback);\n\t\t\t});\n\t\t}\n\n\t\tif (!length) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load js file and run callback on load.\n\t * @method loadJS\n\t * @param {string} src - Array or path of loaded files\n\t * @param {function} [callback] - On load event callback\n\t */\n\tthis.loadJS = function(src, callback) {\n\t\tif (typeof src !== 'string') {\n\t\t\twindow.console.warn('Moff.loadJS source is not a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar script;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load script if it is not existing on the page\n\t\tif (!_doc.querySelector('script[src=\"' + src + '\"]')) {\n\t\t\t// If set src attribute before append\n\t\t\t// jQuery will load script with ajax request\n\t\t\tscript = _doc.createElement('script');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tscript.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tscript.src = src;\n\t\t\t_doc.querySelector('body').appendChild(script);\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load css file and run callback on load.\n\t * @method loadCSS\n\t * @param {string} href - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadCSS = function(href, callback) {\n\t\tif (typeof href !== 'string') {\n\t\t\twindow.console.warn('Moff.loadCSS source is a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar link;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load link if it is not existing on the page\n\t\tif (!_doc.querySelector('link[href=\"' + href + '\"]')) {\n\t\t\tlink = _doc.createElement('link');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tlink.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tlink.href = href;\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\t_doc.querySelector('head').appendChild(link);\n\n\t\t\tlink.onreadystatechange = function() {\n\t\t\t\tvar state = link.readyState;\n\t\t\t\tif (state === 'loaded' || state === 'complete') {\n\t\t\t\t\tlink.onreadystatechange = null;\n\n\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Extend Moff object.\n\t * @method extend\n\t * @param {string} name - Module name\n\t * @param {function} Constructor - Module constructor\n\t * @param {boolean} extend [optionally] - Extend from Moff prototype\n\t */\n\tthis.extend = function(name, Constructor, extend) {\n\t\t// Make sure not to override existing properties/methods\n\t\tif (!this.hasOwnProperty(name)) {\n\t\t\tif (extend) {\n\t\t\t\tConstructor.prototype = this;\n\t\t\t\tConstructor.prototype.constructor = Constructor;\n\t\t\t}\n\n\t\t\tthis[name] = new Constructor();\n\n\t\t\tif (typeof this[name].init === 'function') {\n\t\t\t\tthis[name].init();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Overwrites and adds object methods and properties.\n\t * @method reopen\n\t * @param {object} methods - Object of properties or methods\n\t */\n\tthis.reopen = function(methods) {\n\t\tif (typeof methods !== 'object') {\n\t\t\twindow.console.warn('Reopen method argument must be an object');\n\t\t\treturn;\n\t\t}\n\n\t\tvar obj = this;\n\t\tobj.each(methods, function(property, value) {\n\t\t\tobj[property] = value;\n\t\t});\n\t};\n\n\t/**\n\t * Extend classes.\n\t * @method extendClass\n\t * @param {function} child - Child constructor\n\t * @param {function} Parent - Parent constructor\n\t */\n\tthis.extendClass = function(child, Parent) {\n\t\tfunction F() {}\n\n\t\tF.prototype = new Parent();\n\t\tchild.prototype = new F();\n\t\tchild.prototype.constructor = child;\n\t\tchild.parentClass = Parent.prototype;\n\t};\n\n\t/**\n\t * Set or get Moff settings value.\n\t * @method settings\n\t * @param {string} key - Setting name\n\t * @param {*} value - Setting value\n\t * @returns {*}\n\t */\n\tthis.settings = function(key, value) {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn _settings[key];\n\t\t} else {\n\t\t\t_settings[key] = value;\n\t\t}\n\t};\n\n\tthis.each = function(object, callback) {\n\t\tvar i = 0;\n\t\tvar length = object.length;\n\t\tvar isArray = Array.isArray(object) || nodeList(object);\n\t\tvar value;\n\n\t\tif (isArray) {\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\tif (value === false) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i in object) {\n\t\t\t\tif (object.hasOwnProperty(i)) {\n\t\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Moff version.\n\t * @type {string}\n\t */\n\tthis.version = '{{version}}';\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_deferredObjects: function() {\n\t\t\treturn _deferredObjects;\n\t\t},\n\n\t\t_registeredFiles: function() {\n\t\t\treturn _registeredFiles;\n\t\t},\n\n\t\t_cache: _cache\n\t};\n\t/* End-test-code */\n}\n\nexport default Core;\n","/**\n * Register and control new Moff modules.\n * @module Module.\n */\nfunction Module() {\n\t/**\n\t * @private {Module} _module - Link to object.\n\t */\n\tvar _module = this;\n\n\t/**\n\t * @private {{}} _moduleObjectStorage - Modules storage.\n\t */\n\tvar _moduleObjectStorage = {};\n\n\t/**\n\t * @private {{}} _moduleClassStorage - Classes storage.\n\t */\n\tvar _moduleClassStorage = {};\n\n\t/**\n\t * Register module events\n\t * @param {Array} events - Array of events\n\t */\n\tfunction registerModuleEvents(events) {\n\t\tif (Array.isArray(events)) {\n\t\t\t_module.each(events, function(index, event) {\n\t\t\t\t_module.event.add(event);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @property {null|string} scopeSelector - Module scope selector. jQuery selector.\n\t */\n\tthis.scopeSelector = null;\n\n\t/**\n\t * @property {null|object} scope - Module scope object. jQuery object.\n\t */\n\tthis.scope = null;\n\n\t/**\n\t * @property {Array} events - Array of module events.\n\t */\n\tthis.events = [];\n\n\t/**\n\t * @property {Function} beforeInit - Before initialization callback\n\t */\n\tthis.beforeInit = function() {};\n\n\t/**\n\t * @property {Function} init - Initialization callback\n\t */\n\tthis.init = function() {};\n\n\t/**\n\t * @property {Function} afterInit - After initialization callback\n\t */\n\tthis.afterInit = function() {};\n\n\t/**\n\t * Register new module.\n\t * @method register\n\t * @param {string} name - module name\n\t * @param {object} [depend] - object of js and css files\n\t * @param {function} Constructor - constructor\n\t */\n\tthis.register = function(name, depend, Constructor) {\n\t\t// Normalize arguments\n\t\tif (typeof Constructor === 'undefined') {\n\t\t\tConstructor = depend;\n\t\t\tdepend = undefined;\n\t\t}\n\n\t\t// Register new module in the storage\n\t\tConstructor.prototype = _module;\n\t\tConstructor.prototype.constructor = Constructor;\n\n\t\t// Save module in storage\n\t\tif (typeof _moduleClassStorage[name] === 'undefined') {\n\t\t\t_moduleClassStorage[name] = {\n\t\t\t\tconstructor: Constructor,\n\t\t\t\tdepend: depend\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Initialize registered class\n\t * @method initClass\n\t * @param {string} ClassName - Name of registered class\n\t * @param {object} [params] - Object with additional params\n\t */\n\tthis.initClass = function(ClassName, params) {\n\t\tvar moduleObject = _moduleClassStorage[ClassName];\n\n\t\tif (!moduleObject) {\n\t\t\twindow.console.warn(ClassName + ' Class is not registered');\n\t\t\treturn;\n\t\t}\n\n\t\tfunction initialize() {\n\t\t\t// Create new class object\n\t\t\tvar classObject = new moduleObject.constructor();\n\t\t\tvar storedObject = _moduleObjectStorage[ClassName];\n\n\t\t\t// Store objects in array if there are more then one classes\n\t\t\tif (Array.isArray(storedObject)) {\n\t\t\t\tstoredObject.push(classObject);\n\t\t\t} else if (typeof storedObject !== 'undefined') {\n\t\t\t\t_moduleObjectStorage[ClassName] = [storedObject, classObject];\n\t\t\t} else {\n\t\t\t\t_moduleObjectStorage[ClassName] = classObject;\n\t\t\t}\n\n\t\t\tif (typeof classObject.beforeInit === 'function') {\n\t\t\t\tclassObject.beforeInit();\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\t// Apply all passed data\n\t\t\t\t_module.each(params, function(key, value) {\n\t\t\t\t\tclassObject[key] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add module name\n\t\t\tclassObject.moduleName = ClassName;\n\n\t\t\t// Register module events.\n\t\t\tregisterModuleEvents(classObject.events);\n\n\t\t\t// Set module scope\n\t\t\tclassObject.setScope();\n\n\t\t\tif (typeof classObject.init === 'function') {\n\t\t\t\tclassObject.init();\n\t\t\t}\n\n\t\t\tif (typeof classObject.afterInit === 'function') {\n\t\t\t\tclassObject.afterInit();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tif (moduleObject.depend) {\n\t\t\t\tthis.loadAssets(moduleObject.depend, initialize);\n\t\t\t} else {\n\t\t\t\tinitialize();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\twindow.console.error(error);\n\t\t}\n\t};\n\n\t/**\n\t * Get registered module by name.\n\t * @method get\n\t * @param {string} name - module name\n\t * @return {object|Array|undefined} module object or undefined\n\t */\n\tthis.get = function(name) {\n\t\treturn (_moduleObjectStorage.hasOwnProperty(name) && _moduleObjectStorage[name]) || undefined;\n\t};\n\n\t/**\n\t * Returns all modules.\n\t * @method getAll\n\t * @returns {{}}\n\t */\n\tthis.getAll = function() {\n\t\treturn _moduleObjectStorage;\n\t};\n\n\t/**\n\t * Remove registered module by name.\n\t * @method remove\n\t */\n\tthis.remove = function() {\n\t\tvar name = this.moduleName;\n\t\tvar id = this.id;\n\t\tvar i = 0;\n\t\tvar object, length;\n\n\t\tfunction removeObject() {\n\t\t\t_moduleObjectStorage[name].splice(i, 1);\n\t\t\tlength = _moduleObjectStorage[name].length;\n\t\t\t--i;\n\t\t}\n\n\t\t// Be sure to remove existing module\n\t\tif (Array.isArray(_moduleObjectStorage[name])) {\n\t\t\tlength = _moduleObjectStorage[name].length;\n\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tobject = _moduleObjectStorage[name][i];\n\n\t\t\t\tif (object.id) {\n\t\t\t\t\tif (object.id === id) {\n\t\t\t\t\t\tremoveObject();\n\t\t\t\t\t}\n\t\t\t\t} else if (object.moduleName === name) {\n\t\t\t\t\tremoveObject();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_moduleObjectStorage[name].length === 1) {\n\t\t\t\t_moduleObjectStorage[name] = _moduleObjectStorage[name][0];\n\t\t\t} else if (!_moduleObjectStorage[name].length) {\n\t\t\t\tdelete _moduleObjectStorage[name];\n\t\t\t}\n\t\t} else {\n\t\t\tdelete _moduleObjectStorage[name];\n\t\t}\n\t};\n\n\t/**\n\t * Register module scope by scope selector.\n\t * @method setScope\n\t */\n\tthis.setScope = function() {\n\t\tif (this.scopeSelector) {\n\t\t\tthis.scope = document.querySelector(this.scopeSelector);\n\t\t}\n\t};\n\n\t/**\n\t * Find element in module scope.\n\t * @method find\n\t * @param {string} selector - jQuery selector.\n\t * @returns {object} jQuery object.\n\t */\n\tthis.find = function(selector) {\n\t\treturn this.scope.querySelectorAll(selector);\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_moduleClassStorage: _moduleClassStorage,\n\t\t_moduleObjectStorage: _moduleObjectStorage\n\t};\n\t/* End-test-code */\n}\n\nexport default Module;\n","/**\n * Detects OS, browser and another features support.\n * @module Detect\n */\nfunction Detect() {\n\t/**\n\t * @property {Window} _win - Link to Window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {Detect} _detect - Link to this object.\n\t * @private\n\t */\n\tvar _detect = this;\n\n\t/**\n\t * @property {string} _ua - Link to user agent.\n\t * @private\n\t */\n\tvar _ua = window.navigator.userAgent.toLowerCase();\n\n\t/**\n\t * @property {HTMLDocument} _doc - Link to document object.\n\t * @private\n\t */\n\tvar _doc = document;\n\n\t/**\n\t * @property {{}} browser - Object with browser details.\n\t */\n\tthis.browser = {};\n\n\t/**\n\t * @property {{}} OS - Object with OS details.\n\t */\n\tthis.OS = {};\n\n\t/**\n\t * HTML5 support list.\n\t * @function html5Support\n\t */\n\tfunction html5Support() {\n\t\t// Determine whether browser support touch JavaScript API\n\t\t// It does not mean touch device\n\t\t_detect.touch = !!(('ontouchstart' in _win) || _win.DocumentTouch && _doc instanceof _win.DocumentTouch);\n\t\t_detect.applicationCache = !!_win.applicationCache;\n\t\t_detect.canvas = (function() {\n\t\t\tvar canvas = _doc.createElement('canvas');\n\t\t\treturn !!(canvas.getContext && canvas.getContext('2d'));\n\t\t})();\n\n\t\t_detect.canvasText = !!(_detect.canvas && typeof _doc.createElement('canvas').getContext('2d').fillText === 'function');\n\t\t_detect.dragAndDrop = (function() {\n\t\t\tvar div = _doc.createElement('div');\n\t\t\treturn ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n\t\t})();\n\n\t\t_detect.hashChange = !!('onhashchange' in _win && (typeof _doc.documentMode === 'undefined' || _doc.documentMode > 7));\n\t\t_detect.history = !!(_win.history && history.pushState);\n\t\t_detect.postMessage = !!_win.postMessage;\n\t\t_detect.webSockets = !!('WebSocket' in _win || 'MozWebSocket' in _win);\n\t\t_detect.webWorkers = !!_win.Worker;\n\t\t_detect.audio = (function() {\n\t\t\tvar audio = _doc.createElement('audio');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!audio.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '');\n\t\t\t\t\tbool.mp3 = audio.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\t\t\t\t\tbool.wav = audio.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '');\n\t\t\t\t\tbool.m4a = (audio.canPlayType('audio/x-m4a;') || audio.canPlayType('audio/aac;')).replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.video = (function() {\n\t\t\tvar video = _doc.createElement('video');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!video.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = video.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\t\t\t\t\tbool.h264 = video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\t\t\t\t\tbool.webm = video.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.indexedDB = (function() {\n\t\t\tvar props = ['indexedDB', 'webkitIndexedDB', 'mozIndexedDB', 'OIndexedDB', 'msIndexedDB'];\n\n\t\t\tfor (var i in props) {\n\t\t\t\tif (props.hasOwnProperty(i)) {\n\t\t\t\t\tvar item = _win[props[i]];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\tif (item === false) {\n\t\t\t\t\t\t\treturn props[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof item === 'function') {\n\t\t\t\t\t\t\treturn item.bind(_win);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t})();\n\n\t\t_detect.localStorage = (function() {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tlocalStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\n\t\t_detect.sessionStorage = (function() {\n\t\t\ttry {\n\t\t\t\tsessionStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tsessionStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t}\n\n\t/**\n\t * Detect browser\n\t * @function detectBrowser\n\t */\n\tfunction detectBrowser() {\n\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(msie) ([\\w.]+)/.exec(_ua) ||\n\t\t\t_ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(_ua) || [];\n\n\t\tif (match[1]) {\n\t\t\t_detect.browser[match[1]] = true;\n\t\t}\n\n\t\tif (match[2]) {\n\t\t\t_detect.browser.version = match[2];\n\t\t}\n\n\t\tif (_detect.browser.chrome) {\n\t\t\t_detect.browser.webkit = true;\n\t\t}\n\t}\n\n\t/**\n\t * Detect Operating System\n\t * @function detectOS\n\t */\n\tfunction detectOS() {\n\t\tvar OS = _detect.OS;\n\t\tvar iOS = /(ipad|iphone|ipod)/g.test(_ua);\n\t\tvar macOS = _ua.indexOf('mac') > -1;\n\t\tvar windows = _ua.indexOf('win') > -1;\n\t\tvar android = _ua.indexOf('android') > -1;\n\t\tvar windowsPhone = _ua.indexOf('windows phone') > -1;\n\n\t\tif (iOS) {\n\t\t\tOS.iOS = iOS;\n\t\t} else if (macOS) {\n\t\t\tOS.macOS = macOS;\n\t\t} else if (windows) {\n\t\t\tOS.windows = windows;\n\t\t} else if (android) {\n\t\t\tOS.android = android;\n\t\t} else if (windowsPhone) {\n\t\t\tOS.windowsPhone = windowsPhone;\n\t\t}\n\t}\n\n\t/**\n\t * Detects whether the current device is mobile\n\t * @function detectMobileDevice\n\t */\n\tfunction detectMobileDevice() {\n\t\t_detect.isMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_ua);\n\t}\n\n\tthis.init = function() {\n\t\thtml5Support();\n\t\tdetectBrowser();\n\t\tdetectOS();\n\t\tdetectMobileDevice();\n\t};\n}\n\nexport default Detect;\n","/**\n * Moff Event module.\n * @module Event.\n */\nfunction Event() {\n\t/**\n\t * @private {{}} _eventStore - Events storage.\n\t * @private\n\t */\n\tvar _eventStore = {};\n\n\t/**\n\t * Registers new event.\n\t * @method add\n\t * @param {string} name - Event name\n\t */\n\tthis.add = function(name) {\n\t\tif (typeof _eventStore[name] === 'undefined') {\n\t\t\t_eventStore[name] = [];\n\t\t}\n\t};\n\n\t/**\n\t * Assign callback for event.\n\t * @method on\n\t * @param {string} name - Event name\n\t * @param {function} callback - Event callback\n\t */\n\tthis.on = function(name, callback) {\n\t\t// Create event if it does not exist.\n\t\tthis.add(name);\n\n\t\tif (typeof callback === 'function') {\n\t\t\t_eventStore[name].push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Trigger event by name.\n\t * @method trigger\n\t * @param {string} name - Event name\n\t */\n\tthis.trigger = function(name) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof _eventStore[name] !== 'undefined') {\n\t\t\tthis.runCallbacks(_eventStore[name], this, args);\n\t\t}\n\t};\n\n\t/**\n\t * Get event from store.\n\t * @param {string} name - Event name\n\t * @returns {Array|undefined}\n\t */\n\tthis.get = function(name) {\n\t\treturn _eventStore[name];\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_eventStore: _eventStore\n\t};\n\t/* End-test-code */\n}\n\nexport default Event;\n"],"sourceRoot":"/source/"}