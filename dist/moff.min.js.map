{"version":3,"sources":["moff.min.js","packages/core.js","packages/module.js","packages/detect.js","packages/loader.js"],"names":["$$core$$MoffClass","handleEvents","collectVisibleElements","$","_win","on","_postfix","windowLoadHandler","windowScrollHandler","_matchMediaSupport","_matchMedia","_mqLarge","addListener","resizeHandler","_mqMedium","_mqSmall","_moff","hashchange","includeByHash","handlePopstate","handleLoadEvents","element","each","this","_visibleElements","push","removeAttr","css","handler","appear","_windowIsLoaded","includeRegister","_deferredObjects","i","id","include","length","localVisible","slice","obj","isVisible","splice","mql","matches","viewModeIsChanged","setViewMode","runCallbacks","_changeViewCallbacks","getMode","event","_dataEvent","handled","data","toLowerCase","checkDataScreen","handleLink","screen","inArray","split","extendSettings","settings","extend","_settings","setBreakpoints","breakpoints","replace","sm","md","lg","_lastViewMode","hash","getHash","_registeredFiles","hasOwnProperty","includeByScreenSize","screenMode","loadOnScreen","load","url","callback","ajax","type","success","title","attr","target","handleUrlTemplate","_beforeLoad","history","undefined","Date","pushState","elemId","_historyData","loadContent","elem","_afterLoad","arguments","removeHash","html","_doc","reusableEvents","top","document","getElementById","add","scrollTop","offset","state","originalEvent","index","indexOf","substr","hashPoint","location","bootstrapPatches","msViewportStyle","isAndroid","ua","navigator","userAgent","windows8","match","windowsMobile","append","removeClass","window","matchMedia","_mode","init","duration","supportCSS3","-webkit-transition","-moz-transition","-o-transition","transition","opacity","animate","bounds","win","viewport","left","scrollLeft","right","width","bottom","height","outerWidth","outerHeight","property","ucProp","charAt","toUpperCase","props","join","createElement","style","collection","context","args","isArray","apply","onViewChange","beforeLoad","afterLoad","viewMode","register","loaded","depend","js","files","beforeInclude","afterInclude","onWindowLoad","loadFiles","loadDepends","execCallback","isFunction","depends","runCallback","isCSS","isJS","loadJS","loadCSS","includeScript","src","appendTo","console","warn","includeStyle","link","onreadystatechange","readyState","href","name","Constructor","prototype","constructor","extendClass","child","Parent","F","parentClass","parent","key","value","version","_testonly","$$module$$Module","registerModule","module","_module","_moduleClassStorage","registerModuleEvents","events","registerEvent","_moduleObjectStorage","_eventStore","initClass","ClassName","params","classObject","storedObject","set","moduleName","beforeInit","setScope","afterInit","error","assignForEvent","triggerEvent","Array","call","get","prop","remove","object","scopeSelector","scope","find","selector","$$detect$$Detect","html5Support","_detect","touch","DocumentTouch","applicationCache","canvas","getContext","canvastext","fillText","draganddrop","div","documentMode","postmessage","postMessage","websockets","websqldatabase","openDatabase","webworkers","Worker","audio","bool","canPlayType","ogg","mp3","wav","m4a","video","h264","webm","indexeddb","item","bind","localstorage","localStorage","setItem","removeItem","sessionstorage","sessionStorage","detectBrowser","exec","_ua","browser","chrome","webkit","safari","detectOS","OS","iOS","test","macOS","windows","android","$$core$$default","$$module$$default","$$detect$$default","packages$loader$$Moff","Moff"],"mappings":"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","file":"moff.min.js","sourcesContent":[null,"/**\n * @overview  Moff - Mobile First Framework.\n * @copyright Copyright (c) 2015 Kadir A. Fuzaylov\n * @license   Licensed under MIT license\n * @author    Kadir A. Fuzaylov <kfuzaylov@dealerfire.com>\n * @version   1.0.0\n */\n\n/**\n * Moff class\n * @constructor\n */\nfunction MoffClass() {\n\t/**\n\t * @property {MoffClass} _moff - Link to MoffClass object\n\t * @private\n\t */\n\tvar _moff = this;\n\n\t/**\n\t * @property {{}} _win - Link to window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {HTMLDocument} _doc - Local link to document object.\n\t * @private\n\t */\n\tvar _doc = _win.document;\n\n\t/**\n\t * @property {{}} _registeredFiles - Object to register files to be loaded.\n\t * @private\n\t */\n\tvar _registeredFiles = {};\n\n\t/**\n\t * @property {Array} _deferredObjects - Deferred files.\n\t * @private\n\t */\n\tvar _deferredObjects = [];\n\n\t/**\n\t * @property {Array} _visibleElements - Elements to be visible.\n\t * @private\n\t */\n\tvar _visibleElements = [];\n\n\t/**\n\t * @property {boolean} _matchMediaSupport - Match media support and link.\n\t * @private\n\t */\n\tvar _matchMediaSupport = !!(_win.matchMedia && _win.matchMedia('screen').addListener);\n\n\t/**\n\t * @property {boolean|Window.matchMedia|*} _matchMedia - Short link to matchMedia.\n\t * @private\n\t */\n\tvar _matchMedia = _matchMediaSupport && _win.matchMedia;\n\n\t/**\n\t * @property {string} _mqSmall - Media query breakpoint conditions.\n\t * @private\n\t */\n\tvar _mqSmall = '(min-width: %dpx)';\n\n\t/**\n\t * @type {string} _mqMedium - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqMedium = _mqSmall;\n\n\t/**\n\t * @type {string} _mqLarge - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqLarge = _mqSmall;\n\n\t/**\n\t * @property {string} _lastViewMode - List name of device screen mode\n\t * @private\n\t */\n\tvar _lastViewMode;\n\n\t/**\n\t * @property {Array} _changeViewCallbacks - Array of callbacks to trigger on view change.\n\t * @private\n\t */\n\tvar _changeViewCallbacks = [];\n\n\t/**\n\t * @property {boolean} _windowIsLoaded - Flag to determine whether the window is loaded.\n\t * @private\n\t */\n\tvar _windowIsLoaded = false;\n\n\t/**\n\t * @property {Array} _beforeLoad - Run these callbacks before content loading.\n\t * @private\n\t */\n\tvar _beforeLoad = [];\n\n\t/**\n\t * @property {Array} _afterLoad - Run these callbacks after content is loaded.\n\t * @private\n\t */\n\tvar _afterLoad = [];\n\n\t/**\n\t * @property {string} _mode - Framework mode.\n\t * @private\n\t */\n\tvar _mode = 'moff';\n\n\t/**\n\t * Local default settings.\n\t * @type {{breakpoints: {sm: number, md: number, lg: number}}}\n\t * @private\n\t */\n\tvar _settings = {\n\t\t/** Media Query break points. */\n\t\tbreakpoints: {\n\t\t\tsm: 768,\n\t\t\tmd: 992,\n\t\t\tlg: 1200\n\t\t}\n\t};\n\n\t/**\n\t * @property {string} _postfix - Events postfix.\n\t * @private\n\t */\n\tvar _postfix = '.moff';\n\n\t/**\n\t * @property {string} _dataEvent - Data load event selector.\n\t * @private\n\t */\n\tvar _dataEvent = '[data-load-target]';\n\n\t/**\n\t * @property {{}} _historyData - History data store.\n\t * @private\n\t */\n\tvar _historyData = {};\n\n\t/**\n\t * Handle elements event.\n\t * @function handleEvents\n\t */\n\tfunction handleEvents() {\n\t\tcollectVisibleElements();\n\n\t\t$(_win)\n\t\t\t.on('load' + _postfix, windowLoadHandler)\n\t\t\t.on('scroll' + _postfix, windowScrollHandler);\n\n\t\t// Check for addListener method\n\t\t// because respond.js emulates matchMedia method\n\t\tif (_matchMediaSupport) {\n\t\t\t_matchMedia(_mqLarge).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqMedium).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqSmall).addListener(resizeHandler);\n\t\t} else {\n\t\t\t// If matchMedia is not supported use resize fallback\n\t\t\t$(_win).on('resize' + _postfix, resizeHandler);\n\t\t}\n\n\t\tif (_moff.hashchange) {\n\t\t\t$(_win).on('hashchange' + _postfix, includeByHash);\n\t\t}\n\n\t\t$(_win).on('popstate' + _postfix, handlePopstate);\n\t\thandleLoadEvents();\n\n\t\t// Call window scroll event handler to load visible elements\n\t\twindowScrollHandler();\n\t}\n\n\t/**\n\t * Gather animated elements to be handled.\n\t * @function collectVisibleElements\n\t */\n\tfunction collectVisibleElements() {\n\t\tvar element;\n\n\t\t$.each($('[data-visible-scroll]'), function() {\n\t\t\telement = $(this);\n\n\t\t\t_visibleElements.push({\n\t\t\t\t// Remove [data-visible-scroll] attribute not to be handled twice\n\t\t\t\telement: element.removeAttr('data-visible-scroll').css('opacity', 0),\n\t\t\t\thandler: function() {\n\t\t\t\t\t_moff.appear(element);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Window load event handler.\n\t * @function windowLoadHandler\n\t */\n\tfunction windowLoadHandler() {\n\t\t_windowIsLoaded = true;\n\n\t\t// Run includeRegister function to include files\n\t\t// registered as after window load and tagged in url hash tag or by screen size\n\t\tincludeRegister();\n\n\t\t// Load deferred files.\n\t\t// These files included with MoFF.include method before window load event.\n\t\t$.each(_deferredObjects, function(i, id) {\n\t\t\t_moff.include(id);\n\t\t});\n\t}\n\n\t/**\n\t * Window scroll event handler.\n\t * @function windowScrollHandler\n\t */\n\tfunction windowScrollHandler() {\n\t\tif (!_visibleElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar localVisible = _visibleElements.slice(0);\n\t\t$.each(localVisible, function(i, obj) {\n\t\t\tif (_moff.isVisible(obj.element)) {\n\t\t\t\t// Remove element from array not to be handled twice\n\t\t\t\t_visibleElements.splice(i, 1);\n\t\t\t\tobj.handler();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Window resize or matchMedia event listener handler.\n\t * @function resizeHandler\n\t * @param {object} mql - MediaQueryList object\n\t */\n\tfunction resizeHandler(mql) {\n\t\tif ((_matchMediaSupport && mql.matches) || _moff.viewModeIsChanged()) {\n\t\t\tsetViewMode();\n\t\t\t_moff.runCallbacks(_changeViewCallbacks, _moff, [_moff.getMode()]);\n\t\t\thandleLoadEvents();\n\t\t}\n\t}\n\n\t/**\n\t * Handle load events.\n\t * @function handleLoadEvents\n\t */\n\tfunction handleLoadEvents() {\n\t\tvar element, event;\n\n\t\t$.each($(_dataEvent), function() {\n\t\t\tif (this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telement = $(this);\n\t\t\tevent = (element.data('loadEvent') || 'click').toLowerCase();\n\n\t\t\tif (event === 'dom') {\n\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\thandleLink(this);\n\t\t\t\t} else {\n\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\telement.on('click' + _postfix, function() {\n\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (event === 'scroll') {\n\t\t\t\t_visibleElements.push({\n\t\t\t\t\telement: element,\n\t\t\t\t\thandler: function() {\n\t\t\t\t\t\tif (checkDataScreen(element)) {\n\t\t\t\t\t\t\thandleLink(element);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If load screen size does not fit, link should be handled with click event\n\t\t\t\t\t\t\telement.on('click' + _postfix, function() {\n\t\t\t\t\t\t\t\thandleLink(this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\telement.on(event + _postfix, function() {\n\t\t\t\t\treturn handleLink(this);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.handled = true;\n\t\t});\n\t}\n\n\t/**\n\t * Check element for data load screen.\n\t * @function checkDataScreen\n\t * @param {object} element - jQuery object\n\t * @returns {boolean} Return true if no data load screen\n\t */\n\tfunction checkDataScreen(element) {\n\t\tvar screen = element.data('loadScreen');\n\t\treturn screen ? $.inArray(_moff.getMode(), screen.split(' ')) !== -1 : true;\n\t}\n\n\t/**\n\t * Extend MoffClass settings\n\t * @param {object} settings - MoffClass settings\n\t */\n\tfunction extendSettings(settings) {\n\t\t$.extend(_settings, settings);\n\t}\n\n\t/**\n\t * Setup breakpoints.\n\t * @function setBreakpoints\n\t */\n\tfunction setBreakpoints() {\n\t\tvar breakpoints;\n\n\t\tif (_settings.breakpoints && _matchMediaSupport) {\n\t\t\tbreakpoints = _settings.breakpoints;\n\t\t\t_mqSmall = _mqSmall.replace('%d', breakpoints.sm);\n\t\t\t_mqMedium = _mqMedium.replace('%d', breakpoints.md);\n\t\t\t_mqLarge = _mqLarge.replace('%d', breakpoints.lg);\n\t\t}\n\t}\n\n\t/**\n\t * Change last view mode.\n\t * @function setViewMode\n\t */\n\tfunction setViewMode() {\n\t\t_lastViewMode = _moff.getMode();\n\t}\n\n\t/**\n\t * Handler to load registered files by hash tag.\n\t * @function includeByHash\n\t */\n\tfunction includeByHash() {\n\t\tvar hash = getHash();\n\n\t\tif (_registeredFiles.hasOwnProperty(hash)) {\n\t\t\t_moff.include(hash);\n\t\t}\n\t}\n\n\t/**\n\t * Handler to load registered files by screen size.\n\t * @function includeByScreenSize\n\t */\n\tfunction includeByScreenSize() {\n\t\tvar screenMode = _moff.getMode();\n\n\t\t$.each(_registeredFiles, function(id, obj) {\n\t\t\tif ($.inArray(screenMode, obj.loadOnScreen) !== -1) {\n\t\t\t\t_moff.include(id);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Load data.\n\t * @param {string} url - Load url\n\t * @param {function} callback - Callback on success\n\t */\n\tfunction load(url, callback) {\n\t\t$.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'GET',\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\tcallback(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Links click event handler.\n\t * @function handleLink\n\t * @param {object} element - DOM element\n\t * @returns {boolean} false\n\t */\n\tfunction handleLink(element) {\n\t\telement = $(element);\n\n\t\tvar title = element.attr('title') || '';\n\t\tvar url = element.attr('href') || element.data('loadUrl');\n\t\tvar target = element.data('loadTarget');\n\t\tvar push = element.data('pushUrl');\n\n\t\tif (url) {\n\t\t\turl = handleUrlTemplate(element, url);\n\t\t\t// Remove data attributes not to handle twice\n\t\t\telement.removeAttr('data-load-event');\n\t\t\t_moff.runCallbacks(_beforeLoad, element);\n\n\t\t\tif (_moff.history && push !== undefined) {\n\t\t\t\tvar id = +new Date();\n\t\t\t\t_win.history.pushState({elemId: id, url: url}, title, url);\n\t\t\t\t_historyData[id] = element;\n\t\t\t}\n\n\t\t\tloadContent(elem, url, target, function() {\n\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Handle url for templates.\n\t * @function handleUrlTemplate\n\t * @param {object} element - DOM element\n\t * @param {string} url - Handled url\n\t * @returns {string} handled url\n\t */\n\tfunction handleUrlTemplate(element, url) {\n\t\treturn url.replace(/\\{\\{(.*?)\\}\\}/g, function() {\n\t\t\treturn element[arguments[1]]();\n\t\t});\n\t}\n\n\t/**\n\t * Load content and append into target.\n\t * @function loadContent\n\t * @param {object} element - DOM element\n\t * @param {string} url - Content URL\n\t * @param {string} target - Target element selector\n\t * @param {function} callback\n\t */\n\tfunction loadContent(element, url, target, callback) {\n\t\tvar hash = getHash(url);\n\t\tvar title;\n\t\turl = removeHash(url);\n\n\t\tload(url, function(html) {\n\t\t\ttitle = element.data('pageTitle');\n\t\t\t$(target).html(html);\n\n\t\t\tif (title) {\n\t\t\t\t_doc.title = title;\n\t\t\t}\n\n\t\t\t// Handle events of new added elements\n\t\t\t_moff.reusableEvents();\n\t\t\tcallback();\n\n\t\t\tif (hash) {\n\t\t\t\t// Use document.getElementById to escape syntax error for jQuery selector\n\t\t\t\tvar top = $(document.getElementById(hash)).add('a[name=\"' + hash + '\"]');\n\t\t\t\tif (top.length) {\n\t\t\t\t\t$(_win).scrollTop(top.offset().top);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Window popstate event handler.\n\t * @function handlePopstate\n\t * @param {object} event - Event object\n\t */\n\tfunction handlePopstate(event) {\n\t\tvar state = event.originalEvent.state;\n\t\tvar element;\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\telement = _historyData[state.elemId];\n\t\tif (!checkDataScreen(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar url = state.url;\n\t\tvar target = elem.data('loadTarget');\n\n\t\t_moff.runCallbacks(_beforeLoad, element);\n\t\tloadContent(element, url, target, function() {\n\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t});\n\t}\n\n\t/**\n\t * Remove hash tag from URL.\n\t * @function removeHash\n\t * @param {string} url\n\t * @returns {string} URL w/o hash tag\n\t */\n\tfunction removeHash(url) {\n\t\tvar index = url.indexOf('#');\n\t\treturn index === -1 ? url : url.substr(0, index);\n\t}\n\n\t/**\n\t * Get hash tag form URL.\n\t * @function getHash\n\t * @param {string} [url]\n\t * @returns {sting} Hash tag\n\t */\n\tfunction getHash(url) {\n\t\tif (url) {\n\t\t\tvar hashPoint = url.indexOf('#');\n\t\t\treturn hashPoint !== -1 ? url.substr(hashPoint + 1) : '';\n\t\t}\n\t\treturn _win.location.hash.substr(1);\n\t}\n\n\t/**\n\t * Check url hash tag to load registered files.\n\t * @function includeRegister\n\t */\n\tfunction includeRegister() {\n\t\tincludeByHash();\n\t\tincludeByScreenSize();\n\t}\n\n\t/**\n\t * Adds all Twitter Bootstrap patches.\n\t * @function bootstrapPatches\n\t */\n\tfunction bootstrapPatches() {\n\t\tvar ua = navigator.userAgent;\n\t\tvar windows8 = ua.match(/MSIE 10\\.0; Windows NT 6\\.2/);\n\t\tvar windowsMobile = ua.match(/IEMobile\\/10\\.0/);\n\t\tvar msViewportStyle, isAndroid;\n\n\t\tif (windows8 || windowsMobile) {\n\t\t\tmsViewportStyle = '<style>@-webkit-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@-moz-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@-ms-viewport { width: ' + (windowsMobile ? 'auto' : 'device-width') + '; }';\n\t\t\tmsViewportStyle += '@-o-viewport { width: device-width; }';\n\t\t\tmsViewportStyle += '@viewport { width: device-width; }<\\/style>';\n\t\t\t$('head').append($(msViewportStyle));\n\t\t}\n\n\t\tisAndroid = (ua.indexOf('Mozilla/5.0') > -1 && ua.indexOf('Android ') > -1 && ua.indexOf('AppleWebKit') > -1 && ua.indexOf('Chrome') === -1);\n\t\tif (isAndroid) {\n\t\t\t$('select.form-control').removeClass('form-control').css('width', '100%');\n\t\t}\n\t}\n\n\t/**\n\t * Run initialisation of base handlers\n\t * @method init\n\t * @param {object} [settings] - MoffClass settings\n\t */\n\tthis.init = function(settings) {\n\t\t// Normalize settings\n\t\tif (!settings) {\n\t\t\tsettings = {};\n\t\t}\n\n\t\t$(function() {\n\t\t\textendSettings(settings);\n\t\t\tsetBreakpoints();\n\t\t\tsetViewMode();\n\t\t\thandleEvents();\n\t\t\tincludeRegister();\n\t\t\tbootstrapPatches();\n\t\t});\n\t};\n\n\t/**\n\t * Show element with transition effect.\n\t * @method appear\n\t * @param {object} element - DOM element\n\t */\n\tthis.appear = function(element, duration) {\n\t\t// Normalize duration\n\t\tduration = duration || 1;\n\n\t\t// Convert to milliseconds\n\t\tduration = duration * 1000;\n\n\t\tif (_moff.supportCSS3('transition')) {\n\t\t\telement.css({\n\t\t\t\t'-webkit-transition': 'opacity' + duration + 'ms',\n\t\t\t\t'-moz-transition': 'opacity' + duration + 'ms',\n\t\t\t\t'-o-transition': 'opacity' + duration + 'ms',\n\t\t\t\ttransition: 'opacity' + duration + 'ms',\n\t\t\t\topacity: 1\n\t\t\t});\n\t\t} else {\n\t\t\t// Fallback if browser does not support CSS3 transition\n\t\t\telement.animate({opacity: 1}, duration);\n\t\t}\n\t};\n\n\t/**\n\t * Execute all reusable events.\n\t * @method reusableEvents\n\t */\n\tthis.reusableEvents = function() {\n\t\tcollectVisibleElements();\n\t\thandleLoadEvents();\n\t\twindowScrollHandler();\n\t};\n\n\t/**\n\t * Determine whether element in view port.\n\t * @method isVisible\n\t * @param {object} element - DOM element\n\t * @returns {boolean}\n\t */\n\tthis.isVisible = function(element) {\n\t\tvar bounds;\n\t\tvar win = $(_win);\n\t\tvar viewport = {\n\t\t\ttop: win.scrollTop(),\n\t\t\tleft: win.scrollLeft()\n\t\t};\n\n\t\telement = $(element);\n\t\tviewport.right = viewport.left + win.width();\n\t\tviewport.bottom = viewport.top + win.height();\n\n\t\tbounds = element.offset();\n\t\tbounds.right = bounds.left + element.outerWidth();\n\t\tbounds.bottom = bounds.top + element.outerHeight();\n\n\t\treturn !(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom);\n\t};\n\n\t/**\n\t * Check for CSS3 property support.\n\t * @method supportCSS3\n\t * @param {string} property - CSS3 property\n\t * @returns {boolean}\n\t */\n\tthis.supportCSS3 = function(property) {\n\t\tvar ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tvar props = (property + ' ' + 'Webkit Moz O ms'.split(' ').join(ucProp + ' ') + ucProp).split(' ');\n\t\tvar length = props.length;\n\t\tvar i = 0;\n\n\t\tfor (; i < length; i++) {\n\t\t\tproperty = props[i];\n\t\t\tif (property.indexOf('-') === -1 && document.createElement(_mode).style[property] !== undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Run callbacks in passed collections.\n\t * @method runCallbacks\n\t * @param {object} collection - Callbacks collection\n\t * @param {object} context - Callback context\n\t */\n\tthis.runCallbacks = function(collection, context, args) {\n\t\t// Normalize collection\n\t\tif (!$.isArray(collection)) {\n\t\t\tcollection = [];\n\t\t}\n\n\t\t// Normalize arguments\n\t\tif (typeof args === 'undefined') {\n\t\t\targs = [];\n\t\t}\n\n\t\t$.each(collection, function(i, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback.apply(context, args);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Add callbacks to view change event.\n\t * @method onViewChange\n\t * @param {function} callback - Callback assigned on view change\n\t */\n\tthis.onViewChange = function(callback) {\n\t\tif (typeof callback === 'function') {\n\t\t\t_changeViewCallbacks.push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Add callback before loading content.\n\t * @method beforeLoad\n\t * @param {function} callback\n\t */\n\tthis.beforeLoad = function(callback) {\n\t\t_beforeLoad.push(callback);\n\t};\n\n\t/**\n\t * Add callback after loading content.\n\t * @method afterLoad\n\t * @param {function} callback\n\t */\n\tthis.afterLoad = function(callback) {\n\t\t_afterLoad.push(callback);\n\t};\n\n\t/**\n\t * Get device view mode\n\t * @method getMode\n\t * @returns {string} view mode\n\t */\n\tthis.getMode = function() {\n\t\tvar viewMode = 'xs';\n\n\t\tif (_matchMediaSupport) {\n\t\t\tif (_matchMedia(_mqLarge).matches) {\n\t\t\t\tviewMode = 'lg';\n\t\t\t} else if (_matchMedia(_mqMedium).matches) {\n\t\t\t\tviewMode = 'md';\n\t\t\t} else if (_matchMedia(_mqSmall).matches) {\n\t\t\t\tviewMode = 'sm';\n\t\t\t}\n\t\t}\n\n\t\treturn viewMode;\n\t};\n\n\t/**\n\t * Register files to be loaded files.\n\t * @method register\n\t * @param {object} obj - Registered object\n\t */\n\tthis.register = function(obj) {\n\t\t// Normalize obj properties\n\t\t_registeredFiles[obj.id] = {\n\t\t\tloaded: false,\n\t\t\tdepend: {\n\t\t\t\tjs: obj.depend && obj.depend.js || [],\n\t\t\t\tcss: obj.depend && obj.depend.css || []\n\t\t\t},\n\t\t\tfiles: {\n\t\t\t\tjs: obj.files && obj.files.js || [],\n\t\t\t\tcss: obj.files && obj.files.css || []\n\t\t\t},\n\t\t\tloadOnScreen: obj.loadOnScreen || [],\n\t\t\tbeforeInclude: obj.beforeInclude || undefined,\n\t\t\tafterInclude: obj.afterInclude || undefined,\n\t\t\tonWindowLoad: obj.onWindowLoad || false\n\t\t};\n\t};\n\n\t/**\n\t * Load registered files by identifier.\n\t * @method include\n\t * @param {string} id - Included object id\n\t * @param {function} [callback] - Function callback\n\t */\n\tthis.include = function(id, callback) {\n\t\tvar _moff = this;\n\t\tvar register = _registeredFiles[id];\n\n\t\t// Make sure files are not loaded\n\t\tif (register.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure to load after window load if onWindowLoad is set\n\t\tif (register.onWindowLoad && !_windowIsLoaded) {\n\t\t\t// Save id to load after window load\n\t\t\t_deferredObjects.push(id);\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as loaded\n\t\tregister.loaded = true;\n\n\t\tif ($.isFunction(register.beforeInclude)) {\n\t\t\tregister.beforeInclude();\n\t\t}\n\n\t\tfunction loadFiles() {\n\t\t\t_moff.loadDepends(register.files, execCallback);\n\t\t}\n\n\t\tthis.loadDepends(register.depend, loadFiles);\n\n\t\tfunction execCallback() {\n\t\t\tif ($.isFunction(register.afterInclude)) {\n\t\t\t\tregister.afterInclude();\n\t\t\t}\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load files and run callback.\n\t * @method loadDepends\n\t * @param {object} depends - Object with js and css files to be loaded\n\t * @param {function} callback - Function executed after files be loaded\n\t */\n\tthis.loadDepends = function(depends, callback) {\n\t\tvar loaded = 0;\n\t\tvar length = 0;\n\t\tvar isCSS = $.isArray(depends.css);\n\t\tvar isJS = $.isArray(depends.js);\n\n\t\tif (isJS) {\n\t\t\tlength += depends.js.length;\n\t\t}\n\n\t\tif (isCSS) {\n\t\t\tlength += depends.css.length;\n\t\t}\n\n\t\tfunction runCallback() {\n\t\t\tloaded++;\n\t\t\tif (loaded === length) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (isJS && depends.js.length) {\n\t\t\t// Load depend js files\n\t\t\tthis.loadJS(depends.js, runCallback);\n\t\t}\n\n\t\tif (isCSS && depends.css.length) {\n\t\t\t// Load depend css files\n\t\t\tthis.loadCSS(depends.css, runCallback);\n\t\t}\n\n\t\tif (!length) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load js file and run callback on load.\n\t * @method loadJS\n\t * @param {array|string} files - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadJS = function(files, callback) {\n\t\tif (!$.isArray(files) && typeof files !== 'string') {\n\t\t\twindow.console.warn('Moff.loadJS source is not array or string');\n\t\t\treturn;\n\t\t}\n\n\t\tif ($.isArray(files)) {\n\t\t\t$.each(files, function(index, src) {\n\t\t\t\tincludeScript(src);\n\t\t\t});\n\t\t} else {\n\t\t\tincludeScript(files);\n\t\t}\n\n\t\tfunction includeScript(src) {\n\t\t\t// If set src attribute before append\n\t\t\t// jQuery will load script with ajax request\n\t\t\t$('<script>')\n\t\t\t\t.on('load', callback)\n\t\t\t\t.appendTo($('body').length && $('body') || $('head'))\n\t\t\t\t.attr('src', src);\n\t\t}\n\t};\n\n\t/**\n\t * Load css file and run callback on load.\n\t * @method loadCSS\n\t * @param {array|string} files - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadCSS = function(files, callback) {\n\t\tif (!$.isArray(files) && typeof files !== 'string') {\n\t\t\twindow.console.warn('Moff.loadCSS source is not array or string');\n\t\t\treturn;\n\t\t}\n\n\t\tif ($.isArray(files)) {\n\t\t\t$.each(files, function(index, href) {\n\t\t\t\tincludeStyle(href);\n\t\t\t});\n\t\t} else {\n\t\t\tincludeStyle(files);\n\t\t}\n\n\t\tfunction includeStyle(href) {\n\t\t\tvar link = $('<link rel=\"stylesheet\">')\n\t\t\t\t.on('load', callback)\n\t\t\t\t.attr('href', files)\n\t\t\t\t.appendTo('head');\n\n\t\t\tlink = link[0];\n\t\t\tlink.onreadystatechange = function() {\n\t\t\t\tvar state = link.readyState;\n\t\t\t\tif (state === 'loaded' || state === 'complete') {\n\t\t\t\t\tlink.onreadystatechange = null;\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Extend Moff object.\n\t * @method extend\n\t * @param {string} name - Module name\n\t * @param {function} Constructor - Module constructor\n\t * @param {boolean} extend [optionally] - Extend from Moff prototype\n\t */\n\tthis.extend = function(name, Constructor, extend) {\n\t\t// Make sure not to override existing properties/methods\n\t\tif (!this.hasOwnProperty(name)) {\n\t\t\tif (extend) {\n\t\t\t\tConstructor.prototype = this;\n\t\t\t\tConstructor.prototype.constructor = Constructor;\n\t\t\t}\n\t\t\tthis[name] = new Constructor();\n\n\t\t\tif (typeof this[name].init === 'function') {\n\t\t\t\tthis[name].init();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Extend classes.\n\t * @method extendClass\n\t * @param {function} child - Child constructor\n\t * @param {function} Parent - Parent constructor\n\t */\n\tthis.extendClass = function(child, Parent) {\n\t\tfunction F() {}\n\n\t\tF.prototype = new Parent();\n\t\tchild.prototype = new F();\n\t\tchild.prototype.constructor = child;\n\t\tchild.parentClass = parent.prototype;\n\t};\n\n\t/**\n\t * Determine whether view mode is changed\n\t * @method viewModeIsChanged\n\t * @returns {boolean}\n\t */\n\tthis.viewModeIsChanged = function() {\n\t\treturn _lastViewMode !== this.getMode();\n\t};\n\n\t/**\n\t * Set or get Moff settings value.\n\t * @method settings\n\t * @param {string} key - Setting name\n\t * @param {*} value - Setting value\n\t * @returns {*}\n\t */\n\tthis.settings = function(key, value) {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn _settings[key];\n\t\t} else {\n\t\t\t_settings[key] = value;\n\t\t}\n\t};\n\n\t/**\n\t * Moff version.\n\t * @type {string}\n\t */\n\tthis.version = '1.0.0';\n\n\t/* test-code */\n\tthis._testonly = {\n\t\t_visibleElements: function() {\n\t\t\treturn _visibleElements;\n\t\t},\n\t\t_deferredObjects: function() {\n\t\t\treturn _deferredObjects;\n\t\t},\n\t\t_registeredFiles: function() {\n\t\t\treturn _registeredFiles;\n\t\t}\n\t};\n\t/* end-test-code */\n}\n\nexport default MoffClass;\n","/**\n * Register and control new Moff modules.\n * @module Module.\n */\nfunction Module() {\n\t'use strict';\n\n\t/**\n\t * @private {Module} _module - Link to object.\n\t * @private\n\t */\n\tvar _module = this;\n\n\t/**\n\t * @private {{}} _moduleObjectStorage - Modules storage.\n\t * @private\n\t */\n\tvar _moduleObjectStorage = {};\n\n\t/**\n\t * @private {{}} _moduleClassStorage - Classes storage.\n\t * @private\n\t */\n\tvar _moduleClassStorage = {};\n\n\t/**\n\t * @private {{}} _eventStore - Events storage.\n\t * @private\n\t */\n\tvar _eventStore = {};\n\n\t/**\n\t * Register module name and object\n\t * @param {object} module - Module object\n\t * @param {string} name - Module name\n\t */\n\tfunction registerModule(module, name) {\n\t\tmodule.prototype = _module;\n\t\tmodule.prototype.constructor = module;\n\n\t\t// Save module in storage\n\t\tif (typeof _moduleClassStorage[name] === 'undefined') {\n\t\t\t_moduleClassStorage[name] = module;\n\t\t}\n\t}\n\n\t/**\n\t * Register module events\n\t * @param {array} events - Array of events\n\t */\n\tfunction registerModuleEvents(events) {\n\t\tif ($.isArray(events)) {\n\t\t\t$.each(events, function() {\n\t\t\t\t_module.registerEvent(this);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Register new module.\n\t * @method register\n\t * @param {string} name - module name\n\t * @param {array} depends - array of js files depends\n\t * @param {function} module - constructor\n\t */\n\tthis.register = function(name, depends, module) {\n\t\t// Normalize arguments\n\t\tif (typeof module === 'undefined') {\n\t\t\tmodule = depends;\n\t\t\tdepends = undefined;\n\t\t}\n\n\t\t// Register new module in the storage\n\t\tif (!_moduleObjectStorage.hasOwnProperty(name)) {\n\t\t\tif (depends) {\n\t\t\t\tthis.loadDepends(depends, function() {\n\t\t\t\t\tregisterModule(module, name);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tregisterModule(module, name);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Initialize registered class\n\t * @method initClass\n\t * @param {string} ClassName - Name of registered class\n\t * @param {object} [params] - Object with additional params\n\t */\n\tthis.initClass = function(ClassName, params) {\n\t\ttry {\n\t\t\t// Create new class object\n\t\t\tvar classObject = new _moduleClassStorage[ClassName]();\n\t\t\tvar storedObject = _moduleObjectStorage[ClassName];\n\n\t\t\t// Store objects in array if there are more then one classes\n\t\t\tif ($.isArray(storedObject)) {\n\t\t\t\t_moduleObjectStorage[ClassName].push(classObject);\n\t\t\t} else if (typeof storedObject !== 'undefined') {\n\t\t\t\t_moduleObjectStorage[ClassName] = [storedObject, classObject];\n\t\t\t} else {\n\t\t\t\t_moduleObjectStorage[ClassName] = classObject;\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\t// Apply all passed data\n\t\t\t\t$.each(params, function(key, value) {\n\t\t\t\t\tclassObject.set(key, value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add module name\n\t\t\tclassObject.moduleName = ClassName;\n\n\t\t\tif (typeof classObject.beforeInit === 'function') {\n\t\t\t\tclassObject.beforeInit();\n\t\t\t}\n\n\t\t\t// Register module events.\n\t\t\tregisterModuleEvents(classObject.events);\n\n\t\t\t// Set module scope\n\t\t\tclassObject.setScope();\n\n\t\t\tif (typeof classObject.init === 'function') {\n\t\t\t\tclassObject.init();\n\t\t\t}\n\n\t\t\tif (typeof classObject.afterInit === 'function') {\n\t\t\t\tclassObject.afterInit();\n\t\t\t}\n\n\t\t\treturn classObject;\n\t\t} catch (error) {\n\t\t\twindow.console.error(error);\n\t\t}\n\t};\n\n\t/**\n\t * Register new event.\n\t * @method registerEvent\n\t * @param {string} name - Event name\n\t */\n\tthis.registerEvent = function(name) {\n\t\tif (typeof _eventStore[name] === 'undefined') {\n\t\t\t_eventStore[name] = [];\n\t\t}\n\t};\n\n\t/**\n\t * Assign callback for event.\n\t * @method assignForEvent\n\t * @param {string} name - Event name\n\t * @param {function} callback - Event callback\n\t */\n\tthis.assignForEvent = function(name, callback) {\n\t\t// Register if assigned event is not registered yet.\n\t\t// Need in case when some module assign to another module event before its registration.\n\t\tthis.registerEvent(name);\n\n\t\tif (typeof callback === 'function') {\n\t\t\t_eventStore[name].push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Trigger event by name.\n\t * @method triggerEvent\n\t * @param {string} name - Event name\n\t */\n\tthis.triggerEvent = function(name) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof _eventStore[name] !== 'undefined') {\n\t\t\t_module.runCallbacks(_eventStore[name], this, args);\n\t\t}\n\t};\n\n\t/**\n\t * Get registered module by name.\n\t * @method get\n\t * @param {string} name - module name\n\t * @return {object|undefined} module object or undefined\n\t */\n\tthis.get = function(name) {\n\t\treturn (_moduleObjectStorage.hasOwnProperty(name) && _moduleObjectStorage[name]) || undefined;\n\t};\n\n\t/**\n\t * Set object any property.\n\t * @method set\n\t * @param {string} prop - Property name\n\t * @param {mixed} value - Property value\n\t */\n\tthis.set = function(prop, value) {\n\t\tthis[prop] = value;\n\t};\n\n\t/**\n\t * Remove registered module by name.\n\t * @method remove\n\t */\n\tthis.remove = function() {\n\t\tvar name = this.moduleName;\n\t\tvar id = this.id;\n\n\t\t// Be sure to remove existing module\n\t\tif ($.isArray(_moduleObjectStorage[name])) {\n\t\t\t$.each(_moduleObjectStorage[name], function(index, object) {\n\t\t\t\tif (object.id && object.id === id) {\n\t\t\t\t\t_moduleObjectStorage[name].splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (_moduleObjectStorage[name].length === 1) {\n\t\t\t\t_moduleObjectStorage[name] = _moduleObjectStorage[name][0];\n\t\t\t}\n\t\t} else {\n\t\t\tdelete _moduleObjectStorage[name];\n\t\t}\n\t};\n\n\t/**\n\t * Register module scope by scope selector.\n\t * @method setScope\n\t */\n\tthis.setScope = function() {\n\t\tif (typeof this.scopeSelector !== 'undefined') {\n\t\t\tthis.scope = $(this.scopeSelector);\n\t\t}\n\t};\n\n\t/**\n\t * Find element in module scope.\n\t * @method find\n\t * @param {string} selector - jQuery selector.\n\t * @returns {object} jQuery object.\n\t */\n\tthis.find = function(selector) {\n\t\treturn this.scope.find(selector);\n\t};\n}\n\nexport default Module;\n","/**\n * Detects OS, browser and another features support.\n * @module Detect\n */\nfunction Detect() {\n\n\t/**\n\t * @property {Window} _win - Link to Window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {Detect} _detect - Link to this object.\n\t * @private\n\t */\n\tvar _detect = this;\n\n\t/**\n\t * @property {string} _ua - Link to user agent.\n\t * @private\n\t */\n\tvar _ua = window.navigator.userAgent.toLowerCase();\n\n\t/**\n\t * @property {HTMLDocument} _doc - Link to document object.\n\t * @private\n\t */\n\tvar _doc = document;\n\n\t/**\n\t * @property {{}} browser - Object with browser details.\n\t */\n\tthis.browser = {};\n\n\t/**\n\t * @property {{}} OS - Object with OS details.\n\t */\n\tthis.OS = {};\n\n\t/**\n\t * HTML5 support list.\n\t * @function html5Support\n\t */\n\tfunction html5Support() {\n\t\t// Determine whether browser support touch JavaScript API\n\t\t// It does not mean touch device\n\t\t_detect.touch = !!(('ontouchstart' in _win) || _win.DocumentTouch && _doc instanceof _win.DocumentTouch);\n\t\t_detect.applicationCache = !!_win.applicationCache;\n\t\t_detect.canvas = (function() {\n\t\t\tvar canvas = _doc.createElement('canvas');\n\t\t\treturn !!(canvas.getContext && canvas.getContext('2d'));\n\t\t})();\n\t\t_detect.canvastext = !!(_detect.canvas && $.isFunction(_doc.createElement('canvas').getContext('2d').fillText));\n\t\t_detect.draganddrop = (function() {\n\t\t\tvar div = _doc.createElement('div');\n\t\t\treturn ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n\t\t})();\n\t\t_detect.hashchange = !!('onhashchange' in _win && (typeof _doc.documentMode === 'undefined' || _doc.documentMode > 7));\n\t\t_detect.history = !!(_win.history && history.pushState);\n\t\t_detect.postmessage = !!_win.postMessage;\n\t\t_detect.websockets = !!('WebSocket' in _win || 'MozWebSocket' in _win);\n\t\t_detect.websqldatabase = !!_win.openDatabase;\n\t\t_detect.webworkers = !!_win.Worker;\n\t\t_detect.audio = (function() {\n\t\t\tvar audio = _doc.createElement('audio');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!audio.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '');\n\t\t\t\t\tbool.mp3 = audio.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\t\t\t\t\tbool.wav = audio.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '');\n\t\t\t\t\tbool.m4a = (audio.canPlayType('audio/x-m4a;') || audio.canPlayType('audio/aac;')).replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {\t\t\t}\n\n\t\t\treturn bool;\n\t\t})();\n\t\t_detect.video = (function() {\n\t\t\tvar video = _doc.createElement('video');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!video.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = video.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\t\t\t\t\tbool.h264 = video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\t\t\t\t\tbool.webm = video.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch(error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\t\t_detect.indexeddb = (function() {\n\t\t\tvar props = ['indexeddb', 'WebkitIndexeddb', 'MozIndexeddb', 'OIndexeddb', 'msIndexeddb'];\n\t\t\tfor (var i in props) {\n\t\t\t\tif (props.hasOwnProperty(i)) {\n\t\t\t\t\tvar item = _win[props[i]];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\tif (item === false) {\n\t\t\t\t\t\t\treturn props[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof item === 'function') {\n\t\t\t\t\t\t\treturn item.bind(_win);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t})();\n\t\t_detect.localstorage = (function() {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(_mode, _mode);\n\t\t\t\tlocalStorage.removeItem(_mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t\t_detect.sessionstorage = (function() {\n\t\t\ttry {\n\t\t\t\tsessionStorage.setItem(_mode, _mode);\n\t\t\t\tsessionStorage.removeItem(_mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t}\n\n\t/**\n\t * Detect browser\n\t * @function detectBrowser\n\t */\n\tfunction detectBrowser() {\n\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(msie) ([\\w.]+)/.exec(_ua) ||\n\t\t\t_ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(_ua) || [];\n\n\t\tif (match[1]) {\n\t\t\t_detect.browser[match[1]] = true;\n\t\t}\n\n\t\tif (match[2]) {\n\t\t\t_detect.browser.version = match[2];\n\t\t}\n\n\t\tif (_detect.browser.chrome) {\n\t\t\t_detect.browser.webkit = true;\n\t\t} else if (_detect.browser.webkit) {\n\t\t\t_detect.browser.safari = true;\n\t\t}\n\t}\n\n\t/**\n\t * Detect Operating System\n\t * @function detectOS\n\t */\n\tfunction detectOS() {\n\t\t_detect.OS.iOS = /(ipad|iphone|ipod)/g.test(_ua);\n\t\t_detect.OS.macOS = _ua.indexOf('mac') > -1;\n\t\t_detect.OS.windows = _ua.indexOf('win') > -1;\n\t\t_detect.OS.android = _ua.indexOf('android') > -1;\n\t}\n\n\tthis.init = function() {\n\t\thtml5Support();\n\t\tdetectBrowser();\n\t\tdetectOS();\n\t}\n}\n\nexport default Detect;\n","import Core from './core';\nimport Module from './module';\nimport Detect from './detect';\n\nvar Moff = this.Moff = new Core();\nMoff.extend('module', Module);\nMoff.extend('detect', Detect);\n"],"sourceRoot":"/source/"}