{"version":3,"sources":["moff.min.js","packages/core.e6.js","packages/module.e6.js","packages/detect.e6.js","packages/event.e6.js"],"names":["$$core$e6$$Core","handleEvents","_win","addEventListener","windowLoadHandler","_matchMediaSupport","_matchMedia","_mqLarge","addListener","resizeHandler","_mqMedium","_mqSmall","handlePopstate","_moff","handleDataEvents","_windowIsLoaded","each","_deferredObjects","i","obj","include","id","callback","mql","matches","viewModeIsChanged","setViewMode","runCallbacks","_changeViewCallbacks","getMode","checkDataScreen","element","screen","getAttribute","checkScreenMode","split","modes","Array","isArray","length","indexOf","extendSettings","settings","readSettings","property","value","_settings","setBreakpoints","breakpoints","replace","sm","md","lg","_lastViewMode","load","url","ajax","type","success","data","handleLink","title","href","target","push","loadModule","handleUrlTemplate","removeAttribute","_beforeLoad","detect","history","Date","now","pushState","elemId","_historyData","loadContent","_afterLoad","arguments","applyContent","html","_doc","querySelector","innerHTML","removeHash","_cache","event","state","index","substr","loadByScreenSize","screenAttribute","querySelectorAll","this","includeRegister","_registeredFiles","object","loadOnScreen","nodeList","node","Object","prototype","toString","call","test","hasOwnProperty","nodeType","window","moffConfig","init","document","matchMedia","_domLoadedCallbacks","_domIsLoaded","loadOnHover","cacheLiveTime","_dataEvent","handled","toLowerCase","$","isMobile","setTimeout","preventDefault","supportCSS3","ucProp","charAt","toUpperCase","slice","props","join","undefined","createElement","style","options","params","key","encodeURIComponent","xhr","XMLHttpRequest","open","setRequestHeader","contentType","onload","status","response","error","send","collection","context","args","apply","onViewChange","beforeLoad","afterLoad","viewMode","register","loaded","depend","js","css","file","beforeInclude","afterInclude","onWindowLoad","loadFiles","loadAssets","execCallback","loadJSArray","src","jsIndex","loadJS","runCallback","isCSS","isJS","loadCSS","console","warn","script","hasCallback","appendChild","link","setAttribute","onreadystatechange","readyState","extend","name","Constructor","constructor","reopen","methods","extendClass","child","Parent","F","parentClass","arg","version","$$module$e6$$Module","registerModuleEvents","events","_module","add","_moduleObjectStorage","_moduleClassStorage","scopeSelector","scope","beforeInit","afterInit","initClass","ClassName","initialize","classObject","moduleObject","storedObject","moduleName","setScope","get","getAll","remove","removeObject","splice","find","selector","$$detect$e6$$Detect","html5Support","_detect","touch","DocumentTouch","applicationCache","canvas","getContext","canvasText","fillText","dragAndDrop","div","hashChange","documentMode","postMessage","webSockets","webWorkers","Worker","audio","bool","canPlayType","ogg","mp3","wav","m4a","video","h264","webm","indexedDB","item","bind","localStorage","setItem","mode","removeItem","sessionStorage","detectBrowser","match","exec","_ua","browser","chrome","webkit","detectOS","OS","iOS","macOS","windows","android","windowsPhone","detectMobileDevice","navigator","userAgent","$$event$e6$$Event","_eventStore","on","trigger","$$core$e6$$default","$$module$e6$$default","$$detect$e6$$default","$$event$e6$$default","packages$loader$e6$$Moff","Moff"],"mappings":"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","file":"moff.min.js","sourcesContent":[null,"/**\n * Moff class\n * @constructor\n */\nfunction Core() {\n\t/**\n\t * @property {Core} _moff - Link to Core object\n\t * @private\n\t */\n\tvar _moff = this;\n\n\t/**\n\t * @property {window} _win - Link to window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {HTMLDocument} _doc - Local link to document object.\n\t * @private\n\t */\n\tvar _doc = _win.document;\n\n\t/**\n\t * @property {{}} _registeredFiles - Object to register files to be loaded.\n\t * @private\n\t */\n\tvar _registeredFiles = {};\n\n\t/**\n\t * @property {Array} _deferredObjects - Deferred files.\n\t * @private\n\t */\n\tvar _deferredObjects = [];\n\n\t/**\n\t * @property {boolean} _matchMediaSupport - Match media support and link.\n\t * @private\n\t */\n\tvar _matchMediaSupport = !!(_win.matchMedia && _win.matchMedia('screen').addListener);\n\n\t/**\n\t * @property {boolean|Window.matchMedia|*} _matchMedia - Short link to matchMedia.\n\t * @private\n\t */\n\tvar _matchMedia = _matchMediaSupport && _win.matchMedia;\n\n\t/**\n\t * @property {string} _mqSmall - Media query breakpoint conditions.\n\t * @private\n\t */\n\tvar _mqSmall = '(min-width: %dpx)';\n\n\t/**\n\t * @type {string} _mqMedium - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqMedium = _mqSmall;\n\n\t/**\n\t * @type {string} _mqLarge - Link to _mqSmall\n\t * @private\n\t */\n\tvar _mqLarge = _mqSmall;\n\n\t/**\n\t * @property {string} _lastViewMode - List name of device screen mode\n\t * @private\n\t */\n\tvar _lastViewMode;\n\n\t/**\n\t * @property {Array} _changeViewCallbacks - Array of callbacks to trigger on view change.\n\t * @private\n\t */\n\tvar _changeViewCallbacks = [];\n\n\t/**\n\t * @property {Array} _domLoadedCallbacks - Array of callbacks to trigger on DOMContentLoaded event.\n\t * @private\n\t */\n\tvar _domLoadedCallbacks = [];\n\n\t/**\n\t * @property {boolean} _windowIsLoaded - Flag to determine whether the window is loaded.\n\t * @private\n\t */\n\tvar _windowIsLoaded = false;\n\n\t/**\n\t * @property {boolean} _domIsLoaded - Flag to determine whether the DOM is loaded.\n\t * @private\n\t */\n\tvar _domIsLoaded = false;\n\n\t/**\n\t * @property {Array} _beforeLoad - Run these callbacks before content loading.\n\t * @private\n\t */\n\tvar _beforeLoad = [];\n\n\t/**\n\t * @property {Array} _afterLoad - Run these callbacks after content is loaded.\n\t * @private\n\t */\n\tvar _afterLoad = [];\n\n\t/**\n\t * @property {{}} _cache - Preloaded data cache\n\t * @private\n\t */\n\tvar _cache = {};\n\n\t/**\n\t * @property {object} _settings - Local default settings.\n\t * @private\n\t */\n\tvar _settings = {\n\t\tbreakpoints: {\n\t\t\tsm: 768,\n\t\t\tmd: 992,\n\t\t\tlg: 1200\n\t\t},\n\n\t\tloadOnHover: true,\n\t\tcacheLiveTime: 2000\n\t};\n\n\t/**\n\t * @property {string} _dataEvent - Data load event selector.\n\t * @private\n\t */\n\tvar _dataEvent = 'data-load-target';\n\n\t/**\n\t * @property {{}} _historyData - History data store.\n\t * @private\n\t */\n\tvar _historyData = {};\n\n\t/**\n\t * Handle elements event.\n\t * @function handleEvents\n\t */\n\tfunction handleEvents() {\n\t\t_win.addEventListener('load', windowLoadHandler, false);\n\n\t\t// Check for addListener method\n\t\t// because respond.js emulates matchMedia method\n\t\tif (_matchMediaSupport) {\n\t\t\t_matchMedia(_mqLarge).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqMedium).addListener(resizeHandler);\n\t\t\t_matchMedia(_mqSmall).addListener(resizeHandler);\n\t\t} else {\n\t\t\t// If matchMedia is not supported use resize fallback\n\t\t\t_win.addEventListener('resize', resizeHandler, false);\n\t\t}\n\n\t\t_win.addEventListener('popstate', handlePopstate, false);\n\t\t_moff.handleDataEvents();\n\t}\n\n\t/**\n\t * Window load event handler.\n\t * @function windowLoadHandler\n\t */\n\tfunction windowLoadHandler() {\n\t\t_windowIsLoaded = true;\n\n\t\t// Load deferred files.\n\t\t// These files included with Moff.include method before window load event.\n\t\t_moff.each(_deferredObjects, function(i, obj) {\n\t\t\t_moff.include(obj.id, obj.callback);\n\t\t});\n\t}\n\n\t/**\n\t * Window resize or matchMedia event listener handler.\n\t * @function resizeHandler\n\t * @param {object} mql - MediaQueryList object\n\t */\n\tfunction resizeHandler(mql) {\n\t\tif ((_matchMediaSupport && mql.matches) || viewModeIsChanged()) {\n\t\t\tsetViewMode();\n\n\t\t\t_moff.runCallbacks(_changeViewCallbacks, _moff, [_moff.getMode()]);\n\t\t\t_moff.handleDataEvents();\n\t\t}\n\t}\n\n\t/**\n\t * Handle load events.\n\t * @method handleDataEvents\n\t */\n\tthis.handleDataEvents = function() {\n\t\tvar element, event, url;\n\n\t\tloadByScreenSize();\n\t\tincludeRegister();\n\n\t\t_moff.each(_doc.querySelectorAll('[' + _dataEvent + ']'), function() {\n\t\t\telement = this;\n\n\t\t\tif (element.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent = (element.getAttribute('data-load-event') || 'click').toLowerCase();\n\n\t\t\tif (event === 'dom') {\n\t\t\t\t_moff.$(function() {\n\t\t\t\t\thandleLink(element);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (event === 'click' && _settings.loadOnHover && !_moff.detect.isMobile) {\n\t\t\t\t\telement.addEventListener('mouseenter', function() {\n\t\t\t\t\t\telement = this;\n\t\t\t\t\t\turl = element.href || element.getAttribute('data-load-url');\n\t\t\t\t\t\turl = removeHash(url);\n\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\turl = handleUrlTemplate(element, url);\n\n\t\t\t\t\t\t\tload(url, function(data) {\n\t\t\t\t\t\t\t\t_cache[url] = data;\n\n\t\t\t\t\t\t\t\t// Clear cache each n seconds to prevent memory leak.\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tdelete _cache[url];\n\t\t\t\t\t\t\t\t}, _settings.cacheLiveTime);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\n\t\t\t\telement.addEventListener(event, function(event) {\n\t\t\t\t\thandleLink(this);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}, false);\n\t\t\t}\n\n\t\t\telement.handled = true;\n\t\t});\n\t};\n\n\t/**\n\t * Check element for data load screen.\n\t * @function checkDataScreen\n\t * @param {object} element - jQuery object\n\t * @returns {boolean} Return true if no data load screen\n\t */\n\tfunction checkDataScreen(element) {\n\t\tvar screen = element.getAttribute('data-load-screen');\n\t\treturn screen ? checkScreenMode(screen.split(' ')) : true;\n\t}\n\n\tfunction checkScreenMode(modes) {\n\t\treturn Array.isArray(modes) && modes.length && modes.indexOf(_moff.getMode()) !== -1;\n\t}\n\n\t/**\n\t * Extend Core settings\n\t * @function extendSettings\n\t */\n\tfunction extendSettings() {\n\t\tvar settings = readSettings();\n\n\t\t_moff.each(settings, function(property, value) {\n\t\t\t_settings[property] = settings[property];\n\t\t});\n\t}\n\n\t/**\n\t * Setup breakpoints for Media Queries.\n\t * @function setBreakpoints\n\t */\n\tfunction setBreakpoints() {\n\t\tvar breakpoints;\n\n\t\tif (_settings.breakpoints && _matchMediaSupport) {\n\t\t\tbreakpoints = _settings.breakpoints;\n\t\t\t_mqSmall = _mqSmall.replace('%d', breakpoints.sm);\n\t\t\t_mqMedium = _mqMedium.replace('%d', breakpoints.md);\n\t\t\t_mqLarge = _mqLarge.replace('%d', breakpoints.lg);\n\t\t}\n\t}\n\n\t/**\n\t * Determine whether view mode is changed\n\t * @function viewModeIsChanged\n\t * @returns {boolean}\n\t */\n\tfunction viewModeIsChanged() {\n\t\treturn _lastViewMode !== _moff.getMode();\n\t}\n\n\t/**\n\t * Change last view mode.\n\t * @function setViewMode\n\t */\n\tfunction setViewMode() {\n\t\t_lastViewMode = _moff.getMode();\n\t}\n\n\t/**\n\t * Load data.\n\t * @param {string} url - Load url\n\t * @param {function} callback - Callback on success\n\t */\n\tfunction load(url, callback) {\n\t\t_moff.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'GET',\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\tcallback(data);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Links click event handler.\n\t * @function handleLink\n\t * @param {object} element - DOM element\n\t * @returns {boolean} false\n\t */\n\tfunction handleLink(element) {\n\t\tvar title = element.title || '';\n\t\tvar url = element.href || element.getAttribute('data-load-url');\n\t\tvar target = element.getAttribute('data-load-target');\n\t\tvar push = element.getAttribute('data-push-url');\n\t\tvar loadModule = element.getAttribute('data-load-module');\n\t\tvar id;\n\n\t\tif (url) {\n\t\t\turl = handleUrlTemplate(element, url);\n\t\t\t// Remove data attributes not to handle twice\n\t\t\telement.removeAttribute('data-load-event');\n\t\t\t_moff.runCallbacks(_beforeLoad, element);\n\n\t\t\tif (_moff.detect.history && push) {\n\t\t\t\tid = Date.now();\n\t\t\t\t_win.history.pushState({elemId: id, url: url}, title, url);\n\t\t\t\t_historyData[id] = element;\n\t\t\t}\n\n\t\t\tloadContent(element, url, target, function() {\n\t\t\t\t// If element has data-load-module attribute\n\t\t\t\t// include this module and then run after load callbacks.\n\t\t\t\tif (loadModule) {\n\t\t\t\t\t_moff.include(loadModule, function() {\n\t\t\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle url for templates.\n\t * @function handleUrlTemplate\n\t * @param {object} element - DOM element\n\t * @param {string} url - Handled url\n\t * @returns {string} handled url\n\t */\n\tfunction handleUrlTemplate(element, url) {\n\t\treturn url.replace(/\\{\\{(.*?)\\}\\}/g, function() {\n\t\t\treturn element.getAttribute(arguments[1]);\n\t\t});\n\t}\n\n\t/**\n\t * Load content and append into target.\n\t * @function loadContent\n\t * @param {object} element - DOM element\n\t * @param {string} url - Content URL\n\t * @param {string} target - Target element selector\n\t * @param {function} callback\n\t */\n\tfunction loadContent(element, url, target, callback) {\n\t\tvar title;\n\n\t\turl = removeHash(url);\n\n\t\tfunction applyContent(html) {\n\t\t\ttitle = element.getAttribute('data-page-title');\n\t\t\t_doc.querySelector(target).innerHTML = html;\n\n\t\t\tif (title) {\n\t\t\t\t_doc.title = title;\n\t\t\t}\n\n\t\t\t// Handle events of new added elements\n\t\t\t_moff.handleDataEvents();\n\t\t\tcallback();\n\t\t}\n\n\t\t// If data is cached load it from cache\n\t\tif (_cache[url]) {\n\t\t\tapplyContent(_cache[url]);\n\t\t} else {\n\t\t\tload(url, applyContent);\n\t\t}\n\t}\n\n\t/**\n\t * Window popstate event handler.\n\t * @function handlePopstate\n\t * @param {object} event - Event object\n\t */\n\tfunction handlePopstate(event) {\n\t\tvar state = event.state;\n\t\tvar element;\n\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\telement = _historyData[state.elemId];\n\t\tif (!checkDataScreen(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar url = state.url;\n\t\tvar target = element.getAttribute('data-load-target');\n\n\t\t_moff.runCallbacks(_beforeLoad, element);\n\t\tloadContent(element, url, target, function() {\n\t\t\t_moff.runCallbacks(_afterLoad, element);\n\t\t});\n\t}\n\n\t/**\n\t * Remove hash tag from URL.\n\t * @function removeHash\n\t * @param {string} url\n\t * @returns {string} URL w/o hash tag\n\t */\n\tfunction removeHash(url) {\n\t\tvar index = url.indexOf('#');\n\t\treturn index === -1 ? url : url.substr(0, index);\n\t}\n\n\t/**\n\t * Loads content of elements if data-load-screen set.\n\t * @function loadByScreenSize\n\t */\n\tfunction loadByScreenSize() {\n\t\tvar screenAttribute = 'data-load-screen';\n\t\tvar element;\n\n\t\t_moff.each(_doc.querySelectorAll('[' + screenAttribute + ']'), function() {\n\t\t\telement = this;\n\n\t\t\tif (checkDataScreen(element)) {\n\t\t\t\telement.removeAttribute(screenAttribute);\n\t\t\t\thandleLink(element);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Check url hash tag to load registered files.\n\t * @function includeRegister\n\t */\n\tfunction includeRegister() {\n\t\t_moff.each(_registeredFiles, function(id, object) {\n\t\t\t// Don't load register if it is used in data-load-module attribute,\n\t\t\t// because it will be included after content of element be loaded.\n\t\t\tif (checkScreenMode(object.loadOnScreen) && !_doc.querySelectorAll('[data-load-module=\"' + id + '\"]').length) {\n\t\t\t\t_moff.include(id);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction nodeList(node) {\n\t\tvar type = Object.prototype.toString.call(node);\n\n\t\treturn typeof /^\\[object (HTMLCollection|NodeList)\\]$/.test(type)\n\t\t\t&& node.hasOwnProperty('length')\n\t\t\t&& (node.length === 0 || (typeof node[0] === 'object' && node[0].nodeType > 0));\n\t}\n\n\t/**\n\t * Gets Moff settings\n\t * @function readSettings\n\t * @returns {{}}\n\t */\n\tfunction readSettings() {\n\t\treturn window.moffConfig || {};\n\t}\n\n\t/**\n\t *\n\t * @function init\n\t */\n\tfunction init() {\n\t\textendSettings();\n\t\tsetBreakpoints();\n\t\tsetViewMode();\n\t\thandleEvents();\n\t}\n\n\t/**\n\t * Check for CSS3 property support.\n\t * @method supportCSS3\n\t * @param {string} property - CSS3 property\n\t * @returns {boolean}\n\t */\n\tthis.supportCSS3 = function(property) {\n\t\tvar ucProp = property.charAt(0).toUpperCase() + property.slice(1);\n\t\tvar props = (property + ' ' + 'Webkit Moz O ms'.split(' ').join(ucProp + ' ') + ucProp).split(' ');\n\t\tvar length = props.length;\n\t\tvar i = 0;\n\n\t\tfor (; i < length; i++) {\n\t\t\tproperty = props[i];\n\t\t\tif (property.indexOf('-') === -1 && document.createElement('div').style[property] !== undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tthis.ajax = function(options) {\n\t\tvar params = [];\n\t\tvar data;\n\n\t\t// Make type upper case\n\t\toptions.type = options.type.toUpperCase();\n\n\t\t// Set data object to send them as POST or GET params\n\t\tif (typeof options.data === 'object') {\n\t\t\tdata = options.data;\n\n\t\t\tthis.each(data, function(key, value) {\n\t\t\t\tparams.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t\t});\n\n\t\t\toptions.data = params.join('&');\n\t\t}\n\n\t\t// Here data has additional GET params\n\t\t// Object could not be send with GET method\n\t\tif (options.type === 'GET' && options.data) {\n\t\t\toptions.url += (options.url.indexOf('?') !== -1 ? '&' : '?') + options.data.replace(/%20/g, '+');\n\t\t\toptions.data = null;\n\t\t}\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open(options.type, options.url, true);\n\n\t\txhr.setRequestHeader('Content-Type', options.contentType || 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n\t\txhr.onload = function() {\n\t\t\tvar status = this.status;\n\t\t\tif (status >= 200 && status < 300 || status === 304) {\n\t\t\t\toptions.success(this.response, this);\n\t\t\t} else {\n\t\t\t\toptions.error(this);\n\t\t\t}\n\t\t};\n\n\t\txhr.send(options.data);\n\t};\n\n\t/**\n\t * Run callbacks in passed collections.\n\t * @method runCallbacks\n\t * @param {object} collection - Callbacks collection\n\t * @param {object} context - Callback context\n\t * @param {array} [args] - Callback arguments\n\t */\n\tthis.runCallbacks = function(collection, context, args) {\n\t\t// Normalize collection\n\t\tif (!Array.isArray(collection)) {\n\t\t\tcollection = [];\n\t\t}\n\n\t\t// Normalize arguments\n\t\tif (typeof args === 'undefined') {\n\t\t\targs = [];\n\t\t}\n\n\t\t_moff.each(collection, function(i, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback.apply(context, args);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Add callbacks to view change event.\n\t * @method onViewChange\n\t * @param {function} callback - Callback assigned on view change\n\t */\n\tthis.onViewChange = function(callback) {\n\t\tif (typeof callback === 'function') {\n\t\t\t_changeViewCallbacks.push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Add callback before loading content.\n\t * @method beforeLoad\n\t * @param {function} callback\n\t */\n\tthis.beforeLoad = function(callback) {\n\t\t_beforeLoad.push(callback);\n\t};\n\n\t/**\n\t * Add callback after loading content.\n\t * @method afterLoad\n\t * @param {function} callback\n\t */\n\tthis.afterLoad = function(callback) {\n\t\t_afterLoad.push(callback);\n\t};\n\n\t/**\n\t * Get device view mode\n\t * @method getMode\n\t * @returns {string} view mode\n\t */\n\tthis.getMode = function() {\n\t\tvar viewMode = 'xs';\n\n\t\tif (_matchMediaSupport) {\n\t\t\tif (_matchMedia(_mqLarge).matches) {\n\t\t\t\tviewMode = 'lg';\n\t\t\t} else if (_matchMedia(_mqMedium).matches) {\n\t\t\t\tviewMode = 'md';\n\t\t\t} else if (_matchMedia(_mqSmall).matches) {\n\t\t\t\tviewMode = 'sm';\n\t\t\t}\n\t\t}\n\n\t\treturn viewMode;\n\t};\n\n\t/**\n\t * Register files to be loaded files.\n\t * @method register\n\t * @param {object} obj - Registered object\n\t */\n\tthis.register = function(obj) {\n\t\t// Normalize obj properties\n\t\t_registeredFiles[obj.id] = {\n\t\t\tloaded: false,\n\t\t\tdepend: {\n\t\t\t\tjs: obj.depend && obj.depend.js || [],\n\t\t\t\tcss: obj.depend && obj.depend.css || []\n\t\t\t},\n\t\t\tfile: {\n\t\t\t\tjs: obj.file && obj.file.js || [],\n\t\t\t\tcss: obj.file && obj.file.css || []\n\t\t\t},\n\t\t\tloadOnScreen: obj.loadOnScreen || [],\n\t\t\tbeforeInclude: obj.beforeInclude || undefined,\n\t\t\tafterInclude: obj.afterInclude || undefined,\n\t\t\tonWindowLoad: obj.onWindowLoad || false\n\t\t};\n\t};\n\n\t/**\n\t * Load registered files by identifier.\n\t * @method include\n\t * @param {string} id - Included object id\n\t * @param {function} [callback] - Function callback\n\t */\n\tthis.include = function(id, callback) {\n\t\tvar register = _registeredFiles[id];\n\n\t\t// Make sure files are not loaded\n\t\tif (register.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure to load after window load if onWindowLoad is true\n\t\tif (register.onWindowLoad && !_windowIsLoaded) {\n\t\t\t// Save id to load after window load\n\t\t\t_deferredObjects.push({id: id, callback: callback});\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark as loaded\n\t\tregister.loaded = true;\n\n\t\tif (typeof register.beforeInclude === 'function') {\n\t\t\tregister.beforeInclude();\n\t\t}\n\n\t\tfunction loadFiles() {\n\t\t\t_moff.loadAssets(register.file, execCallback);\n\t\t}\n\n\t\tthis.loadAssets(register.depend, loadFiles);\n\n\t\tfunction execCallback() {\n\t\t\tif (typeof register.afterInclude === 'function') {\n\t\t\t\tregister.afterInclude();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load files and run callback.\n\t * @method loadAssets\n\t * @param {object} depend - Object with js and css files to be loaded\n\t * @param {function} callback - Function executed after files be loaded\n\t */\n\tthis.loadAssets = function(depend, callback) {\n\t\tvar loaded = 0;\n\t\tvar length = 0;\n\t\tvar jsIndex = 0;\n\t\tvar isCSS = Array.isArray(depend.css);\n\t\tvar isJS = Array.isArray(depend.js);\n\n\t\tif (isJS) {\n\t\t\tlength += depend.js.length;\n\t\t}\n\n\t\tif (isCSS) {\n\t\t\tlength += depend.css.length;\n\t\t}\n\n\t\tfunction loadJSArray() {\n\t\t\tvar src = depend.js[jsIndex];\n\n\t\t\tif (src) {\n\t\t\t\t_moff.loadJS(src, function() {\n\t\t\t\t\tjsIndex++;\n\t\t\t\t\tloaded++;\n\n\t\t\t\t\tif (loaded === length) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloadJSArray();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tloadJSArray();\n\n\t\tfunction runCallback() {\n\t\t\tloaded++;\n\n\t\t\tif (loaded === length) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (isCSS && depend.css.length) {\n\t\t\t// Load depend css files\n\t\t\tthis.each(depend.css, function(i, href) {\n\t\t\t\t_moff.loadCSS(href, runCallback);\n\t\t\t});\n\t\t}\n\n\t\tif (!length) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load js file and run callback on load.\n\t * @method loadJS\n\t * @param {string} src - Array or path of loaded files\n\t * @param {function} [callback] - On load event callback\n\t */\n\tthis.loadJS = function(src, callback) {\n\t\tif (typeof src !== 'string') {\n\t\t\twindow.console.warn('Moff.loadJS source is not a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar script;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load script if it is not existing on the page\n\t\tif (!_doc.querySelector('script[src=\"' + src + '\"]')) {\n\t\t\t// If set src attribute before append\n\t\t\t// jQuery will load script with ajax request\n\t\t\tscript = _doc.createElement('script');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tscript.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tscript.src = src;\n\t\t\t_doc.querySelector('body').appendChild(script);\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Load css file and run callback on load.\n\t * @method loadCSS\n\t * @param {string} href - Array or path of loaded files\n\t * @param {function} callback - On load event callback\n\t */\n\tthis.loadCSS = function(href, callback) {\n\t\tif (typeof href !== 'string') {\n\t\t\twindow.console.warn('Moff.loadCSS source is a string');\n\t\t\treturn;\n\t\t}\n\n\t\tvar link;\n\t\tvar hasCallback = typeof callback === 'function';\n\n\t\t// Load link if it is not existing on the page\n\t\tif (!_doc.querySelector('link[href=\"' + href + '\"]')) {\n\t\t\tlink = _doc.createElement('link');\n\n\t\t\tif (hasCallback) {\n\t\t\t\tlink.addEventListener('load', callback, false);\n\t\t\t}\n\n\t\t\tlink.href = href;\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\t_doc.querySelector('head').appendChild(link);\n\n\t\t\tlink.onreadystatechange = function() {\n\t\t\t\tvar state = link.readyState;\n\t\t\t\tif (state === 'loaded' || state === 'complete') {\n\t\t\t\t\tlink.onreadystatechange = null;\n\n\t\t\t\t\tif (hasCallback) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else if (hasCallback) {\n\t\t\tcallback();\n\t\t}\n\t};\n\n\t/**\n\t * Extend Moff object.\n\t * @method extend\n\t * @param {string} name - Module name\n\t * @param {function} Constructor - Module constructor\n\t * @param {boolean} extend [optionally] - Extend from Moff prototype\n\t */\n\tthis.extend = function(name, Constructor, extend) {\n\t\t// Make sure not to override existing properties/methods\n\t\tif (!this.hasOwnProperty(name)) {\n\t\t\tif (extend) {\n\t\t\t\tConstructor.prototype = this;\n\t\t\t\tConstructor.prototype.constructor = Constructor;\n\t\t\t}\n\n\t\t\tthis[name] = new Constructor();\n\n\t\t\tif (typeof this[name].init === 'function') {\n\t\t\t\tthis[name].init();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Overwrites and adds object methods and properties.\n\t * @method reopen\n\t * @param {object} methods - Object of properties or methods\n\t */\n\tthis.reopen = function(methods) {\n\t\tif (typeof methods !== 'object') {\n\t\t\twindow.console.warn('Reopen method argument must be an object');\n\t\t\treturn;\n\t\t}\n\n\t\tvar obj = this;\n\t\tobj.each(methods, function(property, value) {\n\t\t\tobj[property] = value;\n\t\t});\n\t};\n\n\t/**\n\t * Extend classes.\n\t * @method extendClass\n\t * @param {function} child - Child constructor\n\t * @param {function} Parent - Parent constructor\n\t */\n\tthis.extendClass = function(child, Parent) {\n\t\tfunction F() {}\n\n\t\tF.prototype = new Parent();\n\t\tchild.prototype = new F();\n\t\tchild.prototype.constructor = child;\n\t\tchild.parentClass = Parent.prototype;\n\t};\n\n\t/**\n\t * Set or get Moff settings value.\n\t * @method settings\n\t * @param {string} key - Setting name\n\t * @param {*} value - Setting value\n\t * @returns {*}\n\t */\n\tthis.settings = function(key, value) {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn _settings[key];\n\t\t} else {\n\t\t\t_settings[key] = value;\n\t\t}\n\t};\n\n\t/**\n\t * Iterates over object or array and run callback for each iteration.\n\t * @method each\n\t * @param {Array|object} object - Array or object to iterate over\n\t * @param {Function} callback - Iteration callback\n\t */\n\tthis.each = function(object, callback) {\n\t\tvar i = 0;\n\t\tvar length = object.length;\n\t\tvar isArray = Array.isArray(object) || nodeList(object);\n\t\tvar value;\n\n\t\tif (isArray) {\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\tif (value === false) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i in object) {\n\t\t\t\tif (object.hasOwnProperty(i)) {\n\t\t\t\t\tvalue = callback.call(object[i], i, object[i]);\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Adds callbacks for DOMContentLoaded event.\n\t * If event is occurred it runs callback.\n\t * @method $\n\t * @param {Function} arg - Callback function\n\t */\n\tthis.$ = function(arg) {\n\t\tif (typeof arg === 'function') {\n\t\t\tif (_domIsLoaded) {\n\t\t\t\targ();\n\t\t\t} else {\n\t\t\t\t_domLoadedCallbacks.push(arg);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Moff version.\n\t * @type {string}\n\t */\n\tthis.version = '{{version}}';\n\n\t_doc.addEventListener('DOMContentLoaded', function() {\n\t\t_domIsLoaded = true;\n\t\tinit();\n\t\t_moff.runCallbacks(_domLoadedCallbacks, this);\n\t}, false);\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_deferredObjects: _deferredObjects,\n\t\t_registeredFiles: _registeredFiles,\n\t\t_cache: _cache\n\t};\n\t/* End-test-code */\n}\n\nexport default Core;\n","/**\n * Register and control new Moff modules.\n * @module Module.\n */\nfunction Module() {\n\t/**\n\t * @private {Module} _module - Link to object.\n\t */\n\tvar _module = this;\n\n\t/**\n\t * @private {{}} _moduleObjectStorage - Modules storage.\n\t */\n\tvar _moduleObjectStorage = {};\n\n\t/**\n\t * @private {{}} _moduleClassStorage - Classes storage.\n\t */\n\tvar _moduleClassStorage = {};\n\n\t/**\n\t * Register module events\n\t * @param {Array} events - Array of events\n\t */\n\tfunction registerModuleEvents(events) {\n\t\tif (Array.isArray(events)) {\n\t\t\t_module.each(events, function(index, event) {\n\t\t\t\t_module.event.add(event);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @property {null|string} scopeSelector - Module scope selector. jQuery selector.\n\t */\n\tthis.scopeSelector = null;\n\n\t/**\n\t * @property {null|object} scope - Module scope object. jQuery object.\n\t */\n\tthis.scope = null;\n\n\t/**\n\t * @property {Array} events - Array of module events.\n\t */\n\tthis.events = [];\n\n\t/**\n\t * @property {Function} beforeInit - Before initialization callback\n\t */\n\tthis.beforeInit = function() {};\n\n\t/**\n\t * @property {Function} init - Initialization callback\n\t */\n\tthis.init = function() {};\n\n\t/**\n\t * @property {Function} afterInit - After initialization callback\n\t */\n\tthis.afterInit = function() {};\n\n\t/**\n\t * Register new module.\n\t * @method register\n\t * @param {string} name - module name\n\t * @param {object} [depend] - object of js and css files\n\t * @param {function} Constructor - constructor\n\t */\n\tthis.register = function(name, depend, Constructor) {\n\t\t// Normalize arguments\n\t\tif (typeof Constructor === 'undefined') {\n\t\t\tConstructor = depend;\n\t\t\tdepend = undefined;\n\t\t}\n\n\t\t// Register new module in the storage\n\t\tConstructor.prototype = _module;\n\t\tConstructor.prototype.constructor = Constructor;\n\n\t\t// Save module in storage\n\t\tif (typeof _moduleClassStorage[name] === 'undefined') {\n\t\t\t_moduleClassStorage[name] = {\n\t\t\t\tconstructor: Constructor,\n\t\t\t\tdepend: depend\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Initialize registered class\n\t * @method initClass\n\t * @param {string} ClassName - Name of registered class\n\t * @param {object} [params] - Object with additional params\n\t */\n\tthis.initClass = function(ClassName, params) {\n\t\tvar moduleObject = _moduleClassStorage[ClassName];\n\n\t\tif (!moduleObject) {\n\t\t\twindow.console.warn(ClassName + ' Class is not registered');\n\t\t\treturn;\n\t\t}\n\n\t\tfunction initialize() {\n\t\t\t// Create new class object\n\t\t\tvar classObject = new moduleObject.constructor();\n\t\t\tvar storedObject = _moduleObjectStorage[ClassName];\n\n\t\t\t// Store objects in array if there are more then one classes\n\t\t\tif (Array.isArray(storedObject)) {\n\t\t\t\tstoredObject.push(classObject);\n\t\t\t} else if (typeof storedObject !== 'undefined') {\n\t\t\t\t_moduleObjectStorage[ClassName] = [storedObject, classObject];\n\t\t\t} else {\n\t\t\t\t_moduleObjectStorage[ClassName] = classObject;\n\t\t\t}\n\n\t\t\tif (typeof classObject.beforeInit === 'function') {\n\t\t\t\tclassObject.beforeInit();\n\t\t\t}\n\n\t\t\tif (params) {\n\t\t\t\t// Apply all passed data\n\t\t\t\t_module.each(params, function(key, value) {\n\t\t\t\t\tclassObject[key] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add module name\n\t\t\tclassObject.moduleName = ClassName;\n\n\t\t\t// Register module events.\n\t\t\tregisterModuleEvents(classObject.events);\n\n\t\t\t// Set module scope\n\t\t\tclassObject.setScope();\n\n\t\t\tif (typeof classObject.init === 'function') {\n\t\t\t\tclassObject.init();\n\t\t\t}\n\n\t\t\tif (typeof classObject.afterInit === 'function') {\n\t\t\t\tclassObject.afterInit();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tif (moduleObject.depend) {\n\t\t\t\tthis.loadAssets(moduleObject.depend, initialize);\n\t\t\t} else {\n\t\t\t\tinitialize();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\twindow.console.error(error);\n\t\t}\n\t};\n\n\t/**\n\t * Get registered module by name.\n\t * @method get\n\t * @param {string} name - module name\n\t * @return {object|Array|undefined} module object or undefined\n\t */\n\tthis.get = function(name) {\n\t\treturn (_moduleObjectStorage.hasOwnProperty(name) && _moduleObjectStorage[name]) || undefined;\n\t};\n\n\t/**\n\t * Returns all modules.\n\t * @method getAll\n\t * @returns {{}}\n\t */\n\tthis.getAll = function() {\n\t\treturn _moduleObjectStorage;\n\t};\n\n\t/**\n\t * Remove registered module by name.\n\t * @method remove\n\t */\n\tthis.remove = function() {\n\t\tvar name = this.moduleName;\n\t\tvar id = this.id;\n\t\tvar i = 0;\n\t\tvar object, length;\n\n\t\tfunction removeObject() {\n\t\t\t_moduleObjectStorage[name].splice(i, 1);\n\t\t\tlength = _moduleObjectStorage[name].length;\n\t\t\t--i;\n\t\t}\n\n\t\t// Be sure to remove existing module\n\t\tif (Array.isArray(_moduleObjectStorage[name])) {\n\t\t\tlength = _moduleObjectStorage[name].length;\n\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tobject = _moduleObjectStorage[name][i];\n\n\t\t\t\tif (object.id) {\n\t\t\t\t\tif (object.id === id) {\n\t\t\t\t\t\tremoveObject();\n\t\t\t\t\t}\n\t\t\t\t} else if (object.moduleName === name) {\n\t\t\t\t\tremoveObject();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_moduleObjectStorage[name].length === 1) {\n\t\t\t\t_moduleObjectStorage[name] = _moduleObjectStorage[name][0];\n\t\t\t} else if (!_moduleObjectStorage[name].length) {\n\t\t\t\tdelete _moduleObjectStorage[name];\n\t\t\t}\n\t\t} else {\n\t\t\tdelete _moduleObjectStorage[name];\n\t\t}\n\t};\n\n\t/**\n\t * Register module scope by scope selector.\n\t * @method setScope\n\t */\n\tthis.setScope = function() {\n\t\tif (this.scopeSelector) {\n\t\t\tthis.scope = document.querySelector(this.scopeSelector);\n\t\t}\n\t};\n\n\t/**\n\t * Find element in module scope.\n\t * @method find\n\t * @param {string} selector - jQuery selector.\n\t * @returns {object} jQuery object.\n\t */\n\tthis.find = function(selector) {\n\t\treturn this.scope.querySelectorAll(selector);\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_moduleClassStorage: _moduleClassStorage,\n\t\t_moduleObjectStorage: _moduleObjectStorage\n\t};\n\t/* End-test-code */\n}\n\nexport default Module;\n","/**\n * Detects OS, browser and another features support.\n * @module Detect\n */\nfunction Detect() {\n\t/**\n\t * @property {Window} _win - Link to Window object.\n\t * @private\n\t */\n\tvar _win = window;\n\n\t/**\n\t * @property {Detect} _detect - Link to this object.\n\t * @private\n\t */\n\tvar _detect = this;\n\n\t/**\n\t * @property {string} _ua - Link to user agent.\n\t * @private\n\t */\n\tvar _ua = window.navigator.userAgent.toLowerCase();\n\n\t/**\n\t * @property {HTMLDocument} _doc - Link to document object.\n\t * @private\n\t */\n\tvar _doc = document;\n\n\t/**\n\t * @property {{}} browser - Object with browser details.\n\t */\n\tthis.browser = {};\n\n\t/**\n\t * @property {{}} OS - Object with OS details.\n\t */\n\tthis.OS = {};\n\n\t/**\n\t * HTML5 support list.\n\t * @function html5Support\n\t */\n\tfunction html5Support() {\n\t\t// Determine whether browser support touch JavaScript API\n\t\t// It does not mean touch device\n\t\t_detect.touch = !!(('ontouchstart' in _win) || _win.DocumentTouch && _doc instanceof _win.DocumentTouch);\n\t\t_detect.applicationCache = !!_win.applicationCache;\n\t\t_detect.canvas = (function() {\n\t\t\tvar canvas = _doc.createElement('canvas');\n\t\t\treturn !!(canvas.getContext && canvas.getContext('2d'));\n\t\t})();\n\n\t\t_detect.canvasText = !!(_detect.canvas && typeof _doc.createElement('canvas').getContext('2d').fillText === 'function');\n\t\t_detect.dragAndDrop = (function() {\n\t\t\tvar div = _doc.createElement('div');\n\t\t\treturn ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n\t\t})();\n\n\t\t_detect.hashChange = !!('onhashchange' in _win && (typeof _doc.documentMode === 'undefined' || _doc.documentMode > 7));\n\t\t_detect.history = !!(_win.history && history.pushState);\n\t\t_detect.postMessage = !!_win.postMessage;\n\t\t_detect.webSockets = !!('WebSocket' in _win || 'MozWebSocket' in _win);\n\t\t_detect.webWorkers = !!_win.Worker;\n\t\t_detect.audio = (function() {\n\t\t\tvar audio = _doc.createElement('audio');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!audio.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '');\n\t\t\t\t\tbool.mp3 = audio.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\t\t\t\t\tbool.wav = audio.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '');\n\t\t\t\t\tbool.m4a = (audio.canPlayType('audio/x-m4a;') || audio.canPlayType('audio/aac;')).replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.video = (function() {\n\t\t\tvar video = _doc.createElement('video');\n\t\t\tvar bool = false;\n\n\t\t\ttry {\n\t\t\t\tif (!!video.canPlayType) {\n\t\t\t\t\tbool = {};\n\t\t\t\t\tbool.ogg = video.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\t\t\t\t\tbool.h264 = video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\t\t\t\t\tbool.webm = video.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\t\t\t\t}\n\t\t\t} catch (error) {}\n\n\t\t\treturn bool;\n\t\t})();\n\n\t\t_detect.indexedDB = (function() {\n\t\t\tvar props = ['indexedDB', 'webkitIndexedDB', 'mozIndexedDB', 'OIndexedDB', 'msIndexedDB'];\n\n\t\t\tfor (var i in props) {\n\t\t\t\tif (props.hasOwnProperty(i)) {\n\t\t\t\t\tvar item = _win[props[i]];\n\t\t\t\t\tif (item !== undefined) {\n\t\t\t\t\t\tif (item === false) {\n\t\t\t\t\t\t\treturn props[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof item === 'function') {\n\t\t\t\t\t\t\treturn item.bind(_win);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t})();\n\n\t\t_detect.localStorage = (function() {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tlocalStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\n\t\t_detect.sessionStorage = (function() {\n\t\t\ttry {\n\t\t\t\tsessionStorage.setItem(_detect.mode, _detect.mode);\n\t\t\t\tsessionStorage.removeItem(_detect.mode);\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\t}\n\n\t/**\n\t * Detect browser\n\t * @function detectBrowser\n\t */\n\tfunction detectBrowser() {\n\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(_ua) ||\n\t\t\t/(msie) ([\\w.]+)/.exec(_ua) ||\n\t\t\t_ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(_ua) || [];\n\n\t\tif (match[1]) {\n\t\t\t_detect.browser[match[1]] = true;\n\t\t}\n\n\t\tif (match[2]) {\n\t\t\t_detect.browser.version = match[2];\n\t\t}\n\n\t\tif (_detect.browser.chrome) {\n\t\t\t_detect.browser.webkit = true;\n\t\t}\n\t}\n\n\t/**\n\t * Detect Operating System\n\t * @function detectOS\n\t */\n\tfunction detectOS() {\n\t\tvar OS = _detect.OS;\n\t\tvar iOS = /(ipad|iphone|ipod)/g.test(_ua);\n\t\tvar macOS = _ua.indexOf('mac') > -1;\n\t\tvar windows = _ua.indexOf('win') > -1;\n\t\tvar android = _ua.indexOf('android') > -1;\n\t\tvar windowsPhone = _ua.indexOf('windows phone') > -1;\n\n\t\tif (iOS) {\n\t\t\tOS.iOS = iOS;\n\t\t} else if (macOS) {\n\t\t\tOS.macOS = macOS;\n\t\t} else if (windows) {\n\t\t\tOS.windows = windows;\n\t\t} else if (android) {\n\t\t\tOS.android = android;\n\t\t} else if (windowsPhone) {\n\t\t\tOS.windowsPhone = windowsPhone;\n\t\t}\n\t}\n\n\t/**\n\t * Detects whether the current device is mobile\n\t * @function detectMobileDevice\n\t */\n\tfunction detectMobileDevice() {\n\t\t_detect.isMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_ua);\n\t}\n\n\tthis.init = function() {\n\t\thtml5Support();\n\t\tdetectBrowser();\n\t\tdetectOS();\n\t\tdetectMobileDevice();\n\t};\n}\n\nexport default Detect;\n","/**\n * Moff Event module.\n * @module Event.\n */\nfunction Event() {\n\t/**\n\t * @private {{}} _eventStore - Events storage.\n\t * @private\n\t */\n\tvar _eventStore = {};\n\n\t/**\n\t * Registers new event.\n\t * @method add\n\t * @param {string} name - Event name\n\t */\n\tthis.add = function(name) {\n\t\tif (typeof _eventStore[name] === 'undefined') {\n\t\t\t_eventStore[name] = [];\n\t\t}\n\t};\n\n\t/**\n\t * Assign callback for event.\n\t * @method on\n\t * @param {string} name - Event name\n\t * @param {function} callback - Event callback\n\t */\n\tthis.on = function(name, callback) {\n\t\t// Create event if it does not exist.\n\t\tthis.add(name);\n\n\t\tif (typeof callback === 'function') {\n\t\t\t_eventStore[name].push(callback);\n\t\t}\n\t};\n\n\t/**\n\t * Trigger event by name.\n\t * @method trigger\n\t * @param {string} name - Event name\n\t */\n\tthis.trigger = function(name) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof _eventStore[name] !== 'undefined') {\n\t\t\tthis.runCallbacks(_eventStore[name], this, args);\n\t\t}\n\t};\n\n\t/**\n\t * Get event from store.\n\t * @param {string} name - Event name\n\t * @returns {Array|undefined}\n\t */\n\tthis.get = function(name) {\n\t\treturn _eventStore[name];\n\t};\n\n\t/* Test-code */\n\tthis._testonly = {\n\t\t_eventStore: _eventStore\n\t};\n\t/* End-test-code */\n}\n\nexport default Event;\n"],"sourceRoot":"/source/"}