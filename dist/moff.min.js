(function(){"use strict";function e(){function e(){t(),$(C).on("load"+F,n).on("scroll"+F,o),T?(A(D).addListener(i),A(P).addListener(i),A(E).addListener(i)):$(C).on("resize"+F,i),x.hashchange&&$(C).on("hashchange"+F,u),$(C).on("popstate"+F,y),r(),o()}function t(){var e;$.each($("[data-visible-scroll]"),function(){e=$(this),M.push({element:e.removeAttr("data-visible-scroll").css("opacity",0),handler:function(){x.appear(e)}})})}function n(){W=!0,w(),$.each(O,function(e,t){x.include(t.id,t.callback)})}function o(){if(M.length){var e=M.slice(0);$.each(e,function(e,t){x.inViewport(t.element)&&(M.splice(e,1),t.handler())})}}function i(e){(T&&e.matches||x.viewModeIsChanged())&&(d(),x.runCallbacks(L,x,[x.getMode()]),r())}function r(){var e,t;$.each($(N),function(){this.handled||(e=$(this),t=(e.data("loadEvent")||"click").toLowerCase(),"dom"===t?a(e)?h(this):e.on("click"+F,function(){h(this)}):"scroll"===t?M.push({element:e,handler:function(){a(e)?h(e):e.on("click"+F,function(){h(this)})}}):e.on(t+F,function(){return h(this)}),this.handled=!0)})}function a(e){var t=e.data("loadScreen");return t?-1!==$.inArray(x.getMode(),t.split(" ")):!0}function s(e){$.extend(B,e)}function c(){var e;B.breakpoints&&T&&(e=B.breakpoints,E=E.replace("%d",e.sm),P=P.replace("%d",e.md),D=D.replace("%d",e.lg))}function d(){S=x.getMode()}function u(){var e=g();I.hasOwnProperty(e)&&x.include(e)}function l(){var e=x.getMode();$.each(I,function(t,n){-1!==$.inArray(e,n.loadOnScreen)&&x.include(t)})}function f(e,t){$.ajax({url:e,type:"GET",success:function(e){"function"==typeof t&&t(e)}})}function h(e){e=$(e);var t=e.attr("title")||"",n=e.attr("href")||e.data("loadUrl"),o=e.data("loadTarget"),i=e.data("pushUrl");if(n){if(n=p(e,n),e.removeAttr("data-load-event"),x.runCallbacks(j,e),x.history&&void 0!==i){var r=+new Date;C.history.pushState({elemId:r,url:n},t,n),J[r]=e}v(e,n,o,function(){x.runCallbacks(z,e)})}return!1}function p(e,t){return t.replace(/\{\{(.*?)\}\}/g,function(){return e[arguments[1]]()})}function v(e,t,n,o){var i,r=g(t);t=m(t),f(t,function(t){if(i=e.data("pageTitle"),$(n).html(t),i&&(k.title=i),x.reusableEvents(),o(),r){var a=$(document.getElementById(r)).add('a[name="'+r+'"]');a.length&&$(C).scrollTop(a.offset().top)}})}function y(e){var t,n=e.originalEvent.state;if(n&&(t=J[n.elemId],a(t))){var o=n.url,i=t.data("loadTarget");x.runCallbacks(j,t),v(t,o,i,function(){x.runCallbacks(z,t)})}}function m(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function g(e){if(e){var t=e.indexOf("#");return-1!==t?e.substr(t+1):""}return C.location.hash.substr(1)}function w(){u(),l()}function b(){var e,t,n=navigator.userAgent,o=n.match(/MSIE 10\.0; Windows NT 6\.2/),i=n.match(/IEMobile\/10\.0/);(o||i)&&(e="<style>@-webkit-viewport { width: device-width; }",e+="@-moz-viewport { width: device-width; }",e+="@-ms-viewport { width: "+(i?"auto":"device-width")+"; }",e+="@-o-viewport { width: device-width; }",e+="@viewport { width: device-width; }</style>",$("head").append($(e))),t=n.indexOf("Mozilla/5.0")>-1&&n.indexOf("Android ")>-1&&n.indexOf("AppleWebKit")>-1&&-1===n.indexOf("Chrome"),t&&$("select.form-control").removeClass("form-control").css("width","100%")}var S,x=this,C=window,k=C.document,I={},O=[],M=[],T=!(!C.matchMedia||!C.matchMedia("screen").addListener),A=T&&C.matchMedia,E="(min-width: %dpx)",P=E,D=E,L=[],W=!1,j=[],z=[],B={breakpoints:{sm:768,md:992,lg:1200}},F=".moff",N="[data-load-target]",J={};this.mode="moff",this.init=function(t){t||(t={}),$(function(){s(t),c(),d(),e(),w(),b()})},this.appear=function(e,t){t=t||1,t=1e3*t,x.supportCSS3("transition")?e.css({"-webkit-transition":"opacity"+t+"ms","-moz-transition":"opacity"+t+"ms","-o-transition":"opacity"+t+"ms",transition:"opacity"+t+"ms",opacity:1}):e.animate({opacity:1},t)},this.reusableEvents=function(){t(),r(),o()},this.inViewport=function(e){var t,n=$(C),o={top:n.scrollTop(),left:n.scrollLeft()};return e=$(e),o.right=o.left+n.width(),o.bottom=o.top+n.height(),t=e.offset(),t.right=t.left+e.outerWidth(),t.bottom=t.top+e.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)},this.supportCSS3=function(e){for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+"Webkit Moz O ms".split(" ").join(t+" ")+t).split(" "),o=n.length,i=0;o>i;i++)if(e=n[i],-1===e.indexOf("-")&&void 0!==document.createElement(this.mode).style[e])return!0;return!1},this.runCallbacks=function(e,t,n){$.isArray(e)||(e=[]),"undefined"==typeof n&&(n=[]),$.each(e,function(e,o){"function"==typeof o&&o.apply(t,n)})},this.onViewChange=function(e){"function"==typeof e&&L.push(e)},this.beforeLoad=function(e){j.push(e)},this.afterLoad=function(e){z.push(e)},this.getMode=function(){var e="xs";return T&&(A(D).matches?e="lg":A(P).matches?e="md":A(E).matches&&(e="sm")),e},this.register=function(e){I[e.id]={loaded:!1,depend:{js:e.depend&&e.depend.js||[],css:e.depend&&e.depend.css||[]},files:{js:e.files&&e.files.js||[],css:e.files&&e.files.css||[]},loadOnScreen:e.loadOnScreen||[],beforeInclude:e.beforeInclude||void 0,afterInclude:e.afterInclude||void 0,onWindowLoad:e.onWindowLoad||!1}},this.include=function(e,t){function n(){x.loadDepends(i.files,o)}function o(){$.isFunction(i.afterInclude)&&i.afterInclude(),"function"==typeof t&&t()}var i=I[e];if(!i.loaded){if(i.onWindowLoad&&!W)return void O.push({id:e,callback:t});i.loaded=!0,$.isFunction(i.beforeInclude)&&i.beforeInclude(),this.loadDepends(i.depend,n)}},this.loadDepends=function(e,t){function n(){o++,o===i&&t()}var o=0,i=0,r=$.isArray(e.css),a=$.isArray(e.js);a&&(i+=e.js.length),r&&(i+=e.css.length),a&&e.js.length&&this.loadJS(e.js,n),r&&e.css.length&&this.loadCSS(e.css,n),i||t()},this.loadJS=function(e,t){function n(e){$('script[src="'+e+'"]').length?i&&t():(o=$("<script>"),i&&o.on("load",t),o.appendTo($("body").length&&$("body")||$("head")).attr("src",e))}if(!$.isArray(e)&&"string"!=typeof e)return void window.console.warn("Moff.loadJS source is not an array or a string");var o,i="function"==typeof t;$.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)},this.loadCSS=function(e,t){function n(n){if($('link[href="'+n+'"]').length)o&&t();else{var i=$('<link rel="stylesheet">');o&&i.on("load",t),i.attr("href",e).appendTo("head"),i=i[0],i.onreadystatechange=function(){var e=i.readyState;("loaded"===e||"complete"===e)&&(i.onreadystatechange=null,o&&t())}}}if(!$.isArray(e)&&"string"!=typeof e)return void window.console.warn("Moff.loadCSS source is not array or string");var o="function"==typeof t;$.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)},this.extend=function(e,t,n){this.hasOwnProperty(e)||(n&&(t.prototype=this,t.prototype.constructor=t),this[e]=new t,"function"==typeof this[e].init&&this[e].init())},this.extendClass=function(e,t){function n(){}n.prototype=new t,e.prototype=new n,e.prototype.constructor=e,e.parentClass=parent.prototype},this.viewModeIsChanged=function(){return S!==this.getMode()},this.settings=function(e,t){return"undefined"==typeof t?B[e]:void(B[e]=t)},this.version="1.1.13"}function t(){function e(e){$.isArray(e)&&$.each(e,function(){t.registerEvent(this)})}var t=this,n={},o={},i={};this.scopeSelector=null,this.scope=null,this.register=function(e,n,i){"undefined"==typeof i&&(i=n,n=void 0),o.hasOwnProperty(e)?window.console.warn(e+" class has already registered."):(i.prototype=t,i.prototype.constructor=i,"undefined"==typeof o[e]&&(o[e]={constructor:i,depends:n}))},this.initClass=function(t,i){function r(){var o=new a.constructor,r=n[t];$.isArray(r)?r.push(o):n[t]="undefined"!=typeof r?[r,o]:o,"function"==typeof o.beforeInit&&o.beforeInit(),i&&$.each(i,function(e,t){o[e]=t}),o.moduleName=t,e(o.events),o.setScope(),"function"==typeof o.init&&o.init(),"function"==typeof o.afterInit&&o.afterInit()}var a=o[t];try{a.depends?this.loadDepends(a.depends,r):r()}catch(s){window.console.error(s)}},this.registerEvent=function(e){"undefined"==typeof i[e]&&(i[e]=[])},this.assignForEvent=function(e,t){return i.hasOwnProperty(e)?void("function"==typeof t&&i[e].push(t)):void window.console.warn(e+" event is not registered yet.")},this.triggerEvent=function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof i[e]&&t.runCallbacks(i[e],this,n)},this.get=function(e){return n.hasOwnProperty(e)&&n[e]||void 0},this.remove=function(){function e(){n[i].splice(a,1),o=n[i].length,--a}var t,o,i=this.moduleName,r=this.id,a=0;if($.isArray(n[i])){for(o=n[i].length;o>a;a++)t=n[i][a],t.id?t.id===r&&e():t.moduleName===i&&e();1===n[i].length?n[i]=n[i][0]:n[i].length||delete n[i]}else delete n[i]},this.setScope=function(){this.scopeSelector&&(this.scope=$(this.scopeSelector))},this.find=function(e){return this.scope.find(e)}}function n(){function e(){i.touch=!!("ontouchstart"in o||o.DocumentTouch&&a instanceof o.DocumentTouch),i.applicationCache=!!o.applicationCache,i.canvas=function(){var e=a.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),i.canvasText=!(!i.canvas||!$.isFunction(a.createElement("canvas").getContext("2d").fillText)),i.dragAndDrop=function(){var e=a.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),i.hashChange=!!("onhashchange"in o&&("undefined"==typeof a.documentMode||a.documentMode>7)),i.history=!(!o.history||!history.pushState),i.postMessage=!!o.postMessage,i.webSockets=!!("WebSocket"in o||"MozWebSocket"in o),i.webWorkers=!!o.Worker,i.audio=function(){var e=a.createElement("audio"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}(),i.video=function(){var e=a.createElement("video"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}(),i.indexedDB=function(){var e=["indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB"];for(var t in e)if(e.hasOwnProperty(t)){var n=o[e[t]];if(void 0!==n)return n===!1?e[t]:"function"==typeof n?n.bind(o):n}return!1}(),i.localStorage=function(){try{return localStorage.setItem(i.mode,i.mode),localStorage.removeItem(i.mode),!0}catch(e){return!1}}(),i.sessionSorage=function(){try{return sessionStorage.setItem(i.mode,i.mode),sessionStorage.removeItem(i.mode),!0}catch(e){return!1}}()}function t(){var e=/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[];e[1]&&(i.browser[e[1]]=!0),e[2]&&(i.browser.version=e[2]),i.browser.chrome&&(i.browser.webkit=!0)}function n(){var e=i.OS,t=/(ipad|iphone|ipod)/g.test(r),n=r.indexOf("mac")>-1,o=r.indexOf("win")>-1,a=r.indexOf("android")>-1;t?e.iOS=t:n?e.macOS=n:o?e.windows=o:a&&(e.android=a)}var o=window,i=this,r=window.navigator.userAgent.toLowerCase(),a=document;this.browser={},this.OS={},this.init=function(){e(),t(),n()}}var o=e,i=t,r=n,a=this.Moff=new o;a.extend("module",i,!0),a.extend("detect",r,!0)}).call(this);
//# sourceMappingURL=moff.min.js.map