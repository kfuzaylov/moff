(function(){"use strict";function e(){function e(){t(),$(k).on("load"+N,n).on("scroll"+N,o),T?(A(D).addListener(i),A(E).addListener(i),A(P).addListener(i)):$(k).on("resize"+N,i),S.hashchange&&$(k).on("hashchange"+N,l),$(k).on("popstate"+N,v),r(),o()}function t(){var e;$.each($("[data-visible-scroll]"),function(){e=$(this),M.push({element:e.removeAttr("data-visible-scroll").css("opacity",0),handler:function(){S.appear(e)}})})}function n(){W=!0,g(),$.each(O,function(e,t){S.include(t.id,t.callback)})}function o(){if(M.length){var e=M.slice(0);$.each(e,function(e,t){S.inViewport(t.element)&&(M.splice(e,1),t.handler())})}}function i(e){(T&&e.matches||S.viewModeIsChanged())&&(d(),S.runCallbacks(L,S,[S.getMode()]),r())}function r(){var e,t;$.each($(F),function(){this.handled||(e=$(this),t=(e.data("loadEvent")||"click").toLowerCase(),"dom"===t?a(e)?h(this):e.on("click"+N,function(){h(this)}):"scroll"===t?M.push({element:e,handler:function(){a(e)?h(e):e.on("click"+N,function(){h(this)})}}):e.on(t+N,function(){return h(this)}),this.handled=!0)})}function a(e){var t=e.data("loadScreen");return t?-1!==$.inArray(S.getMode(),t.split(" ")):!0}function s(e){$.extend(B,e)}function c(){var e;B.breakpoints&&T&&(e=B.breakpoints,P=P.replace("%d",e.sm),E=E.replace("%d",e.md),D=D.replace("%d",e.lg))}function d(){x=S.getMode()}function l(){var e=w();I.hasOwnProperty(e)&&S.include(e)}function u(){var e=S.getMode();$.each(I,function(t,n){-1!==$.inArray(e,n.loadOnScreen)&&S.include(t)})}function f(e,t){$.ajax({url:e,type:"GET",success:function(e){"function"==typeof t&&t(e)}})}function h(e){e=$(e);var t=e.attr("title")||"",n=e.attr("href")||e.data("loadUrl"),o=e.data("loadTarget"),i=e.data("pushUrl");if(n){if(n=p(e,n),e.removeAttr("data-load-event"),S.runCallbacks(j,e),S.history&&void 0!==i){var r=+new Date;k.history.pushState({elemId:r,url:n},t,n),J[r]=e}m(e,n,o,function(){S.runCallbacks(z,e)})}return!1}function p(e,t){return t.replace(/\{\{(.*?)\}\}/g,function(){return e[arguments[1]]()})}function m(e,t,n,o){var i,r=w(t);t=y(t),f(t,function(t){if(i=e.data("pageTitle"),$(n).html(t),i&&(C.title=i),S.reusableEvents(),o(),r){var a=$(document.getElementById(r)).add('a[name="'+r+'"]');a.length&&$(k).scrollTop(a.offset().top)}})}function v(e){var t,n=e.originalEvent.state;if(n&&(t=J[n.elemId],a(t))){var o=n.url,i=t.data("loadTarget");S.runCallbacks(j,t),m(t,o,i,function(){S.runCallbacks(z,t)})}}function y(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function w(e){if(e){var t=e.indexOf("#");return-1!==t?e.substr(t+1):""}return k.location.hash.substr(1)}function g(){l(),u()}function b(){var e,t,n=navigator.userAgent,o=n.match(/MSIE 10\.0; Windows NT 6\.2/),i=n.match(/IEMobile\/10\.0/);(o||i)&&(e="<style>@-webkit-viewport { width: device-width; }",e+="@-moz-viewport { width: device-width; }",e+="@-ms-viewport { width: "+(i?"auto":"device-width")+"; }",e+="@-o-viewport { width: device-width; }",e+="@viewport { width: device-width; }</style>",$("head").append($(e))),t=n.indexOf("Mozilla/5.0")>-1&&n.indexOf("Android ")>-1&&n.indexOf("AppleWebKit")>-1&&-1===n.indexOf("Chrome"),t&&$("select.form-control").removeClass("form-control").css("width","100%")}var x,S=this,k=window,C=k.document,I={},O=[],M=[],T=!(!k.matchMedia||!k.matchMedia("screen").addListener),A=T&&k.matchMedia,P="(min-width: %dpx)",E=P,D=P,L=[],W=!1,j=[],z=[],B={breakpoints:{sm:768,md:992,lg:1200}},N=".moff",F="[data-load-target]",J={};this.mode="moff",this.init=function(t){t||(t={}),$(function(){s(t),c(),d(),e(),g(),b()})},this.appear=function(e,t){t=t||1,t=1e3*t,S.supportCSS3("transition")?e.css({"-webkit-transition":"opacity"+t+"ms","-moz-transition":"opacity"+t+"ms","-o-transition":"opacity"+t+"ms",transition:"opacity"+t+"ms",opacity:1}):e.animate({opacity:1},t)},this.reusableEvents=function(){t(),r(),o()},this.inViewport=function(e){var t,n=$(k),o={top:n.scrollTop(),left:n.scrollLeft()};return e=$(e),o.right=o.left+n.width(),o.bottom=o.top+n.height(),t=e.offset(),t.right=t.left+e.outerWidth(),t.bottom=t.top+e.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)},this.supportCSS3=function(e){for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+"Webkit Moz O ms".split(" ").join(t+" ")+t).split(" "),o=n.length,i=0;o>i;i++)if(e=n[i],-1===e.indexOf("-")&&void 0!==document.createElement(this.mode).style[e])return!0;return!1},this.runCallbacks=function(e,t,n){$.isArray(e)||(e=[]),"undefined"==typeof n&&(n=[]),$.each(e,function(e,o){"function"==typeof o&&o.apply(t,n)})},this.onViewChange=function(e){"function"==typeof e&&L.push(e)},this.beforeLoad=function(e){j.push(e)},this.afterLoad=function(e){z.push(e)},this.getMode=function(){var e="xs";return T&&(A(D).matches?e="lg":A(E).matches?e="md":A(P).matches&&(e="sm")),e},this.register=function(e){I[e.id]={loaded:!1,depend:{js:e.depend&&e.depend.js||[],css:e.depend&&e.depend.css||[]},files:{js:e.files&&e.files.js||[],css:e.files&&e.files.css||[]},loadOnScreen:e.loadOnScreen||[],beforeInclude:e.beforeInclude||void 0,afterInclude:e.afterInclude||void 0,onWindowLoad:e.onWindowLoad||!1}},this.include=function(e,t){function n(){S.loadDepends(i.files,o)}function o(){$.isFunction(i.afterInclude)&&i.afterInclude(),"function"==typeof t&&t()}var i=I[e];if(!i.loaded){if(i.onWindowLoad&&!W)return void O.push({id:e,callback:t});i.loaded=!0,$.isFunction(i.beforeInclude)&&i.beforeInclude(),this.loadDepends(i.depend,n)}},this.loadDepends=function(e,t){function n(){o++,o===i&&t()}var o=0,i=0,r=$.isArray(e.css),a=$.isArray(e.js);a&&(i+=e.js.length),r&&(i+=e.css.length),a&&e.js.length&&this.loadJS(e.js,n),r&&e.css.length&&this.loadCSS(e.css,n),i||t()},this.loadJS=function(e,t){function n(e){$('script[src="'+e+'"]').length?i&&t():(o=$("<script>"),i&&o.on("load",t),o.appendTo($("body").length&&$("body")||$("head")).attr("src",e))}if(!$.isArray(e)&&"string"!=typeof e)return void window.console.warn("Moff.loadJS source is not an array or a string");var o,i="function"==typeof t;$.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)},this.loadCSS=function(e,t){function n(n){$('link[href="'+n+'"]').length?i&&t():(o=$('<link rel="stylesheet">'),i&&o.on("load",t),o.attr("href",e).appendTo("head"),o=o[0],o.onreadystatechange=function(){var e=o.readyState;("loaded"===e||"complete"===e)&&(o.onreadystatechange=null,i&&t())})}if(!$.isArray(e)&&"string"!=typeof e)return void window.console.warn("Moff.loadCSS source is not array or string");var o,i="function"==typeof t;$.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)},this.extend=function(e,t,n){this.hasOwnProperty(e)||(n&&(t.prototype=this,t.prototype.constructor=t),this[e]=new t,"function"==typeof this[e].init&&this[e].init())},this.extendClass=function(e,t){function n(){}n.prototype=new t,e.prototype=new n,e.prototype.constructor=e,e.parentClass=parent.prototype},this.viewModeIsChanged=function(){return x!==this.getMode()},this.settings=function(e,t){return"undefined"==typeof t?B[e]:void(B[e]=t)},this.version="1.2.16"}function t(){function e(e){$.isArray(e)&&$.each(e,function(e,n){t.event.add(n)})}var t=this,n={},o={};this.scopeSelector=null,this.scope=null,this.events=[],this.beforeInit=function(){},this.init=function(){},this.afterInit=function(){},this.register=function(e,n,i){"undefined"==typeof i&&(i=n,n=void 0),o.hasOwnProperty(e)?window.console.warn(e+" class has already registered."):(i.prototype=t,i.prototype.constructor=i,"undefined"==typeof o[e]&&(o[e]={constructor:i,depends:n}))},this.initClass=function(t,i){function r(){var o=new a.constructor,r=n[t];$.isArray(r)?r.push(o):n[t]="undefined"!=typeof r?[r,o]:o,"function"==typeof o.beforeInit&&o.beforeInit(),i&&$.each(i,function(e,t){o[e]=t}),o.moduleName=t,e(o.events),o.setScope(),"function"==typeof o.init&&o.init(),"function"==typeof o.afterInit&&o.afterInit()}var a=o[t];try{a.depends?this.loadDepends(a.depends,r):r()}catch(s){window.console.error(s)}},this.get=function(e){return n.hasOwnProperty(e)&&n[e]||void 0},this.remove=function(){function e(){n[i].splice(a,1),o=n[i].length,--a}var t,o,i=this.moduleName,r=this.id,a=0;if($.isArray(n[i])){for(o=n[i].length;o>a;a++)t=n[i][a],t.id?t.id===r&&e():t.moduleName===i&&e();1===n[i].length?n[i]=n[i][0]:n[i].length||delete n[i]}else delete n[i]},this.setScope=function(){this.scopeSelector&&(this.scope=$(this.scopeSelector))},this.find=function(e){return this.scope.find(e)}}function n(){function e(){r.touch=!!("ontouchstart"in i||i.DocumentTouch&&s instanceof i.DocumentTouch),r.applicationCache=!!i.applicationCache,r.canvas=function(){var e=s.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),r.canvasText=!(!r.canvas||!$.isFunction(s.createElement("canvas").getContext("2d").fillText)),r.dragAndDrop=function(){var e=s.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),r.hashChange=!!("onhashchange"in i&&("undefined"==typeof s.documentMode||s.documentMode>7)),r.history=!(!i.history||!history.pushState),r.postMessage=!!i.postMessage,r.webSockets=!!("WebSocket"in i||"MozWebSocket"in i),r.webWorkers=!!i.Worker,r.audio=function(){var e=s.createElement("audio"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}(),r.video=function(){var e=s.createElement("video"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}(),r.indexedDB=function(){var e=["indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB"];for(var t in e)if(e.hasOwnProperty(t)){var n=i[e[t]];if(void 0!==n)return n===!1?e[t]:"function"==typeof n?n.bind(i):n}return!1}(),r.localStorage=function(){try{return localStorage.setItem(r.mode,r.mode),localStorage.removeItem(r.mode),!0}catch(e){return!1}}(),r.sessionStorage=function(){try{return sessionStorage.setItem(r.mode,r.mode),sessionStorage.removeItem(r.mode),!0}catch(e){return!1}}()}function t(){var e=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];e[1]&&(r.browser[e[1]]=!0),e[2]&&(r.browser.version=e[2]),r.browser.chrome&&(r.browser.webkit=!0)}function n(){var e=r.OS,t=/(ipad|iphone|ipod)/g.test(a),n=a.indexOf("mac")>-1,o=a.indexOf("win")>-1,i=a.indexOf("android")>-1,s=a.indexOf("windows phone")>-1;t?e.iOS=t:n?e.macOS=n:o?e.windows=o:i?e.android=i:s&&(e.windowsPhone=s)}function o(){r.isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)}var i=window,r=this,a=window.navigator.userAgent.toLowerCase(),s=document;this.browser={},this.OS={},this.init=function(){e(),t(),n(),o()}}function o(){var e={};this.add=function(t){"undefined"==typeof e[t]&&(e[t]=[])},this.on=function(t,n){return e.hasOwnProperty(t)?void("function"==typeof n&&e[t].push(n)):void window.console.warn(t+" event is not registered yet.")},this.trigger=function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof e[t]&&this.runCallbacks(e[t],this,n)}}var i=e,r=t,a=n,s=o,c=this.Moff=new i;c.extend("module",r,!0),c.extend("detect",a,!0),c.extend("event",s,!0)}).call(this);
//# sourceMappingURL=moff.min.js.map