(function(){"use strict";function e(){function e(){w.addEventListener("load",t,!1),C?(k(E).addListener(n),k(L).addListener(n),k(O).addListener(n)):w.addEventListener("resize",n,!1),b.hashchange&&w.addEventListener("hashchange",s,!1),w.addEventListener("popstate",p,!1),b.handleDataEvents()}function t(){M=!0,v(),b.each(A,function(e,t){b.include(t.id,t.callback)})}function n(e){(C&&e.matches||a())&&(c(),b.runCallbacks(I,b,[b.getMode()]),b.handleDataEvents())}function o(e){var t=e.getAttribute("data-load-screen");return t?-1!==t.split(" ").indexOf(b.getMode()):!0}function i(e){var t;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&(D[t]=e[t])}function r(){var e;D.breakpoints&&C&&(e=D.breakpoints,O=O.replace("%d",e.sm),L=L.replace("%d",e.md),E=E.replace("%d",e.lg))}function a(){return g!==b.getMode()}function c(){g=b.getMode()}function s(){var e=y();x.hasOwnProperty(e)&&b.include(e)}function d(e,t){b.ajax({url:e,type:"GET",success:function(e){"function"==typeof t&&t(e)}})}function u(e){var t,n=e.title||"",o=e.href||e.getAttribute("data-load-url"),i=e.getAttribute("data-load-target"),r=e.getAttribute("data-push-url");o&&(o=l(e,o),e.removeAttribute("data-load-event"),b.runCallbacks(T,e),b.history&&void 0!==r&&(t=Date.now(),w.history.pushState({elemId:t,url:o},n,o),W[t]=e),f(e,o,i,function(){b.runCallbacks(j,e)}))}function l(e,t){return t.replace(/\{\{(.*?)\}\}/g,function(){return e.getAttribute(arguments[1])})}function f(e,t,n,o){function i(t){r=e.getAttribute("data-page-title"),S.querySelector(n).innerHTML=t,r&&(S.title=r),b.handleDataEvents(),o()}var r;t=h(t),P[t]?i(P[t]):d(t,i)}function p(e){var t,n=e.state;if(n&&(t=W[n.elemId],o(t))){var i=n.url,r=t.getAttribute("data-load-target");b.runCallbacks(T,t),f(t,i,r,function(){b.runCallbacks(j,t)})}}function h(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function y(e){if(e){var t=e.indexOf("#");return-1!==t?e.substr(t+1):""}return w.location.hash.substr(1)}function v(){s()}function m(e){var t=Object.prototype.toString.call(e);return typeof/^\[object (HTMLCollection|NodeList)\]$/.test(t)&&e.hasOwnProperty("length")&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)}var g,b=this,w=window,S=w.document,x={},A=[],C=!(!w.matchMedia||!w.matchMedia("screen").addListener),k=C&&w.matchMedia,O="(min-width: %dpx)",L=O,E=O,I=[],M=!1,T=[],j=[],P={},D={breakpoints:{sm:768,md:992,lg:1200},loadOnHover:!0,cacheLiveTime:2e3},q="[data-load-target]",W={};this.handleDataEvents=function(){var e,t,n;b.each(S.querySelectorAll(q),function(){e=this,e.handled||(t=(e.getAttribute("data-load-event")||"click").toLowerCase(),"dom"===t?o(e)?u(e):e.addEventListener("click",function(){u(this)},!1):("click"===t&&D.loadOnHover&&!b.detect.isMobile&&e.addEventListener("mouseenter",function(){e=this,n=e.href||e.getAttribute("data-load-url"),n=h(n),n&&(n=l(e,n),d(n,function(e){P[n]=e,setTimeout(function(){delete P[n]},D.cacheLiveTime)}))},!1),e.addEventListener(t,function(e){u(this),e.preventDefault()},!1)),e.handled=!0)})},this.init=function(t){t||(t={}),S.addEventListener("DOMContentLoaded",function(){i(t),r(),c(),e(),v()},!1)},this.supportCSS3=function(e){for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+"Webkit Moz O ms".split(" ").join(t+" ")+t).split(" "),o=n.length,i=0;o>i;i++)if(e=n[i],-1===e.indexOf("-")&&void 0!==document.createElement("div").style[e])return!0;return!1},this.ajax=function(e){var t,n=[];e.type=e.type.toUpperCase(),"object"==typeof e.data&&(t=e.data,this.each(t,function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),e.data=n.join("&")),"GET"===e.type&&e.data&&(e.url+=(-1!==e.url.indexOf("?")?"&":"?")+e.data.replace(/%20/g,"+"),e.data=null);var o=new XMLHttpRequest;o.open(e.type,e.url,!0),o.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onload=function(){var t=this.status;t>=200&&300>t||304===t?e.success(this.response,this):e.error(this)},o.send(e.data)},this.runCallbacks=function(e,t,n){Array.isArray(e)||(e=[]),"undefined"==typeof n&&(n=[]),b.each(e,function(e,o){"function"==typeof o&&o.apply(t,n)})},this.onViewChange=function(e){"function"==typeof e&&I.push(e)},this.beforeLoad=function(e){T.push(e)},this.afterLoad=function(e){j.push(e)},this.getMode=function(){var e="xs";return C&&(k(E).matches?e="lg":k(L).matches?e="md":k(O).matches&&(e="sm")),e},this.register=function(e){x[e.id]={loaded:!1,depend:{js:e.depend&&e.depend.js||[],css:e.depend&&e.depend.css||[]},file:{js:e.file&&e.file.js||[],css:e.file&&e.file.css||[]},loadOnScreen:e.loadOnScreen||[],beforeInclude:e.beforeInclude||void 0,afterInclude:e.afterInclude||void 0,onWindowLoad:e.onWindowLoad||!1}},this.include=function(e,t){function n(){b.loadAssets(i.file,o)}function o(){"function"==typeof i.afterInclude&&i.afterInclude(),"function"==typeof t&&t()}var i=x[e];if(!i.loaded){var r=b.getMode();if(!i.loadOnScreen.length||-1!==i.loadOnScreen.indexOf(r)){if(i.onWindowLoad&&!M)return void A.push({id:e,callback:t});i.loaded=!0,"function"==typeof i.beforeInclude&&i.beforeInclude(),this.loadAssets(i.depend,n)}}},this.loadAssets=function(e,t){function n(){o++,o===i&&t()}var o=0,i=0,r=Array.isArray(e.css),a=Array.isArray(e.js);a&&(i+=e.js.length),r&&(i+=e.css.length),a&&e.js.length&&this.each(e.js,function(e,t){b.loadJS(t,n)}),r&&e.css.length&&this.each(e.css,function(e,t){b.loadCSS(t,n)}),i||t()},this.loadJS=function(e,t){if("string"!=typeof e)return void window.console.warn("Moff.loadJS source is not a string");var n,o="function"==typeof t;S.querySelector('script[src="'+e+'"]')?o&&t():(n=S.createElement("script"),o&&n.addEventListener("load",t,!1),n.src=e,S.querySelector("body").appendChild(n))},this.loadCSS=function(e,t){if("string"!=typeof e)return void window.console.warn("Moff.loadCSS source is a string");var n,o="function"==typeof t;S.querySelector('link[href="'+e+'"]')?o&&t():(n=S.createElement("link"),o&&n.addEventListener("load",t,!1),n.href=e,n.setAttribute("rel","stylesheet"),S.querySelector("head").appendChild(n),n.onreadystatechange=function(){var e=n.readyState;("loaded"===e||"complete"===e)&&(n.onreadystatechange=null,o&&t())})},this.extend=function(e,t,n){this.hasOwnProperty(e)||(n&&(t.prototype=this,t.prototype.constructor=t),this[e]=new t,"function"==typeof this[e].init&&this[e].init())},this.reopen=function(e){if("object"!=typeof e)return void window.console.warn("Reopen method argument must be an object");var t=this;t.each(e,function(e,n){t[e]=n})},this.extendClass=function(e,t){function n(){}n.prototype=new t,e.prototype=new n,e.prototype.constructor=e,e.parentClass=t.prototype},this.settings=function(e,t){return"undefined"==typeof t?D[e]:void(D[e]=t)},this.each=function(e,t){var n,o=0,i=e.length,r=Array.isArray(e)||m(e);if(r)for(;i>o&&(n=t.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(e.hasOwnProperty(o)&&(n=t.call(e[o],o,e[o]),n===!1))break},this.version="1.4.22"}function t(){function e(e){Array.isArray(e)&&t.each(e,function(e,n){t.event.add(n)})}var t=this,n={},o={};this.scopeSelector=null,this.scope=null,this.events=[],this.beforeInit=function(){},this.init=function(){},this.afterInit=function(){},this.register=function(e,n,i){"undefined"==typeof i&&(i=n,n=void 0),i.prototype=t,i.prototype.constructor=i,"undefined"==typeof o[e]&&(o[e]={constructor:i,depend:n})},this.initClass=function(i,r){function a(){var o=new c.constructor,a=n[i];Array.isArray(a)?a.push(o):n[i]="undefined"!=typeof a?[a,o]:o,"function"==typeof o.beforeInit&&o.beforeInit(),r&&t.each(r,function(e,t){o[e]=t}),o.moduleName=i,e(o.events),o.setScope(),"function"==typeof o.init&&o.init(),"function"==typeof o.afterInit&&o.afterInit()}var c=o[i];if(!c)return void window.console.warn(i+" Class is not registered");try{c.depend?this.loadAssets(c.depend,a):a()}catch(s){window.console.error(s)}},this.get=function(e){return n.hasOwnProperty(e)&&n[e]||void 0},this.getAll=function(){return n},this.remove=function(){function e(){n[i].splice(a,1),o=n[i].length,--a}var t,o,i=this.moduleName,r=this.id,a=0;if(Array.isArray(n[i])){for(o=n[i].length;o>a;a++)t=n[i][a],t.id?t.id===r&&e():t.moduleName===i&&e();1===n[i].length?n[i]=n[i][0]:n[i].length||delete n[i]}else delete n[i]},this.setScope=function(){this.scopeSelector&&(this.scope=document.querySelector(this.scopeSelector))},this.find=function(e){return this.scope.querySelectorAll(e)}}function n(){function e(){r.touch=!!("ontouchstart"in i||i.DocumentTouch&&c instanceof i.DocumentTouch),r.applicationCache=!!i.applicationCache,r.canvas=function(){var e=c.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),r.canvasText=!(!r.canvas||"function"!=typeof c.createElement("canvas").getContext("2d").fillText),r.dragAndDrop=function(){var e=c.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),r.hashChange=!!("onhashchange"in i&&("undefined"==typeof c.documentMode||c.documentMode>7)),r.history=!(!i.history||!history.pushState),r.postMessage=!!i.postMessage,r.webSockets=!!("WebSocket"in i||"MozWebSocket"in i),r.webWorkers=!!i.Worker,r.audio=function(){var e=c.createElement("audio"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}(),r.video=function(){var e=c.createElement("video"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}(),r.indexedDB=function(){var e=["indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB"];for(var t in e)if(e.hasOwnProperty(t)){var n=i[e[t]];if(void 0!==n)return n===!1?e[t]:"function"==typeof n?n.bind(i):n}return!1}(),r.localStorage=function(){try{return localStorage.setItem(r.mode,r.mode),localStorage.removeItem(r.mode),!0}catch(e){return!1}}(),r.sessionStorage=function(){try{return sessionStorage.setItem(r.mode,r.mode),sessionStorage.removeItem(r.mode),!0}catch(e){return!1}}()}function t(){var e=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];e[1]&&(r.browser[e[1]]=!0),e[2]&&(r.browser.version=e[2]),r.browser.chrome&&(r.browser.webkit=!0)}function n(){var e=r.OS,t=/(ipad|iphone|ipod)/g.test(a),n=a.indexOf("mac")>-1,o=a.indexOf("win")>-1,i=a.indexOf("android")>-1,c=a.indexOf("windows phone")>-1;t?e.iOS=t:n?e.macOS=n:o?e.windows=o:i?e.android=i:c&&(e.windowsPhone=c)}function o(){r.isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)}var i=window,r=this,a=window.navigator.userAgent.toLowerCase(),c=document;this.browser={},this.OS={},this.init=function(){e(),t(),n(),o()}}function o(){var e={};this.add=function(t){"undefined"==typeof e[t]&&(e[t]=[])},this.on=function(t,n){this.add(t),"function"==typeof n&&e[t].push(n)},this.trigger=function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof e[t]&&this.runCallbacks(e[t],this,n)},this.get=function(t){return e[t]}}var i=e,r=t,a=n,c=o,s=this.Moff=new i;s.extend("module",r,!0),s.extend("detect",a,!0),s.extend("event",c,!0)}).call(this);
//# sourceMappingURL=moff.min.js.map