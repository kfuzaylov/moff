(function(){"use strict";function e(){function e(){t(),$(O).on("load"+_,n).on("scroll"+_,o),E?(T(L).addListener(i),T(P).addListener(i),T(A).addListener(i)):$(O).on("resize"+_,i),x.hashchange&&$(O).on("hashchange"+_,u),$(O).on("popstate"+_,m),r(),o()}function t(){var e;$.each($("[data-visible-scroll]"),function(){e=$(this),M.push({element:e.removeAttr("data-visible-scroll").css("opacity",0),handler:function(){x.appear(e)}})})}function n(){W=!0,w(),$.each(I,function(e,t){x.include(t.id,t.callback)})}function o(){if(M.length){var e=M.slice(0);$.each(e,function(e,t){x.isVisible(t.element)&&(M.splice(e,1),t.handler())})}}function i(e){(E&&e.matches||x.viewModeIsChanged())&&(d(),x.runCallbacks(j,x,[x.getMode()]),r())}function r(){var e,t;$.each($(J),function(){this.handled||(e=$(this),t=(e.data("loadEvent")||"click").toLowerCase(),"dom"===t?a(e)?h(this):e.on("click"+_,function(){h(this)}):"scroll"===t?M.push({element:e,handler:function(){a(e)?h(e):e.on("click"+_,function(){h(this)})}}):e.on(t+_,function(){return h(this)}),this.handled=!0)})}function a(e){var t=e.data("loadScreen");return t?-1!==$.inArray(x.getMode(),t.split(" ")):!0}function s(e){$.extend(F,e)}function c(){var e;F.breakpoints&&E&&(e=F.breakpoints,A=A.replace("%d",e.sm),P=P.replace("%d",e.md),L=L.replace("%d",e.lg))}function d(){S=x.getMode()}function u(){var e=g();C.hasOwnProperty(e)&&x.include(e)}function f(){var e=x.getMode();$.each(C,function(t,n){-1!==$.inArray(e,n.loadOnScreen)&&x.include(t)})}function l(e,t){$.ajax({url:e,type:"GET",success:function(e){"function"==typeof t&&t(e)}})}function h(e){e=$(e);var t=e.attr("title")||"",n=e.attr("href")||e.data("loadUrl"),o=e.data("loadTarget"),i=e.data("pushUrl");if(n){if(n=p(e,n),e.removeAttr("data-load-event"),x.runCallbacks(z,e),x.history&&void 0!==i){var r=+new Date;O.history.pushState({elemId:r,url:n},t,n),N[r]=e}v(e,n,o,function(){x.runCallbacks(D,e)})}return!1}function p(e,t){return t.replace(/\{\{(.*?)\}\}/g,function(){return e[arguments[1]]()})}function v(e,t,n,o){var i,r=g(t);t=y(t),l(t,function(t){if(i=e.data("pageTitle"),$(n).html(t),i&&(k.title=i),x.reusableEvents(),o(),r){var a=$(document.getElementById(r)).add('a[name="'+r+'"]');a.length&&$(O).scrollTop(a.offset().top)}})}function m(e){var t,n=e.originalEvent.state;if(n&&(t=N[n.elemId],a(t))){var o=n.url,i=t.data("loadTarget");x.runCallbacks(z,t),v(t,o,i,function(){x.runCallbacks(D,t)})}}function y(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function g(e){if(e){var t=e.indexOf("#");return-1!==t?e.substr(t+1):""}return O.location.hash.substr(1)}function w(){u(),f()}function b(){var e,t,n=navigator.userAgent,o=n.match(/MSIE 10\.0; Windows NT 6\.2/),i=n.match(/IEMobile\/10\.0/);(o||i)&&(e="<style>@-webkit-viewport { width: device-width; }",e+="@-moz-viewport { width: device-width; }",e+="@-ms-viewport { width: "+(i?"auto":"device-width")+"; }",e+="@-o-viewport { width: device-width; }",e+="@viewport { width: device-width; }</style>",$("head").append($(e))),t=n.indexOf("Mozilla/5.0")>-1&&n.indexOf("Android ")>-1&&n.indexOf("AppleWebKit")>-1&&-1===n.indexOf("Chrome"),t&&$("select.form-control").removeClass("form-control").css("width","100%")}var S,x=this,O=window,k=O.document,C={},I=[],M=[],E=!(!O.matchMedia||!O.matchMedia("screen").addListener),T=E&&O.matchMedia,A="(min-width: %dpx)",P=A,L=A,j=[],W=!1,z=[],D=[],F={breakpoints:{sm:768,md:992,lg:1200}},_=".moff",J="[data-load-target]",N={};this.mode="moff",this.init=function(t){t||(t={}),$(function(){s(t),c(),d(),e(),w(),b()})},this.appear=function(e,t){t=t||1,t=1e3*t,x.supportCSS3("transition")?e.css({"-webkit-transition":"opacity"+t+"ms","-moz-transition":"opacity"+t+"ms","-o-transition":"opacity"+t+"ms",transition:"opacity"+t+"ms",opacity:1}):e.animate({opacity:1},t)},this.reusableEvents=function(){t(),r(),o()},this.isVisible=function(e){var t,n=$(O),o={top:n.scrollTop(),left:n.scrollLeft()};return e=$(e),o.right=o.left+n.width(),o.bottom=o.top+n.height(),t=e.offset(),t.right=t.left+e.outerWidth(),t.bottom=t.top+e.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)},this.supportCSS3=function(e){for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+"Webkit Moz O ms".split(" ").join(t+" ")+t).split(" "),o=n.length,i=0;o>i;i++)if(e=n[i],-1===e.indexOf("-")&&void 0!==document.createElement(this.mode).style[e])return!0;return!1},this.runCallbacks=function(e,t,n){$.isArray(e)||(e=[]),"undefined"==typeof n&&(n=[]),$.each(e,function(e,o){"function"==typeof o&&o.apply(t,n)})},this.onViewChange=function(e){"function"==typeof e&&j.push(e)},this.beforeLoad=function(e){z.push(e)},this.afterLoad=function(e){D.push(e)},this.getMode=function(){var e="xs";return E&&(T(L).matches?e="lg":T(P).matches?e="md":T(A).matches&&(e="sm")),e},this.register=function(e){C[e.id]={loaded:!1,depend:{js:e.depend&&e.depend.js||[],css:e.depend&&e.depend.css||[]},files:{js:e.files&&e.files.js||[],css:e.files&&e.files.css||[]},loadOnScreen:e.loadOnScreen||[],beforeInclude:e.beforeInclude||void 0,afterInclude:e.afterInclude||void 0,onWindowLoad:e.onWindowLoad||!1}},this.include=function(e,t){function n(){x.loadDepends(i.files,o)}function o(){$.isFunction(i.afterInclude)&&i.afterInclude(),"function"==typeof t&&t()}var i=C[e];if(!i.loaded){if(i.onWindowLoad&&!W)return void I.push({id:e,callback:t});i.loaded=!0,$.isFunction(i.beforeInclude)&&i.beforeInclude(),this.loadDepends(i.depend,n)}},this.loadDepends=function(e,t){function n(){o++,o===i&&t()}var o=0,i=0,r=$.isArray(e.css),a=$.isArray(e.js);a&&(i+=e.js.length),r&&(i+=e.css.length),a&&e.js.length&&this.loadJS(e.js,n),r&&e.css.length&&this.loadCSS(e.css,n),i||t()},this.loadJS=function(e,t){function n(e){$("<script>").on("load",t).appendTo($("body").length&&$("body")||$("head")).attr("src",e)}return $.isArray(e)||"string"==typeof e?void($.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)):void window.console.warn("Moff.loadJS source is not array or string")},this.loadCSS=function(e,t){function n(){var n=$('<link rel="stylesheet">').on("load",t).attr("href",e).appendTo("head");n=n[0],n.onreadystatechange=function(){var e=n.readyState;("loaded"===e||"complete"===e)&&(n.onreadystatechange=null,t())}}return $.isArray(e)||"string"==typeof e?void($.isArray(e)?$.each(e,function(e,t){n(t)}):n(e)):void window.console.warn("Moff.loadCSS source is not array or string")},this.extend=function(e,t,n){this.hasOwnProperty(e)||(n&&(t.prototype=this,t.prototype.constructor=t),this[e]=new t,"function"==typeof this[e].init&&this[e].init())},this.extendClass=function(e,t){function n(){}n.prototype=new t,e.prototype=new n,e.prototype.constructor=e,e.parentClass=parent.prototype},this.viewModeIsChanged=function(){return S!==this.getMode()},this.settings=function(e,t){return"undefined"==typeof t?F[e]:void(F[e]=t)},this.version="1.0.0",this._testonly={_visibleElements:function(){return M},_deferredObjects:function(){return I},_registeredFiles:function(){return C}}}function t(){function e(e,t){e.prototype=n,e.prototype.constructor=e,"undefined"==typeof i[t]&&(i[t]=e)}function t(e){$.isArray(e)&&$.each(e,function(){n.registerEvent(this)})}var n=this,o={},i={},r={};this.register=function(t,n,i){"undefined"==typeof i&&(i=n,n=void 0),o.hasOwnProperty(t)||(n?this.loadDepends(n,function(){e(i,t)}):e(i,t))},this.initClass=function(e,n){try{var r=new i[e],a=o[e];return $.isArray(a)?o[e].push(r):o[e]="undefined"!=typeof a?[a,r]:r,n&&$.each(n,function(e,t){r.set(e,t)}),r.moduleName=e,"function"==typeof r.beforeInit&&r.beforeInit(),t(r.events),r.setScope(),"function"==typeof r.init&&r.init(),"function"==typeof r.afterInit&&r.afterInit(),r}catch(s){window.console.error(s)}},this.registerEvent=function(e){"undefined"==typeof r[e]&&(r[e]=[])},this.assignForEvent=function(e,t){this.registerEvent(e),"function"==typeof t&&r[e].push(t)},this.triggerEvent=function(e){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof r[e]&&n.runCallbacks(r[e],this,t)},this.get=function(e){return o.hasOwnProperty(e)&&o[e]||void 0},this.set=function(e,t){this[e]=t},this.remove=function(){var e=this.moduleName,t=this.id;$.isArray(o[e])?($.each(o[e],function(n,i){i.id&&i.id===t&&o[e].splice(n,1)}),1===o[e].length&&(o[e]=o[e][0])):delete o[e]},this.setScope=function(){"undefined"!=typeof this.scopeSelector&&(this.scope=$(this.scopeSelector))},this.find=function(e){return this.scope.find(e)}}function n(){function e(){i.touch=!!("ontouchstart"in o||o.DocumentTouch&&a instanceof o.DocumentTouch),i.applicationCache=!!o.applicationCache,i.canvas=function(){var e=a.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),i.canvastext=!(!i.canvas||!$.isFunction(a.createElement("canvas").getContext("2d").fillText)),i.draganddrop=function(){var e=a.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),i.hashchange=!!("onhashchange"in o&&("undefined"==typeof a.documentMode||a.documentMode>7)),i.history=!(!o.history||!history.pushState),i.postmessage=!!o.postMessage,i.websockets=!!("WebSocket"in o||"MozWebSocket"in o),i.websqldatabase=!!o.openDatabase,i.webworkers=!!o.Worker,i.audio=function(){var e=a.createElement("audio"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}(),i.video=function(){var e=a.createElement("video"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}(),i.indexeddb=function(){var e=["indexeddb","WebkitIndexeddb","MozIndexeddb","OIndexeddb","msIndexeddb"];for(var t in e)if(e.hasOwnProperty(t)){var n=o[e[t]];if(void 0!==n)return n===!1?e[t]:"function"==typeof n?n.bind(o):n}return!1}(),i.localstorage=function(){try{return localStorage.setItem(i.mode,i.mode),localStorage.removeItem(i.mode),!0}catch(e){return!1}}(),i.sessionstorage=function(){try{return sessionStorage.setItem(i.mode,i.mode),sessionStorage.removeItem(i.mode),!0}catch(e){return!1}}()}function t(){var e=/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[];e[1]&&(i.browser[e[1]]=!0),e[2]&&(i.browser.version=e[2]),i.browser.chrome?i.browser.webkit=!0:i.browser.webkit&&(i.browser.safari=!0)}function n(){i.OS.iOS=/(ipad|iphone|ipod)/g.test(r),i.OS.macOS=r.indexOf("mac")>-1,i.OS.windows=r.indexOf("win")>-1,i.OS.android=r.indexOf("android")>-1}var o=window,i=this,r=window.navigator.userAgent.toLowerCase(),a=document;this.browser={},this.OS={},this.init=function(){e(),t(),n()}}var o=e,i=t,r=n,a=this.Moff=new o;a.extend("module",i),a.extend("detect",r)}).call(this);
//# sourceMappingURL=moff.min.js.map