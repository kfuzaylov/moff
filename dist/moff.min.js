(function(){"use strict";function e(){function e(){A.addEventListener("load",t,!1),L?(O(E).addListener(n),O(T).addListener(n),O(I).addListener(n)):A.addEventListener("resize",n,!1),A.addEventListener("popstate",p,!1),S.handleDataEvents()}function t(){D=!0,S.each(k,function(e,t){S.include(t.id,t.callback)})}function n(e){(L&&e.matches||c())&&(s(),S.runCallbacks(M,S,[S.getMode()]),S.handleDataEvents())}function o(e){var t=e.getAttribute("data-load-screen");return t?i(t.split(" ")):!0}function i(e){return Array.isArray(e)&&e.length&&-1!==e.indexOf(S.getMode())}function r(){var e=g();S.each(e,function(t,n){H[t]=e[t]})}function a(){var e;H.breakpoints&&L&&(e=H.breakpoints,I=I.replace("%d",e.sm),T=T.replace("%d",e.md),E=E.replace("%d",e.lg))}function c(){return w!==S.getMode()}function s(){w=S.getMode()}function d(e,t){S.ajax({url:e,type:"GET",success:function(e){"function"==typeof t&&t(e)}})}function u(e){var t,n=e.title||"",o=e.href||e.getAttribute("data-load-url"),i=e.getAttribute("data-load-target"),r=e.getAttribute("data-push-url"),a=e.getAttribute("data-load-module");o&&(o=l(e,o),e.removeAttribute("data-load-event"),S.runCallbacks(q,e),S.detect.history&&r&&(t=Date.now(),A.history.pushState({elemId:t,url:o},n,o),z[t]=e),f(e,o,i,function(){a?S.include(a,function(){S.runCallbacks($,e)}):S.runCallbacks($,e)}))}function l(e,t){return t.replace(/\{\{(.*?)\}\}/g,function(){return e.getAttribute(arguments[1])})}function f(e,t,n,o){function i(t){r=e.getAttribute("data-page-title"),x.querySelector(n).innerHTML=t,r&&(x.title=r),S.handleDataEvents(),o()}var r;t=h(t),W[t]?i(W[t]):d(t,i)}function p(e){var t,n=e.state;if(n&&(t=z[n.elemId],o(t))){var i=n.url,r=t.getAttribute("data-load-target");S.runCallbacks(q,t),f(t,i,r,function(){S.runCallbacks($,t)})}}function h(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function y(){var e,t="data-load-screen";S.each(x.querySelectorAll("["+t+"]"),function(){e=this,o(e)&&(e.removeAttribute(t),u(e))})}function v(){S.each(C,function(e,t){i(t.loadOnScreen)&&!x.querySelectorAll('[data-load-module="'+e+'"]').length&&S.include(e)})}function m(e){var t=Object.prototype.toString.call(e);return typeof/^\[object (HTMLCollection|NodeList)\]$/.test(t)&&e.hasOwnProperty("length")&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)}function g(){return window.moffConfig||{}}function b(){r(),a(),s(),e()}var w,S=this,A=window,x=A.document,C={},k=[],L=!(!A.matchMedia||!A.matchMedia("screen").addListener),O=L&&A.matchMedia,I="(min-width: %dpx)",T=I,E=I,M=[],j=[],D=!1,P=!1,q=[],$=[],W={},H={breakpoints:{sm:768,md:992,lg:1200},loadOnHover:!0,cacheLiveTime:2e3},R="data-load-target",z={};this.handleDataEvents=function(){var e,t,n;y(),v(),S.each(x.querySelectorAll("["+R+"]"),function(){e=this,e.handled||(t=(e.getAttribute("data-load-event")||"click").toLowerCase(),"dom"===t?S.$(function(){u(e)}):("click"===t&&H.loadOnHover&&!S.detect.isMobile&&e.addEventListener("mouseenter",function(){e=this,n=e.href||e.getAttribute("data-load-url"),n=h(n),n&&(n=l(e,n),d(n,function(e){W[n]=e,setTimeout(function(){delete W[n]},H.cacheLiveTime)}))},!1),e.addEventListener(t,function(e){u(this),e.preventDefault()},!1)),e.handled=!0)})},this.supportCSS3=function(e){for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+"Webkit Moz O ms".split(" ").join(t+" ")+t).split(" "),o=n.length,i=0;o>i;i++)if(e=n[i],-1===e.indexOf("-")&&void 0!==document.createElement("div").style[e])return!0;return!1},this.ajax=function(e){var t,n=[];e.type=e.type.toUpperCase(),"object"==typeof e.data&&(t=e.data,this.each(t,function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),e.data=n.join("&")),"GET"===e.type&&e.data&&(e.url+=(-1!==e.url.indexOf("?")?"&":"?")+e.data.replace(/%20/g,"+"),e.data=null);var o=new XMLHttpRequest;o.open(e.type,e.url,!0),o.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onload=function(){var t=this.status;t>=200&&300>t||304===t?e.success(this.response,this):e.error(this)},o.send(e.data)},this.runCallbacks=function(e,t,n){Array.isArray(e)||(e=[]),"undefined"==typeof n&&(n=[]),S.each(e,function(e,o){"function"==typeof o&&o.apply(t,n)})},this.onViewChange=function(e){"function"==typeof e&&M.push(e)},this.beforeLoad=function(e){q.push(e)},this.afterLoad=function(e){$.push(e)},this.getMode=function(){var e="xs";return L&&(O(E).matches?e="lg":O(T).matches?e="md":O(I).matches&&(e="sm")),e},this.register=function(e){C[e.id]={loaded:!1,depend:{js:e.depend&&e.depend.js||[],css:e.depend&&e.depend.css||[]},file:{js:e.file&&e.file.js||[],css:e.file&&e.file.css||[]},loadOnScreen:e.loadOnScreen||[],beforeInclude:e.beforeInclude||void 0,afterInclude:e.afterInclude||void 0,onWindowLoad:e.onWindowLoad||!1}},this.include=function(e,t){function n(){S.loadAssets(i.file,o)}function o(){"function"==typeof i.afterInclude&&i.afterInclude(),"function"==typeof t&&t()}var i=C[e];if(!i.loaded){if(i.onWindowLoad&&!D)return void k.push({id:e,callback:t});i.loaded=!0,"function"==typeof i.beforeInclude&&i.beforeInclude(),this.loadAssets(i.depend,n)}},this.loadAssets=function(e,t){function n(){var o=e.js[a];o&&S.loadJS(o,function(){a++,i++,i===r?t():n()})}function o(){i++,i===r&&t()}var i=0,r=0,a=0,c=Array.isArray(e.css),s=Array.isArray(e.js);s&&(r+=e.js.length),c&&(r+=e.css.length),n(),c&&e.css.length&&this.each(e.css,function(e,t){S.loadCSS(t,o)}),r||t()},this.loadJS=function(e,t){if("string"!=typeof e)return void window.console.warn("Moff.loadJS source is not a string");var n,o="function"==typeof t;x.querySelector('script[src="'+e+'"]')?o&&t():(n=x.createElement("script"),o&&n.addEventListener("load",t,!1),n.src=e,x.querySelector("body").appendChild(n))},this.loadCSS=function(e,t){if("string"!=typeof e)return void window.console.warn("Moff.loadCSS source is a string");var n,o="function"==typeof t;x.querySelector('link[href="'+e+'"]')?o&&t():(n=x.createElement("link"),o&&n.addEventListener("load",t,!1),n.href=e,n.setAttribute("rel","stylesheet"),x.querySelector("head").appendChild(n),n.onreadystatechange=function(){var e=n.readyState;("loaded"===e||"complete"===e)&&(n.onreadystatechange=null,o&&t())})},this.extend=function(e,t,n){this.hasOwnProperty(e)||(n&&(t.prototype=this,t.prototype.constructor=t),this[e]=new t,"function"==typeof this[e].init&&this[e].init())},this.reopen=function(e){if("object"!=typeof e)return void window.console.warn("Reopen method argument must be an object");var t=this;t.each(e,function(e,n){t[e]=n})},this.extendClass=function(e,t){function n(){}n.prototype=new t,e.prototype=new n,e.prototype.constructor=e,e.parentClass=t.prototype},this.settings=function(e,t){return"undefined"==typeof t?H[e]:void(H[e]=t)},this.each=function(e,t){var n,o=0,i=e.length,r=Array.isArray(e)||m(e);if(r)for(;i>o&&(n=t.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(e.hasOwnProperty(o)&&(n=t.call(e[o],o,e[o]),n===!1))break},this.$=function(e){"function"==typeof e&&(P?e():j.push(e))},this.version="1.5.23",x.addEventListener("DOMContentLoaded",function(){P=!0,b(),S.runCallbacks(j,this)},!1)}function t(){function e(e){Array.isArray(e)&&t.each(e,function(e,n){t.event.add(n)})}var t=this,n={},o={};this.scopeSelector=null,this.scope=null,this.events=[],this.beforeInit=function(){},this.init=function(){},this.afterInit=function(){},this.register=function(e,n,i){"undefined"==typeof i&&(i=n,n=void 0),i.prototype=t,i.prototype.constructor=i,"undefined"==typeof o[e]&&(o[e]={constructor:i,depend:n})},this.initClass=function(i,r){function a(){var o=new c.constructor,a=n[i];Array.isArray(a)?a.push(o):n[i]="undefined"!=typeof a?[a,o]:o,"function"==typeof o.beforeInit&&o.beforeInit(),r&&t.each(r,function(e,t){o[e]=t}),o.moduleName=i,e(o.events),o.setScope(),"function"==typeof o.init&&o.init(),"function"==typeof o.afterInit&&o.afterInit()}var c=o[i];if(!c)return void window.console.warn(i+" Class is not registered");try{c.depend?this.loadAssets(c.depend,a):a()}catch(s){window.console.error(s)}},this.get=function(e){return n.hasOwnProperty(e)&&n[e]||void 0},this.getAll=function(){return n},this.remove=function(){function e(){n[i].splice(a,1),o=n[i].length,--a}var t,o,i=this.moduleName,r=this.id,a=0;if(Array.isArray(n[i])){for(o=n[i].length;o>a;a++)t=n[i][a],t.id?t.id===r&&e():t.moduleName===i&&e();1===n[i].length?n[i]=n[i][0]:n[i].length||delete n[i]}else delete n[i]},this.setScope=function(){this.scopeSelector&&(this.scope=document.querySelector(this.scopeSelector))},this.find=function(e){return this.scope.querySelectorAll(e)}}function n(){function e(){r.touch=!!("ontouchstart"in i||i.DocumentTouch&&c instanceof i.DocumentTouch),r.applicationCache=!!i.applicationCache,r.canvas=function(){var e=c.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),r.canvasText=!(!r.canvas||"function"!=typeof c.createElement("canvas").getContext("2d").fillText),r.dragAndDrop=function(){var e=c.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),r.hashChange=!!("onhashchange"in i&&("undefined"==typeof c.documentMode||c.documentMode>7)),r.history=!(!i.history||!history.pushState),r.postMessage=!!i.postMessage,r.webSockets=!!("WebSocket"in i||"MozWebSocket"in i),r.webWorkers=!!i.Worker,r.audio=function(){var e=c.createElement("audio"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}(),r.video=function(){var e=c.createElement("video"),t=!1;try{e.canPlayType&&(t={},t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}(),r.indexedDB=function(){var e=["indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB"];for(var t in e)if(e.hasOwnProperty(t)){var n=i[e[t]];if(void 0!==n)return n===!1?e[t]:"function"==typeof n?n.bind(i):n}return!1}(),r.localStorage=function(){try{return localStorage.setItem(r.mode,r.mode),localStorage.removeItem(r.mode),!0}catch(e){return!1}}(),r.sessionStorage=function(){try{return sessionStorage.setItem(r.mode,r.mode),sessionStorage.removeItem(r.mode),!0}catch(e){return!1}}()}function t(){var e=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];e[1]&&(r.browser[e[1]]=!0),e[2]&&(r.browser.version=e[2]),r.browser.chrome&&(r.browser.webkit=!0)}function n(){var e=r.OS,t=/(ipad|iphone|ipod)/g.test(a),n=a.indexOf("mac")>-1,o=a.indexOf("win")>-1,i=a.indexOf("android")>-1,c=a.indexOf("windows phone")>-1;t?e.iOS=t:n?e.macOS=n:o?e.windows=o:i?e.android=i:c&&(e.windowsPhone=c)}function o(){r.isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)}var i=window,r=this,a=window.navigator.userAgent.toLowerCase(),c=document;this.browser={},this.OS={},this.init=function(){e(),t(),n(),o()}}function o(){var e={};this.add=function(t){"undefined"==typeof e[t]&&(e[t]=[])},this.on=function(t,n){this.add(t),"function"==typeof n&&e[t].push(n)},this.trigger=function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof e[t]&&this.runCallbacks(e[t],this,n)},this.get=function(t){return e[t]}}var i=e,r=t,a=n,c=o,s=this.Moff=new i;s.extend("module",r,!0),s.extend("detect",a,!0),s.extend("event",c,!0)}).call(this);
//# sourceMappingURL=moff.min.js.map